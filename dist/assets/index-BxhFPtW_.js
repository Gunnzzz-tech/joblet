var qO=Object.defineProperty;var vE=n=>{throw TypeError(n)};var WO=(n,e,t)=>e in n?qO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wE=(n,e,t)=>WO(n,typeof e!="symbol"?e+"":e,t),Km=(n,e,t)=>e.has(n)||vE("Cannot "+t);var z=(n,e,t)=>(Km(n,e,"read from private field"),t?t.call(n):e.get(n)),Oe=(n,e,t)=>e.has(n)?vE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),we=(n,e,t,r)=>(Km(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ht=(n,e,t)=>(Km(n,e,"access private method"),t);var Jh=(n,e,t,r)=>({set _(s){we(n,e,s,t)},get _(){return z(n,e,r)}});function KO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ch(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var lS={exports:{}},Rp={},uS={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=Symbol.for("react.element"),HO=Symbol.for("react.portal"),GO=Symbol.for("react.fragment"),JO=Symbol.for("react.strict_mode"),QO=Symbol.for("react.profiler"),YO=Symbol.for("react.provider"),XO=Symbol.for("react.context"),ZO=Symbol.for("react.forward_ref"),ej=Symbol.for("react.suspense"),tj=Symbol.for("react.memo"),nj=Symbol.for("react.lazy"),EE=Symbol.iterator;function rj(n){return n===null||typeof n!="object"?null:(n=EE&&n[EE]||n["@@iterator"],typeof n=="function"?n:null)}var cS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hS=Object.assign,dS={};function Gl(n,e,t){this.props=n,this.context=e,this.refs=dS,this.updater=t||cS}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Gl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function fS(){}fS.prototype=Gl.prototype;function nv(n,e,t){this.props=n,this.context=e,this.refs=dS,this.updater=t||cS}var rv=nv.prototype=new fS;rv.constructor=nv;hS(rv,Gl.prototype);rv.isPureReactComponent=!0;var bE=Array.isArray,pS=Object.prototype.hasOwnProperty,sv={current:null},mS={key:!0,ref:!0,__self:!0,__source:!0};function gS(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pS.call(e,r)&&!mS.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hh,type:n,key:i,ref:o,props:s,_owner:sv.current}}function sj(n,e){return{$$typeof:hh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function iv(n){return typeof n=="object"&&n!==null&&n.$$typeof===hh}function ij(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xE=/\/+/g;function Hm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ij(""+n.key):e.toString(36)}function Nd(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case hh:case HO:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+Hm(o,0):r,bE(s)?(t="",n!=null&&(t=n.replace(xE,"$&/")+"/"),Nd(s,e,t,"",function(u){return u})):s!=null&&(iv(s)&&(s=sj(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xE,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bE(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+Hm(i,a);o+=Nd(i,e,t,l,s)}else if(l=rj(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+Hm(i,a++),o+=Nd(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qh(n,e,t){if(n==null)return n;var r=[],s=0;return Nd(n,r,"","",function(i){return e.call(t,i,s++)}),r}function oj(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var fn={current:null},Od={transition:null},aj={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Od,ReactCurrentOwner:sv};function yS(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Qh,forEach:function(n,e,t){Qh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Qh(n,function(){e++}),e},toArray:function(n){return Qh(n,function(e){return e})||[]},only:function(n){if(!iv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Se.Component=Gl;Se.Fragment=GO;Se.Profiler=QO;Se.PureComponent=nv;Se.StrictMode=JO;Se.Suspense=ej;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aj;Se.act=yS;Se.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=hS({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)pS.call(e,l)&&!mS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:hh,type:n.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(n){return n={$$typeof:XO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:YO,_context:n},n.Consumer=n};Se.createElement=gS;Se.createFactory=function(n){var e=gS.bind(null,n);return e.type=n,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:ZO,render:n}};Se.isValidElement=iv;Se.lazy=function(n){return{$$typeof:nj,_payload:{_status:-1,_result:n},_init:oj}};Se.memo=function(n,e){return{$$typeof:tj,type:n,compare:e===void 0?null:e}};Se.startTransition=function(n){var e=Od.transition;Od.transition={};try{n()}finally{Od.transition=e}};Se.unstable_act=yS;Se.useCallback=function(n,e){return fn.current.useCallback(n,e)};Se.useContext=function(n){return fn.current.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n){return fn.current.useDeferredValue(n)};Se.useEffect=function(n,e){return fn.current.useEffect(n,e)};Se.useId=function(){return fn.current.useId()};Se.useImperativeHandle=function(n,e,t){return fn.current.useImperativeHandle(n,e,t)};Se.useInsertionEffect=function(n,e){return fn.current.useInsertionEffect(n,e)};Se.useLayoutEffect=function(n,e){return fn.current.useLayoutEffect(n,e)};Se.useMemo=function(n,e){return fn.current.useMemo(n,e)};Se.useReducer=function(n,e,t){return fn.current.useReducer(n,e,t)};Se.useRef=function(n){return fn.current.useRef(n)};Se.useState=function(n){return fn.current.useState(n)};Se.useSyncExternalStore=function(n,e,t){return fn.current.useSyncExternalStore(n,e,t)};Se.useTransition=function(){return fn.current.useTransition()};Se.version="18.3.1";uS.exports=Se;var j=uS.exports;const _n=aS(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lj=j,uj=Symbol.for("react.element"),cj=Symbol.for("react.fragment"),hj=Object.prototype.hasOwnProperty,dj=lj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fj={key:!0,ref:!0,__self:!0,__source:!0};function _S(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hj.call(e,r)&&!fj.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uj,type:n,key:i,ref:o,props:s,_owner:dj.current}}Rp.Fragment=cj;Rp.jsx=_S;Rp.jsxs=_S;lS.exports=Rp;var f=lS.exports,Hg={},vS={exports:{}},$n={},wS={exports:{}},ES={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Y,ce){var me=Y.length;Y.push(ce);e:for(;0<me;){var Le=me-1>>>1,Je=Y[Le];if(0<s(Je,ce))Y[Le]=ce,Y[me]=Je,me=Le;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ce=Y[0],me=Y.pop();if(me!==ce){Y[0]=me;e:for(var Le=0,Je=Y.length,re=Je>>>1;Le<re;){var xe=2*(Le+1)-1,It=Y[xe],jt=xe+1,mn=Y[jt];if(0>s(It,me))jt<Je&&0>s(mn,It)?(Y[Le]=mn,Y[jt]=me,Le=jt):(Y[Le]=It,Y[xe]=me,Le=xe);else if(jt<Je&&0>s(mn,me))Y[Le]=mn,Y[jt]=me,Le=jt;else break e}}return ce}function s(Y,ce){var me=Y.sortIndex-ce.sortIndex;return me!==0?me:Y.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,g=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(Y){for(var ce=t(u);ce!==null;){if(ce.callback===null)r(u);else if(ce.startTime<=Y)r(u),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=t(u)}}function N(Y){if(E=!1,v(Y),!w)if(t(l)!==null)w=!0,lt(D);else{var ce=t(u);ce!==null&&Ot(N,ce.startTime-Y)}}function D(Y,ce){w=!1,E&&(E=!1,b(x),x=-1),g=!0;var me=p;try{for(v(ce),d=t(l);d!==null&&(!(d.expirationTime>ce)||Y&&!C());){var Le=d.callback;if(typeof Le=="function"){d.callback=null,p=d.priorityLevel;var Je=Le(d.expirationTime<=ce);ce=n.unstable_now(),typeof Je=="function"?d.callback=Je:d===t(l)&&r(l),v(ce)}else r(l);d=t(l)}if(d!==null)var re=!0;else{var xe=t(u);xe!==null&&Ot(N,xe.startTime-ce),re=!1}return re}finally{d=null,p=me,g=!1}}var F=!1,S=null,x=-1,A=5,R=-1;function C(){return!(n.unstable_now()-R<A)}function O(){if(S!==null){var Y=n.unstable_now();R=Y;var ce=!0;try{ce=S(!0,Y)}finally{ce?k():(F=!1,S=null)}}else F=!1}var k;if(typeof _=="function")k=function(){_(O)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Be=Ee.port2;Ee.port1.onmessage=O,k=function(){Be.postMessage(null)}}else k=function(){T(O,0)};function lt(Y){S=Y,F||(F=!0,k())}function Ot(Y,ce){x=T(function(){Y(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){w||g||(w=!0,lt(D))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var ce=3;break;default:ce=p}var me=p;p=ce;try{return Y()}finally{p=me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var me=p;p=Y;try{return ce()}finally{p=me}},n.unstable_scheduleCallback=function(Y,ce,me){var Le=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Le+me:Le):me=Le,Y){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=me+Je,Y={id:h++,callback:ce,priorityLevel:Y,startTime:me,expirationTime:Je,sortIndex:-1},me>Le?(Y.sortIndex=me,e(u,Y),t(l)===null&&Y===t(u)&&(E?(b(x),x=-1):E=!0,Ot(N,me-Le))):(Y.sortIndex=Je,e(l,Y),w||g||(w=!0,lt(D))),Y},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(Y){var ce=p;return function(){var me=p;p=ce;try{return Y.apply(this,arguments)}finally{p=me}}}})(ES);wS.exports=ES;var pj=wS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mj=j,Mn=pj;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bS=new Set,bc={};function ta(n,e){_l(n,e),_l(n+"Capture",e)}function _l(n,e){for(bc[n]=e,n=0;n<e.length;n++)bS.add(e[n])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gg=Object.prototype.hasOwnProperty,gj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TE={},IE={};function yj(n){return Gg.call(IE,n)?!0:Gg.call(TE,n)?!1:gj.test(n)?IE[n]=!0:(TE[n]=!0,!1)}function _j(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function vj(n,e,t,r){if(e===null||typeof e>"u"||_j(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Kt[n]=new pn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Kt[e]=new pn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Kt[n]=new pn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Kt[n]=new pn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Kt[n]=new pn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Kt[n]=new pn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Kt[n]=new pn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Kt[n]=new pn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Kt[n]=new pn(n,5,!1,n.toLowerCase(),null,!1,!1)});var ov=/[\-:]([a-z])/g;function av(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ov,av);Kt[e]=new pn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ov,av);Kt[e]=new pn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ov,av);Kt[e]=new pn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Kt[n]=new pn(n,1,!1,n.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Kt[n]=new pn(n,1,!1,n.toLowerCase(),null,!0,!0)});function lv(n,e,t,r){var s=Kt.hasOwnProperty(e)?Kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vj(e,t,s,r)&&(t=null),r||s===null?yj(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ts=mj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yh=Symbol.for("react.element"),Da=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),uv=Symbol.for("react.strict_mode"),Jg=Symbol.for("react.profiler"),xS=Symbol.for("react.provider"),TS=Symbol.for("react.context"),cv=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),Yg=Symbol.for("react.suspense_list"),hv=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),IS=Symbol.for("react.offscreen"),SE=Symbol.iterator;function Su(n){return n===null||typeof n!="object"?null:(n=SE&&n[SE]||n["@@iterator"],typeof n=="function"?n:null)}var at=Object.assign,Gm;function $u(n){if(Gm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gm=e&&e[1]||""}return`
`+Gm+n}var Jm=!1;function Qm(n,e){if(!n||Jm)return"";Jm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?$u(n):""}function wj(n){switch(n.tag){case 5:return $u(n.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return n=Qm(n.type,!1),n;case 11:return n=Qm(n.type.render,!1),n;case 1:return n=Qm(n.type,!0),n;default:return""}}function Xg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Va:return"Fragment";case Da:return"Portal";case Jg:return"Profiler";case uv:return"StrictMode";case Qg:return"Suspense";case Yg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case TS:return(n.displayName||"Context")+".Consumer";case xS:return(n._context.displayName||"Context")+".Provider";case cv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case hv:return e=n.displayName||null,e!==null?e:Xg(n.type)||"Memo";case Ks:e=n._payload,n=n._init;try{return Xg(n(e))}catch{}}return null}function Ej(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xg(e);case 8:return e===uv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function SS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bj(n){var e=SS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xh(n){n._valueTracker||(n._valueTracker=bj(n))}function AS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=SS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ff(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Zg(n,e){var t=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function AE(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ki(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kS(n,e){e=e.checked,e!=null&&lv(n,"checked",e,!1)}function ey(n,e){kS(n,e);var t=ki(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ty(n,e.type,t):e.hasOwnProperty("defaultValue")&&ty(n,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function kE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ty(n,e,t){(e!=="number"||ff(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Bu=Array.isArray;function Ha(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ki(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function ny(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function RE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Bu(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ki(t)}}function RS(n,e){var t=ki(e.value),r=ki(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function PE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function PS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ry(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?PS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zh,CS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Zh=Zh||document.createElement("div"),Zh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function xc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xj=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(n){xj.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),tc[e]=tc[n]})});function NS(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||tc.hasOwnProperty(n)&&tc[n]?(""+e).trim():e+"px"}function OS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=NS(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var Tj=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sy(n,e){if(e){if(Tj[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function iy(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oy=null;function dv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ay=null,Ga=null,Ja=null;function CE(n){if(n=ph(n)){if(typeof ay!="function")throw Error(W(280));var e=n.stateNode;e&&(e=jp(e),ay(n.stateNode,n.type,e))}}function jS(n){Ga?Ja?Ja.push(n):Ja=[n]:Ga=n}function DS(){if(Ga){var n=Ga,e=Ja;if(Ja=Ga=null,CE(n),e)for(n=0;n<e.length;n++)CE(e[n])}}function VS(n,e){return n(e)}function LS(){}var Ym=!1;function MS(n,e,t){if(Ym)return n(e,t);Ym=!0;try{return VS(n,e,t)}finally{Ym=!1,(Ga!==null||Ja!==null)&&(LS(),DS())}}function Tc(n,e){var t=n.stateNode;if(t===null)return null;var r=jp(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var ly=!1;if(fs)try{var Au={};Object.defineProperty(Au,"passive",{get:function(){ly=!0}}),window.addEventListener("test",Au,Au),window.removeEventListener("test",Au,Au)}catch{ly=!1}function Ij(n,e,t,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var nc=!1,pf=null,mf=!1,uy=null,Sj={onError:function(n){nc=!0,pf=n}};function Aj(n,e,t,r,s,i,o,a,l){nc=!1,pf=null,Ij.apply(Sj,arguments)}function kj(n,e,t,r,s,i,o,a,l){if(Aj.apply(this,arguments),nc){if(nc){var u=pf;nc=!1,pf=null}else throw Error(W(198));mf||(mf=!0,uy=u)}}function na(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function FS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function NE(n){if(na(n)!==n)throw Error(W(188))}function Rj(n){var e=n.alternate;if(!e){if(e=na(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return NE(s),n;if(i===r)return NE(s),e;i=i.sibling}throw Error(W(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function US(n){return n=Rj(n),n!==null?$S(n):null}function $S(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$S(n);if(e!==null)return e;n=n.sibling}return null}var BS=Mn.unstable_scheduleCallback,OE=Mn.unstable_cancelCallback,Pj=Mn.unstable_shouldYield,Cj=Mn.unstable_requestPaint,pt=Mn.unstable_now,Nj=Mn.unstable_getCurrentPriorityLevel,fv=Mn.unstable_ImmediatePriority,zS=Mn.unstable_UserBlockingPriority,gf=Mn.unstable_NormalPriority,Oj=Mn.unstable_LowPriority,qS=Mn.unstable_IdlePriority,Pp=null,zr=null;function jj(n){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Pp,n,void 0,(n.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:Lj,Dj=Math.log,Vj=Math.LN2;function Lj(n){return n>>>=0,n===0?32:31-(Dj(n)/Vj|0)|0}var ed=64,td=4194304;function zu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yf(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=zu(a):(i&=o,i!==0&&(r=zu(i)))}else o=t&~s,o!==0?r=zu(o):i!==0&&(r=zu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-vr(e),s=1<<t,r|=n[t],e&=~s;return r}function Mj(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fj(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-vr(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=Mj(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function cy(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function WS(){var n=ed;return ed<<=1,!(ed&4194240)&&(ed=64),n}function Xm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function dh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-vr(e),n[e]=t}function Uj(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-vr(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function pv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-vr(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ue=0;function KS(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var HS,mv,GS,JS,QS,hy=!1,nd=[],fi=null,pi=null,mi=null,Ic=new Map,Sc=new Map,Js=[],$j="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jE(n,e){switch(n){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":mi=null;break;case"pointerover":case"pointerout":Ic.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function ku(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ph(e),e!==null&&mv(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function Bj(n,e,t,r,s){switch(e){case"focusin":return fi=ku(fi,n,e,t,r,s),!0;case"dragenter":return pi=ku(pi,n,e,t,r,s),!0;case"mouseover":return mi=ku(mi,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Ic.set(i,ku(Ic.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sc.set(i,ku(Sc.get(i)||null,n,e,t,r,s)),!0}return!1}function YS(n){var e=_o(n.target);if(e!==null){var t=na(e);if(t!==null){if(e=t.tag,e===13){if(e=FS(t),e!==null){n.blockedOn=e,QS(n.priority,function(){GS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=dy(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);oy=r,t.target.dispatchEvent(r),oy=null}else return e=ph(t),e!==null&&mv(e),n.blockedOn=t,!1;e.shift()}return!0}function DE(n,e,t){jd(n)&&t.delete(e)}function zj(){hy=!1,fi!==null&&jd(fi)&&(fi=null),pi!==null&&jd(pi)&&(pi=null),mi!==null&&jd(mi)&&(mi=null),Ic.forEach(DE),Sc.forEach(DE)}function Ru(n,e){n.blockedOn===e&&(n.blockedOn=null,hy||(hy=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,zj)))}function Ac(n){function e(s){return Ru(s,n)}if(0<nd.length){Ru(nd[0],n);for(var t=1;t<nd.length;t++){var r=nd[t];r.blockedOn===n&&(r.blockedOn=null)}}for(fi!==null&&Ru(fi,n),pi!==null&&Ru(pi,n),mi!==null&&Ru(mi,n),Ic.forEach(e),Sc.forEach(e),t=0;t<Js.length;t++)r=Js[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Js.length&&(t=Js[0],t.blockedOn===null);)YS(t),t.blockedOn===null&&Js.shift()}var Qa=Ts.ReactCurrentBatchConfig,_f=!0;function qj(n,e,t,r){var s=Ue,i=Qa.transition;Qa.transition=null;try{Ue=1,gv(n,e,t,r)}finally{Ue=s,Qa.transition=i}}function Wj(n,e,t,r){var s=Ue,i=Qa.transition;Qa.transition=null;try{Ue=4,gv(n,e,t,r)}finally{Ue=s,Qa.transition=i}}function gv(n,e,t,r){if(_f){var s=dy(n,e,t,r);if(s===null)lg(n,e,r,vf,t),jE(n,r);else if(Bj(s,n,e,t,r))r.stopPropagation();else if(jE(n,r),e&4&&-1<$j.indexOf(n)){for(;s!==null;){var i=ph(s);if(i!==null&&HS(i),i=dy(n,e,t,r),i===null&&lg(n,e,r,vf,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else lg(n,e,r,null,t)}}var vf=null;function dy(n,e,t,r){if(vf=null,n=dv(r),n=_o(n),n!==null)if(e=na(n),e===null)n=null;else if(t=e.tag,t===13){if(n=FS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return vf=n,null}function XS(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nj()){case fv:return 1;case zS:return 4;case gf:case Oj:return 16;case qS:return 536870912;default:return 16}default:return 16}}var ui=null,yv=null,Dd=null;function ZS(){if(Dd)return Dd;var n,e=yv,t=e.length,r,s="value"in ui?ui.value:ui.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return Dd=s.slice(n,1<r?1-r:void 0)}function Vd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function rd(){return!0}function VE(){return!1}function Bn(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:VE,this.isPropagationStopped=VE,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_v=Bn(Jl),fh=at({},Jl,{view:0,detail:0}),Kj=Bn(fh),Zm,eg,Pu,Cp=at({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pu&&(Pu&&n.type==="mousemove"?(Zm=n.screenX-Pu.screenX,eg=n.screenY-Pu.screenY):eg=Zm=0,Pu=n),Zm)},movementY:function(n){return"movementY"in n?n.movementY:eg}}),LE=Bn(Cp),Hj=at({},Cp,{dataTransfer:0}),Gj=Bn(Hj),Jj=at({},fh,{relatedTarget:0}),tg=Bn(Jj),Qj=at({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),Yj=Bn(Qj),Xj=at({},Jl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zj=Bn(Xj),e2=at({},Jl,{data:0}),ME=Bn(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s2(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=r2[n])?!!e[n]:!1}function vv(){return s2}var i2=at({},fh,{key:function(n){if(n.key){var e=t2[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?n2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(n){return n.type==="keypress"?Vd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),o2=Bn(i2),a2=at({},Cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FE=Bn(a2),l2=at({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),u2=Bn(l2),c2=at({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),h2=Bn(c2),d2=at({},Cp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),f2=Bn(d2),p2=[9,13,27,32],wv=fs&&"CompositionEvent"in window,rc=null;fs&&"documentMode"in document&&(rc=document.documentMode);var m2=fs&&"TextEvent"in window&&!rc,eA=fs&&(!wv||rc&&8<rc&&11>=rc),UE=" ",$E=!1;function tA(n,e){switch(n){case"keyup":return p2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var La=!1;function g2(n,e){switch(n){case"compositionend":return nA(e);case"keypress":return e.which!==32?null:($E=!0,UE);case"textInput":return n=e.data,n===UE&&$E?null:n;default:return null}}function y2(n,e){if(La)return n==="compositionend"||!wv&&tA(n,e)?(n=ZS(),Dd=yv=ui=null,La=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eA&&e.locale!=="ko"?null:e.data;default:return null}}var _2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_2[n.type]:e==="textarea"}function rA(n,e,t,r){jS(r),e=wf(e,"onChange"),0<e.length&&(t=new _v("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var sc=null,kc=null;function v2(n){pA(n,0)}function Np(n){var e=Ua(n);if(AS(e))return n}function w2(n,e){if(n==="change")return e}var sA=!1;if(fs){var ng;if(fs){var rg="oninput"in document;if(!rg){var zE=document.createElement("div");zE.setAttribute("oninput","return;"),rg=typeof zE.oninput=="function"}ng=rg}else ng=!1;sA=ng&&(!document.documentMode||9<document.documentMode)}function qE(){sc&&(sc.detachEvent("onpropertychange",iA),kc=sc=null)}function iA(n){if(n.propertyName==="value"&&Np(kc)){var e=[];rA(e,kc,n,dv(n)),MS(v2,e)}}function E2(n,e,t){n==="focusin"?(qE(),sc=e,kc=t,sc.attachEvent("onpropertychange",iA)):n==="focusout"&&qE()}function b2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Np(kc)}function x2(n,e){if(n==="click")return Np(e)}function T2(n,e){if(n==="input"||n==="change")return Np(e)}function I2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var br=typeof Object.is=="function"?Object.is:I2;function Rc(n,e){if(br(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!Gg.call(e,s)||!br(n[s],e[s]))return!1}return!0}function WE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function KE(n,e){var t=WE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=WE(t)}}function oA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?oA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function aA(){for(var n=window,e=ff();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ff(n.document)}return e}function Ev(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function S2(n){var e=aA(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&oA(t.ownerDocument.documentElement,t)){if(r!==null&&Ev(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=KE(t,i);var o=KE(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var A2=fs&&"documentMode"in document&&11>=document.documentMode,Ma=null,fy=null,ic=null,py=!1;function HE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;py||Ma==null||Ma!==ff(r)||(r=Ma,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Rc(ic,r)||(ic=r,r=wf(fy,"onSelect"),0<r.length&&(e=new _v("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ma)))}function sd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Fa={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},sg={},lA={};fs&&(lA=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Op(n){if(sg[n])return sg[n];if(!Fa[n])return n;var e=Fa[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in lA)return sg[n]=e[t];return n}var uA=Op("animationend"),cA=Op("animationiteration"),hA=Op("animationstart"),dA=Op("transitionend"),fA=new Map,GE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(n,e){fA.set(n,e),ta(e,[n])}for(var ig=0;ig<GE.length;ig++){var og=GE[ig],k2=og.toLowerCase(),R2=og[0].toUpperCase()+og.slice(1);Li(k2,"on"+R2)}Li(uA,"onAnimationEnd");Li(cA,"onAnimationIteration");Li(hA,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(dA,"onTransitionEnd");_l("onMouseEnter",["mouseout","mouseover"]);_l("onMouseLeave",["mouseout","mouseover"]);_l("onPointerEnter",["pointerout","pointerover"]);_l("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P2=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function JE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,kj(r,e,void 0,n),n.currentTarget=null}function pA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;JE(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;JE(s,a,u),i=l}}}if(mf)throw n=uy,mf=!1,uy=null,n}function Ye(n,e){var t=e[vy];t===void 0&&(t=e[vy]=new Set);var r=n+"__bubble";t.has(r)||(mA(e,n,2,!1),t.add(r))}function ag(n,e,t){var r=0;e&&(r|=4),mA(t,n,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Pc(n){if(!n[id]){n[id]=!0,bS.forEach(function(t){t!=="selectionchange"&&(P2.has(t)||ag(t,!1,n),ag(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[id]||(e[id]=!0,ag("selectionchange",!1,e))}}function mA(n,e,t,r){switch(XS(e)){case 1:var s=qj;break;case 4:s=Wj;break;default:s=gv}t=s.bind(null,e,t,n),s=void 0,!ly||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function lg(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_o(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}MS(function(){var u=i,h=dv(t),d=[];e:{var p=fA.get(n);if(p!==void 0){var g=_v,w=n;switch(n){case"keypress":if(Vd(t)===0)break e;case"keydown":case"keyup":g=o2;break;case"focusin":w="focus",g=tg;break;case"focusout":w="blur",g=tg;break;case"beforeblur":case"afterblur":g=tg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=LE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Gj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=u2;break;case uA:case cA:case hA:g=Yj;break;case dA:g=h2;break;case"scroll":g=Kj;break;case"wheel":g=f2;break;case"copy":case"cut":case"paste":g=Zj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=FE}var E=(e&4)!==0,T=!E&&n==="scroll",b=E?p!==null?p+"Capture":null:p;E=[];for(var _=u,v;_!==null;){v=_;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,b!==null&&(N=Tc(_,b),N!=null&&E.push(Cc(_,N,v)))),T)break;_=_.return}0<E.length&&(p=new g(p,w,null,t,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==oy&&(w=t.relatedTarget||t.fromElement)&&(_o(w)||w[ps]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=t.relatedTarget||t.toElement,g=u,w=w?_o(w):null,w!==null&&(T=na(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(E=LE,N="onMouseLeave",b="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(E=FE,N="onPointerLeave",b="onPointerEnter",_="pointer"),T=g==null?p:Ua(g),v=w==null?p:Ua(w),p=new E(N,_+"leave",g,t,h),p.target=T,p.relatedTarget=v,N=null,_o(h)===u&&(E=new E(b,_+"enter",w,t,h),E.target=v,E.relatedTarget=T,N=E),T=N,g&&w)t:{for(E=g,b=w,_=0,v=E;v;v=pa(v))_++;for(v=0,N=b;N;N=pa(N))v++;for(;0<_-v;)E=pa(E),_--;for(;0<v-_;)b=pa(b),v--;for(;_--;){if(E===b||b!==null&&E===b.alternate)break t;E=pa(E),b=pa(b)}E=null}else E=null;g!==null&&QE(d,p,g,E,!1),w!==null&&T!==null&&QE(d,T,w,E,!0)}}e:{if(p=u?Ua(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=w2;else if(BE(p))if(sA)D=T2;else{D=b2;var F=E2}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=x2);if(D&&(D=D(n,u))){rA(d,D,t,h);break e}F&&F(n,p,u),n==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&ty(p,"number",p.value)}switch(F=u?Ua(u):window,n){case"focusin":(BE(F)||F.contentEditable==="true")&&(Ma=F,fy=u,ic=null);break;case"focusout":ic=fy=Ma=null;break;case"mousedown":py=!0;break;case"contextmenu":case"mouseup":case"dragend":py=!1,HE(d,t,h);break;case"selectionchange":if(A2)break;case"keydown":case"keyup":HE(d,t,h)}var S;if(wv)e:{switch(n){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else La?tA(n,t)&&(x="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(x="onCompositionStart");x&&(eA&&t.locale!=="ko"&&(La||x!=="onCompositionStart"?x==="onCompositionEnd"&&La&&(S=ZS()):(ui=h,yv="value"in ui?ui.value:ui.textContent,La=!0)),F=wf(u,x),0<F.length&&(x=new ME(x,n,null,t,h),d.push({event:x,listeners:F}),S?x.data=S:(S=nA(t),S!==null&&(x.data=S)))),(S=m2?g2(n,t):y2(n,t))&&(u=wf(u,"onBeforeInput"),0<u.length&&(h=new ME("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=S))}pA(d,e)})}function Cc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wf(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tc(n,t),i!=null&&r.unshift(Cc(n,i,s)),i=Tc(n,e),i!=null&&r.push(Cc(n,i,s))),n=n.return}return r}function pa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function QE(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Tc(t,i),l!=null&&o.unshift(Cc(t,l,a))):s||(l=Tc(t,i),l!=null&&o.push(Cc(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var C2=/\r\n?/g,N2=/\u0000|\uFFFD/g;function YE(n){return(typeof n=="string"?n:""+n).replace(C2,`
`).replace(N2,"")}function od(n,e,t){if(e=YE(e),YE(n)!==e&&t)throw Error(W(425))}function Ef(){}var my=null,gy=null;function yy(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _y=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,j2=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(n){return XE.resolve(null).then(n).catch(D2)}:_y;function D2(n){setTimeout(function(){throw n})}function ug(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Ac(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Ac(e)}function gi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ZE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Ql,Nc="__reactProps$"+Ql,ps="__reactContainer$"+Ql,vy="__reactEvents$"+Ql,V2="__reactListeners$"+Ql,L2="__reactHandles$"+Ql;function _o(n){var e=n[Fr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ps]||t[Fr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ZE(n);n!==null;){if(t=n[Fr])return t;n=ZE(n)}return e}n=t,t=n.parentNode}return null}function ph(n){return n=n[Fr]||n[ps],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ua(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function jp(n){return n[Nc]||null}var wy=[],$a=-1;function Mi(n){return{current:n}}function Xe(n){0>$a||(n.current=wy[$a],wy[$a]=null,$a--)}function Ge(n,e){$a++,wy[$a]=n.current,n.current=e}var Ri={},nn=Mi(Ri),In=Mi(!1),Lo=Ri;function vl(n,e){var t=n.type.contextTypes;if(!t)return Ri;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(n){return n=n.childContextTypes,n!=null}function bf(){Xe(In),Xe(nn)}function eb(n,e,t){if(nn.current!==Ri)throw Error(W(168));Ge(nn,e),Ge(In,t)}function gA(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,Ej(n)||"Unknown",s));return at({},t,r)}function xf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ri,Lo=nn.current,Ge(nn,n),Ge(In,In.current),!0}function tb(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=gA(n,e,Lo),r.__reactInternalMemoizedMergedChildContext=n,Xe(In),Xe(nn),Ge(nn,n)):Xe(In),Ge(In,t)}var ns=null,Dp=!1,cg=!1;function yA(n){ns===null?ns=[n]:ns.push(n)}function M2(n){Dp=!0,yA(n)}function Fi(){if(!cg&&ns!==null){cg=!0;var n=0,e=Ue;try{var t=ns;for(Ue=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ns=null,Dp=!1}catch(s){throw ns!==null&&(ns=ns.slice(n+1)),BS(fv,Fi),s}finally{Ue=e,cg=!1}}return null}var Ba=[],za=0,Tf=null,If=0,qn=[],Wn=0,Mo=null,is=1,os="";function ro(n,e){Ba[za++]=If,Ba[za++]=Tf,Tf=n,If=e}function _A(n,e,t){qn[Wn++]=is,qn[Wn++]=os,qn[Wn++]=Mo,Mo=n;var r=is;n=os;var s=32-vr(r)-1;r&=~(1<<s),t+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,is=1<<32-vr(e)+s|t<<s|r,os=i+n}else is=1<<i|t<<s|r,os=n}function bv(n){n.return!==null&&(ro(n,1),_A(n,1,0))}function xv(n){for(;n===Tf;)Tf=Ba[--za],Ba[za]=null,If=Ba[--za],Ba[za]=null;for(;n===Mo;)Mo=qn[--Wn],qn[Wn]=null,os=qn[--Wn],qn[Wn]=null,is=qn[--Wn],qn[Wn]=null}var Vn=null,jn=null,tt=!1,mr=null;function vA(n,e){var t=Hn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function nb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Vn=n,jn=gi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Vn=n,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Mo!==null?{id:is,overflow:os}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Vn=n,jn=null,!0):!1;default:return!1}}function Ey(n){return(n.mode&1)!==0&&(n.flags&128)===0}function by(n){if(tt){var e=jn;if(e){var t=e;if(!nb(n,e)){if(Ey(n))throw Error(W(418));e=gi(t.nextSibling);var r=Vn;e&&nb(n,e)?vA(r,t):(n.flags=n.flags&-4097|2,tt=!1,Vn=n)}}else{if(Ey(n))throw Error(W(418));n.flags=n.flags&-4097|2,tt=!1,Vn=n}}}function rb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Vn=n}function ad(n){if(n!==Vn)return!1;if(!tt)return rb(n),tt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!yy(n.type,n.memoizedProps)),e&&(e=jn)){if(Ey(n))throw wA(),Error(W(418));for(;e;)vA(n,e),e=gi(e.nextSibling)}if(rb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){jn=gi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}jn=null}}else jn=Vn?gi(n.stateNode.nextSibling):null;return!0}function wA(){for(var n=jn;n;)n=gi(n.nextSibling)}function wl(){jn=Vn=null,tt=!1}function Tv(n){mr===null?mr=[n]:mr.push(n)}var F2=Ts.ReactCurrentBatchConfig;function Cu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function ld(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function sb(n){var e=n._init;return e(n._payload)}function EA(n){function e(b,_){if(n){var v=b.deletions;v===null?(b.deletions=[_],b.flags|=16):v.push(_)}}function t(b,_){if(!n)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=wi(b,_),b.index=0,b.sibling=null,b}function i(b,_,v){return b.index=v,n?(v=b.alternate,v!==null?(v=v.index,v<_?(b.flags|=2,_):v):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return n&&b.alternate===null&&(b.flags|=2),b}function a(b,_,v,N){return _===null||_.tag!==6?(_=yg(v,b.mode,N),_.return=b,_):(_=s(_,v),_.return=b,_)}function l(b,_,v,N){var D=v.type;return D===Va?h(b,_,v.props.children,N,v.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ks&&sb(D)===_.type)?(N=s(_,v.props),N.ref=Cu(b,_,v),N.return=b,N):(N=zd(v.type,v.key,v.props,null,b.mode,N),N.ref=Cu(b,_,v),N.return=b,N)}function u(b,_,v,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=_g(v,b.mode,N),_.return=b,_):(_=s(_,v.children||[]),_.return=b,_)}function h(b,_,v,N,D){return _===null||_.tag!==7?(_=No(v,b.mode,N,D),_.return=b,_):(_=s(_,v),_.return=b,_)}function d(b,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=yg(""+_,b.mode,v),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yh:return v=zd(_.type,_.key,_.props,null,b.mode,v),v.ref=Cu(b,null,_),v.return=b,v;case Da:return _=_g(_,b.mode,v),_.return=b,_;case Ks:var N=_._init;return d(b,N(_._payload),v)}if(Bu(_)||Su(_))return _=No(_,b.mode,v,null),_.return=b,_;ld(b,_)}return null}function p(b,_,v,N){var D=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:a(b,_,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yh:return v.key===D?l(b,_,v,N):null;case Da:return v.key===D?u(b,_,v,N):null;case Ks:return D=v._init,p(b,_,D(v._payload),N)}if(Bu(v)||Su(v))return D!==null?null:h(b,_,v,N,null);ld(b,v)}return null}function g(b,_,v,N,D){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(v)||null,a(_,b,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Yh:return b=b.get(N.key===null?v:N.key)||null,l(_,b,N,D);case Da:return b=b.get(N.key===null?v:N.key)||null,u(_,b,N,D);case Ks:var F=N._init;return g(b,_,v,F(N._payload),D)}if(Bu(N)||Su(N))return b=b.get(v)||null,h(_,b,N,D,null);ld(_,N)}return null}function w(b,_,v,N){for(var D=null,F=null,S=_,x=_=0,A=null;S!==null&&x<v.length;x++){S.index>x?(A=S,S=null):A=S.sibling;var R=p(b,S,v[x],N);if(R===null){S===null&&(S=A);break}n&&S&&R.alternate===null&&e(b,S),_=i(R,_,x),F===null?D=R:F.sibling=R,F=R,S=A}if(x===v.length)return t(b,S),tt&&ro(b,x),D;if(S===null){for(;x<v.length;x++)S=d(b,v[x],N),S!==null&&(_=i(S,_,x),F===null?D=S:F.sibling=S,F=S);return tt&&ro(b,x),D}for(S=r(b,S);x<v.length;x++)A=g(S,b,x,v[x],N),A!==null&&(n&&A.alternate!==null&&S.delete(A.key===null?x:A.key),_=i(A,_,x),F===null?D=A:F.sibling=A,F=A);return n&&S.forEach(function(C){return e(b,C)}),tt&&ro(b,x),D}function E(b,_,v,N){var D=Su(v);if(typeof D!="function")throw Error(W(150));if(v=D.call(v),v==null)throw Error(W(151));for(var F=D=null,S=_,x=_=0,A=null,R=v.next();S!==null&&!R.done;x++,R=v.next()){S.index>x?(A=S,S=null):A=S.sibling;var C=p(b,S,R.value,N);if(C===null){S===null&&(S=A);break}n&&S&&C.alternate===null&&e(b,S),_=i(C,_,x),F===null?D=C:F.sibling=C,F=C,S=A}if(R.done)return t(b,S),tt&&ro(b,x),D;if(S===null){for(;!R.done;x++,R=v.next())R=d(b,R.value,N),R!==null&&(_=i(R,_,x),F===null?D=R:F.sibling=R,F=R);return tt&&ro(b,x),D}for(S=r(b,S);!R.done;x++,R=v.next())R=g(S,b,x,R.value,N),R!==null&&(n&&R.alternate!==null&&S.delete(R.key===null?x:R.key),_=i(R,_,x),F===null?D=R:F.sibling=R,F=R);return n&&S.forEach(function(O){return e(b,O)}),tt&&ro(b,x),D}function T(b,_,v,N){if(typeof v=="object"&&v!==null&&v.type===Va&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Yh:e:{for(var D=v.key,F=_;F!==null;){if(F.key===D){if(D=v.type,D===Va){if(F.tag===7){t(b,F.sibling),_=s(F,v.props.children),_.return=b,b=_;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ks&&sb(D)===F.type){t(b,F.sibling),_=s(F,v.props),_.ref=Cu(b,F,v),_.return=b,b=_;break e}t(b,F);break}else e(b,F);F=F.sibling}v.type===Va?(_=No(v.props.children,b.mode,N,v.key),_.return=b,b=_):(N=zd(v.type,v.key,v.props,null,b.mode,N),N.ref=Cu(b,_,v),N.return=b,b=N)}return o(b);case Da:e:{for(F=v.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){t(b,_.sibling),_=s(_,v.children||[]),_.return=b,b=_;break e}else{t(b,_);break}else e(b,_);_=_.sibling}_=_g(v,b.mode,N),_.return=b,b=_}return o(b);case Ks:return F=v._init,T(b,_,F(v._payload),N)}if(Bu(v))return w(b,_,v,N);if(Su(v))return E(b,_,v,N);ld(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(t(b,_.sibling),_=s(_,v),_.return=b,b=_):(t(b,_),_=yg(v,b.mode,N),_.return=b,b=_),o(b)):t(b,_)}return T}var El=EA(!0),bA=EA(!1),Sf=Mi(null),Af=null,qa=null,Iv=null;function Sv(){Iv=qa=Af=null}function Av(n){var e=Sf.current;Xe(Sf),n._currentValue=e}function xy(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ya(n,e){Af=n,Iv=qa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(xn=!0),n.firstContext=null)}function Zn(n){var e=n._currentValue;if(Iv!==n)if(n={context:n,memoizedValue:e,next:null},qa===null){if(Af===null)throw Error(W(308));qa=n,Af.dependencies={lanes:0,firstContext:n}}else qa=qa.next=n;return e}var vo=null;function kv(n){vo===null?vo=[n]:vo.push(n)}function xA(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,kv(e)):(t.next=s.next,s.next=t),e.interleaved=t,ms(n,r)}function ms(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Hs=!1;function Rv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function cs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ms(n,t)}return s=r.interleaved,s===null?(e.next=e,kv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ms(n,t)}function Ld(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,pv(n,t)}}function ib(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function kf(n,e,t,r){var s=n.updateQueue;Hs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=u=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=n,E=a;switch(p=e,g=t,E.tag){case 1:if(w=E.payload,typeof w=="function"){d=w.call(g,d,p);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,p=typeof w=="function"?w.call(g,d,p):w,p==null)break e;d=at({},d,p);break e;case 2:Hs=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Uo|=o,n.lanes=o,n.memoizedState=d}}function ob(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var mh={},qr=Mi(mh),Oc=Mi(mh),jc=Mi(mh);function wo(n){if(n===mh)throw Error(W(174));return n}function Pv(n,e){switch(Ge(jc,e),Ge(Oc,n),Ge(qr,mh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ry(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ry(e,n)}Xe(qr),Ge(qr,e)}function bl(){Xe(qr),Xe(Oc),Xe(jc)}function IA(n){wo(jc.current);var e=wo(qr.current),t=ry(e,n.type);e!==t&&(Ge(Oc,n),Ge(qr,t))}function Cv(n){Oc.current===n&&(Xe(qr),Xe(Oc))}var rt=Mi(0);function Rf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hg=[];function Nv(){for(var n=0;n<hg.length;n++)hg[n]._workInProgressVersionPrimary=null;hg.length=0}var Md=Ts.ReactCurrentDispatcher,dg=Ts.ReactCurrentBatchConfig,Fo=0,it=null,kt=null,Mt=null,Pf=!1,oc=!1,Dc=0,U2=0;function Gt(){throw Error(W(321))}function Ov(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!br(n[t],e[t]))return!1;return!0}function jv(n,e,t,r,s,i){if(Fo=i,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Md.current=n===null||n.memoizedState===null?q2:W2,n=t(r,s),oc){i=0;do{if(oc=!1,Dc=0,25<=i)throw Error(W(301));i+=1,Mt=kt=null,e.updateQueue=null,Md.current=K2,n=t(r,s)}while(oc)}if(Md.current=Cf,e=kt!==null&&kt.next!==null,Fo=0,Mt=kt=it=null,Pf=!1,e)throw Error(W(300));return n}function Dv(){var n=Dc!==0;return Dc=0,n}function Nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?it.memoizedState=Mt=n:Mt=Mt.next=n,Mt}function er(){if(kt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=kt.next;var e=Mt===null?it.memoizedState:Mt.next;if(e!==null)Mt=e,kt=n;else{if(n===null)throw Error(W(310));kt=n,n={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Mt===null?it.memoizedState=Mt=n:Mt=Mt.next=n}return Mt}function Vc(n,e){return typeof e=="function"?e(n):e}function fg(n){var e=er(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=kt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Fo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,it.lanes|=h,Uo|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,br(r,e.memoizedState)||(xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,it.lanes|=i,Uo|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function pg(n){var e=er(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);br(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function SA(){}function AA(n,e){var t=it,r=er(),s=e(),i=!br(r.memoizedState,s);if(i&&(r.memoizedState=s,xn=!0),r=r.queue,Vv(PA.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Mt!==null&&Mt.memoizedState.tag&1){if(t.flags|=2048,Lc(9,RA.bind(null,t,r,s,e),void 0,null),Ft===null)throw Error(W(349));Fo&30||kA(t,e,s)}return s}function kA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function RA(n,e,t,r){e.value=t,e.getSnapshot=r,CA(e)&&NA(n)}function PA(n,e,t){return t(function(){CA(e)&&NA(n)})}function CA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!br(n,t)}catch{return!0}}function NA(n){var e=ms(n,1);e!==null&&wr(e,n,1,-1)}function ab(n){var e=Nr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:n},e.queue=n,n=n.dispatch=z2.bind(null,it,n),[e.memoizedState,n]}function Lc(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function OA(){return er().memoizedState}function Fd(n,e,t,r){var s=Nr();it.flags|=n,s.memoizedState=Lc(1|e,t,void 0,r===void 0?null:r)}function Vp(n,e,t,r){var s=er();r=r===void 0?null:r;var i=void 0;if(kt!==null){var o=kt.memoizedState;if(i=o.destroy,r!==null&&Ov(r,o.deps)){s.memoizedState=Lc(e,t,i,r);return}}it.flags|=n,s.memoizedState=Lc(1|e,t,i,r)}function lb(n,e){return Fd(8390656,8,n,e)}function Vv(n,e){return Vp(2048,8,n,e)}function jA(n,e){return Vp(4,2,n,e)}function DA(n,e){return Vp(4,4,n,e)}function VA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function LA(n,e,t){return t=t!=null?t.concat([n]):null,Vp(4,4,VA.bind(null,e,n),t)}function Lv(){}function MA(n,e){var t=er();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ov(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function FA(n,e){var t=er();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Ov(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function UA(n,e,t){return Fo&21?(br(t,e)||(t=WS(),it.lanes|=t,Uo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,xn=!0),n.memoizedState=t)}function $2(n,e){var t=Ue;Ue=t!==0&&4>t?t:4,n(!0);var r=dg.transition;dg.transition={};try{n(!1),e()}finally{Ue=t,dg.transition=r}}function $A(){return er().memoizedState}function B2(n,e,t){var r=vi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},BA(n))zA(e,t);else if(t=xA(n,e,t,r),t!==null){var s=cn();wr(t,n,r,s),qA(t,e,r)}}function z2(n,e,t){var r=vi(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(BA(n))zA(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,br(a,o)){var l=e.interleaved;l===null?(s.next=s,kv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=xA(n,e,s,r),t!==null&&(s=cn(),wr(t,n,r,s),qA(t,e,r))}}function BA(n){var e=n.alternate;return n===it||e!==null&&e===it}function zA(n,e){oc=Pf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function qA(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,pv(n,t)}}var Cf={readContext:Zn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},q2={readContext:Zn,useCallback:function(n,e){return Nr().memoizedState=[n,e===void 0?null:e],n},useContext:Zn,useEffect:lb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Fd(4194308,4,VA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Fd(4194308,4,n,e)},useInsertionEffect:function(n,e){return Fd(4,2,n,e)},useMemo:function(n,e){var t=Nr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Nr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=B2.bind(null,it,n),[r.memoizedState,n]},useRef:function(n){var e=Nr();return n={current:n},e.memoizedState=n},useState:ab,useDebugValue:Lv,useDeferredValue:function(n){return Nr().memoizedState=n},useTransition:function(){var n=ab(!1),e=n[0];return n=$2.bind(null,n[1]),Nr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=it,s=Nr();if(tt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),Ft===null)throw Error(W(349));Fo&30||kA(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,lb(PA.bind(null,r,i,n),[n]),r.flags|=2048,Lc(9,RA.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Nr(),e=Ft.identifierPrefix;if(tt){var t=os,r=is;t=(r&~(1<<32-vr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=U2++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},W2={readContext:Zn,useCallback:MA,useContext:Zn,useEffect:Vv,useImperativeHandle:LA,useInsertionEffect:jA,useLayoutEffect:DA,useMemo:FA,useReducer:fg,useRef:OA,useState:function(){return fg(Vc)},useDebugValue:Lv,useDeferredValue:function(n){var e=er();return UA(e,kt.memoizedState,n)},useTransition:function(){var n=fg(Vc)[0],e=er().memoizedState;return[n,e]},useMutableSource:SA,useSyncExternalStore:AA,useId:$A,unstable_isNewReconciler:!1},K2={readContext:Zn,useCallback:MA,useContext:Zn,useEffect:Vv,useImperativeHandle:LA,useInsertionEffect:jA,useLayoutEffect:DA,useMemo:FA,useReducer:pg,useRef:OA,useState:function(){return pg(Vc)},useDebugValue:Lv,useDeferredValue:function(n){var e=er();return kt===null?e.memoizedState=n:UA(e,kt.memoizedState,n)},useTransition:function(){var n=pg(Vc)[0],e=er().memoizedState;return[n,e]},useMutableSource:SA,useSyncExternalStore:AA,useId:$A,unstable_isNewReconciler:!1};function ar(n,e){if(n&&n.defaultProps){e=at({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Ty(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:at({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Lp={isMounted:function(n){return(n=n._reactInternals)?na(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=cn(),s=vi(n),i=cs(r,s);i.payload=e,t!=null&&(i.callback=t),e=yi(n,i,s),e!==null&&(wr(e,n,s,r),Ld(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=cn(),s=vi(n),i=cs(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=yi(n,i,s),e!==null&&(wr(e,n,s,r),Ld(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=cn(),r=vi(n),s=cs(t,r);s.tag=2,e!=null&&(s.callback=e),e=yi(n,s,r),e!==null&&(wr(e,n,r,t),Ld(e,n,r))}};function ub(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rc(t,r)||!Rc(s,i):!0}function WA(n,e,t){var r=!1,s=Ri,i=e.contextType;return typeof i=="object"&&i!==null?i=Zn(i):(s=Sn(e)?Lo:nn.current,r=e.contextTypes,i=(r=r!=null)?vl(n,s):Ri),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lp,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function cb(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Lp.enqueueReplaceState(e,e.state,null)}function Iy(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Rv(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zn(i):(i=Sn(e)?Lo:nn.current,s.context=vl(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ty(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Lp.enqueueReplaceState(s,s.state,null),kf(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function xl(n,e){try{var t="",r=e;do t+=wj(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function mg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Sy(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var H2=typeof WeakMap=="function"?WeakMap:Map;function KA(n,e,t){t=cs(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Of||(Of=!0,Vy=r),Sy(n,e)},t}function HA(n,e,t){t=cs(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){Sy(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Sy(n,e),typeof r!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hb(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new H2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=aD.bind(null,n,e,t),e.then(n,n))}function db(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function fb(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=cs(-1,1),e.tag=2,yi(t,e,1))),t.lanes|=1),n)}var G2=Ts.ReactCurrentOwner,xn=!1;function an(n,e,t,r){e.child=n===null?bA(e,null,t,r):El(e,n.child,t,r)}function pb(n,e,t,r,s){t=t.render;var i=e.ref;return Ya(e,s),r=jv(n,e,t,r,i,s),t=Dv(),n!==null&&!xn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,gs(n,e,s)):(tt&&t&&bv(e),e.flags|=1,an(n,e,r,s),e.child)}function mb(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Wv(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,GA(n,e,i,r,s)):(n=zd(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Rc,t(o,r)&&n.ref===e.ref)return gs(n,e,s)}return e.flags|=1,n=wi(i,r),n.ref=e.ref,n.return=e,e.child=n}function GA(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Rc(i,r)&&n.ref===e.ref)if(xn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(xn=!0);else return e.lanes=n.lanes,gs(n,e,s)}return Ay(n,e,t,r,s)}function JA(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Ka,Rn),Rn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ge(Ka,Rn),Rn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Ge(Ka,Rn),Rn|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Ge(Ka,Rn),Rn|=r;return an(n,e,s,t),e.child}function QA(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ay(n,e,t,r,s){var i=Sn(t)?Lo:nn.current;return i=vl(e,i),Ya(e,s),t=jv(n,e,t,r,i,s),r=Dv(),n!==null&&!xn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,gs(n,e,s)):(tt&&r&&bv(e),e.flags|=1,an(n,e,t,s),e.child)}function gb(n,e,t,r,s){if(Sn(t)){var i=!0;xf(e)}else i=!1;if(Ya(e,s),e.stateNode===null)Ud(n,e),WA(e,t,r),Iy(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Zn(u):(u=Sn(t)?Lo:nn.current,u=vl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&cb(e,o,r,u),Hs=!1;var p=e.memoizedState;o.state=p,kf(e,r,o,s),l=e.memoizedState,a!==r||p!==l||In.current||Hs?(typeof h=="function"&&(Ty(e,t,h,r),l=e.memoizedState),(a=Hs||ub(e,t,a,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TA(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ar(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zn(l):(l=Sn(t)?Lo:nn.current,l=vl(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&cb(e,o,r,l),Hs=!1,p=e.memoizedState,o.state=p,kf(e,r,o,s);var w=e.memoizedState;a!==d||p!==w||In.current||Hs?(typeof g=="function"&&(Ty(e,t,g,r),w=e.memoizedState),(u=Hs||ub(e,t,u,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return ky(n,e,t,r,i,s)}function ky(n,e,t,r,s,i){QA(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tb(e,t,!1),gs(n,e,i);r=e.stateNode,G2.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=El(e,n.child,null,i),e.child=El(e,null,a,i)):an(n,e,a,i),e.memoizedState=r.state,s&&tb(e,t,!0),e.child}function YA(n){var e=n.stateNode;e.pendingContext?eb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&eb(n,e.context,!1),Pv(n,e.containerInfo)}function yb(n,e,t,r,s){return wl(),Tv(s),e.flags|=256,an(n,e,t,r),e.child}var Ry={dehydrated:null,treeContext:null,retryLane:0};function Py(n){return{baseLanes:n,cachePool:null,transitions:null}}function XA(n,e,t){var r=e.pendingProps,s=rt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Ge(rt,s&1),n===null)return by(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Up(o,r,0,null),n=No(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Py(t),e.memoizedState=Ry,n):Mv(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return J2(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=wi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=wi(a,i):(i=No(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?Py(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=Ry,r}return i=n.child,n=i.sibling,r=wi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Mv(n,e){return e=Up({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ud(n,e,t,r){return r!==null&&Tv(r),El(e,n.child,null,t),n=Mv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function J2(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=mg(Error(W(422))),ud(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Up({mode:"visible",children:r.children},s,0,null),i=No(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&El(e,n.child,null,o),e.child.memoizedState=Py(o),e.memoizedState=Ry,i);if(!(e.mode&1))return ud(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=mg(i,r,void 0),ud(n,e,o,r)}if(a=(o&n.childLanes)!==0,xn||a){if(r=Ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ms(n,s),wr(r,n,s,-1))}return qv(),r=mg(Error(W(421))),ud(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=lD.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,jn=gi(s.nextSibling),Vn=e,tt=!0,mr=null,n!==null&&(qn[Wn++]=is,qn[Wn++]=os,qn[Wn++]=Mo,is=n.id,os=n.overflow,Mo=e),e=Mv(e,r.children),e.flags|=4096,e)}function _b(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),xy(n.return,e,t)}function gg(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function ZA(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(an(n,e,r.children,t),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_b(n,t,e);else if(n.tag===19)_b(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ge(rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Rf(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),gg(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Rf(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}gg(e,!0,t,null,i);break;case"together":gg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function gs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=wi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=wi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Q2(n,e,t){switch(e.tag){case 3:YA(e),wl();break;case 5:IA(e);break;case 1:Sn(e.type)&&xf(e);break;case 4:Pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ge(Sf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(rt,rt.current&1),e.flags|=128,null):t&e.child.childLanes?XA(n,e,t):(Ge(rt,rt.current&1),n=gs(n,e,t),n!==null?n.sibling:null);Ge(rt,rt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ZA(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ge(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,JA(n,e,t)}return gs(n,e,t)}var ek,Cy,tk,nk;ek=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Cy=function(){};tk=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,wo(qr.current);var i=null;switch(t){case"input":s=Zg(n,s),r=Zg(n,r),i=[];break;case"select":s=at({},s,{value:void 0}),r=at({},r,{value:void 0}),i=[];break;case"textarea":s=ny(n,s),r=ny(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ef)}sy(t,r);var o;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ye("scroll",n),i||a===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};nk=function(n,e,t,r){t!==r&&(e.flags|=4)};function Nu(n,e){if(!tt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Jt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Y2(n,e,t){var r=e.pendingProps;switch(xv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return Sn(e.type)&&bf(),Jt(e),null;case 3:return r=e.stateNode,bl(),Xe(In),Xe(nn),Nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ad(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(Fy(mr),mr=null))),Cy(n,e),Jt(e),null;case 5:Cv(e);var s=wo(jc.current);if(t=e.type,n!==null&&e.stateNode!=null)tk(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Jt(e),null}if(n=wo(qr.current),ad(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Fr]=e,r[Nc]=i,n=(e.mode&1)!==0,t){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(s=0;s<qu.length;s++)Ye(qu[s],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":AE(r,i),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",r);break;case"textarea":RE(r,i),Ye("invalid",r)}sy(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&od(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&od(r.textContent,a,n),s=["children",""+a]):bc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ye("scroll",r)}switch(t){case"input":Xh(r),kE(r,i,!0);break;case"textarea":Xh(r),PE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ef)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=PS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Fr]=e,n[Nc]=r,ek(n,e,!1,!1),e.stateNode=n;e:{switch(o=iy(t,r),t){case"dialog":Ye("cancel",n),Ye("close",n),s=r;break;case"iframe":case"object":case"embed":Ye("load",n),s=r;break;case"video":case"audio":for(s=0;s<qu.length;s++)Ye(qu[s],n);s=r;break;case"source":Ye("error",n),s=r;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),s=r;break;case"details":Ye("toggle",n),s=r;break;case"input":AE(n,r),s=Zg(n,r),Ye("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=at({},r,{value:void 0}),Ye("invalid",n);break;case"textarea":RE(n,r),s=ny(n,r),Ye("invalid",n);break;default:s=r}sy(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?OS(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CS(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&xc(n,l):typeof l=="number"&&xc(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ye("scroll",n):l!=null&&lv(n,i,l,o))}switch(t){case"input":Xh(n),kE(n,r,!1);break;case"textarea":Xh(n),PE(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ki(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Ha(n,!!r.multiple,i,!1):r.defaultValue!=null&&Ha(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ef)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(n&&e.stateNode!=null)nk(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=wo(jc.current),wo(qr.current),ad(e)){if(r=e.stateNode,t=e.memoizedProps,r[Fr]=e,(i=r.nodeValue!==t)&&(n=Vn,n!==null))switch(n.tag){case 3:od(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Fr]=e,e.stateNode=r}return Jt(e),null;case 13:if(Xe(rt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&jn!==null&&e.mode&1&&!(e.flags&128))wA(),wl(),e.flags|=98560,i=!1;else if(i=ad(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Fr]=e}else wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),i=!1}else mr!==null&&(Fy(mr),mr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||rt.current&1?Rt===0&&(Rt=3):qv())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return bl(),Cy(n,e),n===null&&Pc(e.stateNode.containerInfo),Jt(e),null;case 10:return Av(e.type._context),Jt(e),null;case 17:return Sn(e.type)&&bf(),Jt(e),null;case 19:if(Xe(rt),i=e.memoizedState,i===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Nu(i,!1);else{if(Rt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Rf(n),o!==null){for(e.flags|=128,Nu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ge(rt,rt.current&1|2),e.child}n=n.sibling}i.tail!==null&&pt()>Tl&&(e.flags|=128,r=!0,Nu(i,!1),e.lanes=4194304)}else{if(!r)if(n=Rf(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Nu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tt)return Jt(e),null}else 2*pt()-i.renderingStartTime>Tl&&t!==1073741824&&(e.flags|=128,r=!0,Nu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,t=rt.current,Ge(rt,r?t&1|2:t&1),e):(Jt(e),null);case 22:case 23:return zv(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rn&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function X2(n,e){switch(xv(e),e.tag){case 1:return Sn(e.type)&&bf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bl(),Xe(In),Xe(nn),Nv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(Xe(rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));wl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xe(rt),null;case 4:return bl(),null;case 10:return Av(e.type._context),null;case 22:case 23:return zv(),null;case 24:return null;default:return null}}var cd=!1,Zt=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,te=null;function Wa(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ht(n,e,r)}else t.current=null}function Ny(n,e,t){try{t()}catch(r){ht(n,e,r)}}var vb=!1;function eD(n,e){if(my=_f,n=aA(),Ev(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var g;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++u===s&&(a=o),p===i&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(gy={focusedElem:n,selectionRange:t},_f=!1,te=e;te!==null;)if(e=te,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,te=n;else for(;te!==null;){e=te;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,T=w.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?E:ar(e.type,E),T);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(N){ht(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}return w=vb,vb=!1,w}function ac(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ny(e,t,i)}s=s.next}while(s!==r)}}function Mp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Oy(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function rk(n){var e=n.alternate;e!==null&&(n.alternate=null,rk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fr],delete e[Nc],delete e[vy],delete e[V2],delete e[L2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sk(n){return n.tag===5||n.tag===3||n.tag===4}function wb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ef));else if(r!==4&&(n=n.child,n!==null))for(jy(n,e,t),n=n.sibling;n!==null;)jy(n,e,t),n=n.sibling}function Dy(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Dy(n,e,t),n=n.sibling;n!==null;)Dy(n,e,t),n=n.sibling}var Bt=null,dr=!1;function Us(n,e,t){for(t=t.child;t!==null;)ik(n,e,t),t=t.sibling}function ik(n,e,t){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Pp,t)}catch{}switch(t.tag){case 5:Zt||Wa(t,e);case 6:var r=Bt,s=dr;Bt=null,Us(n,e,t),Bt=r,dr=s,Bt!==null&&(dr?(n=Bt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Bt.removeChild(t.stateNode));break;case 18:Bt!==null&&(dr?(n=Bt,t=t.stateNode,n.nodeType===8?ug(n.parentNode,t):n.nodeType===1&&ug(n,t),Ac(n)):ug(Bt,t.stateNode));break;case 4:r=Bt,s=dr,Bt=t.stateNode.containerInfo,dr=!0,Us(n,e,t),Bt=r,dr=s;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ny(t,e,o),s=s.next}while(s!==r)}Us(n,e,t);break;case 1:if(!Zt&&(Wa(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ht(t,e,a)}Us(n,e,t);break;case 21:Us(n,e,t);break;case 22:t.mode&1?(Zt=(r=Zt)||t.memoizedState!==null,Us(n,e,t),Zt=r):Us(n,e,t);break;default:Us(n,e,t)}}function Eb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Z2),e.forEach(function(r){var s=uD.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function ir(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,dr=!1;break e;case 3:Bt=a.stateNode.containerInfo,dr=!0;break e;case 4:Bt=a.stateNode.containerInfo,dr=!0;break e}a=a.return}if(Bt===null)throw Error(W(160));ik(i,o,s),Bt=null,dr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ok(e,n),e=e.sibling}function ok(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ir(e,n),Pr(n),r&4){try{ac(3,n,n.return),Mp(3,n)}catch(E){ht(n,n.return,E)}try{ac(5,n,n.return)}catch(E){ht(n,n.return,E)}}break;case 1:ir(e,n),Pr(n),r&512&&t!==null&&Wa(t,t.return);break;case 5:if(ir(e,n),Pr(n),r&512&&t!==null&&Wa(t,t.return),n.flags&32){var s=n.stateNode;try{xc(s,"")}catch(E){ht(n,n.return,E)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kS(s,i),iy(a,o);var u=iy(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?OS(s,d):h==="dangerouslySetInnerHTML"?CS(s,d):h==="children"?xc(s,d):lv(s,h,d,u)}switch(a){case"input":ey(s,i);break;case"textarea":RS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ha(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ha(s,!!i.multiple,i.defaultValue,!0):Ha(s,!!i.multiple,i.multiple?[]:"",!1))}s[Nc]=i}catch(E){ht(n,n.return,E)}}break;case 6:if(ir(e,n),Pr(n),r&4){if(n.stateNode===null)throw Error(W(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(E){ht(n,n.return,E)}}break;case 3:if(ir(e,n),Pr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ac(e.containerInfo)}catch(E){ht(n,n.return,E)}break;case 4:ir(e,n),Pr(n);break;case 13:ir(e,n),Pr(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($v=pt())),r&4&&Eb(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Zt=(u=Zt)||h,ir(e,n),Zt=u):ir(e,n),Pr(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(te=n,h=n.child;h!==null;){for(d=te=h;te!==null;){switch(p=te,g=p.child,p.tag){case 0:case 11:case 14:case 15:ac(4,p,p.return);break;case 1:Wa(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(E){ht(r,t,E)}}break;case 5:Wa(p,p.return);break;case 22:if(p.memoizedState!==null){xb(d);continue}}g!==null?(g.return=p,te=g):xb(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NS("display",o))}catch(E){ht(n,n.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){ht(n,n.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ir(e,n),Pr(n),r&4&&Eb(n);break;case 21:break;default:ir(e,n),Pr(n)}}function Pr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(sk(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xc(s,""),r.flags&=-33);var i=wb(n);Dy(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wb(n);jy(n,a,o);break;default:throw Error(W(161))}}catch(l){ht(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function tD(n,e,t){te=n,ak(n)}function ak(n,e,t){for(var r=(n.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||cd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=cd;var u=Zt;if(cd=o,(Zt=l)&&!u)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?Tb(s):l!==null?(l.return=o,te=l):Tb(s);for(;i!==null;)te=i,ak(i),i=i.sibling;te=s,cd=a,Zt=u}bb(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):bb(n)}}function bb(n){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Mp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ar(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ob(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ob(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ac(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Zt||e.flags&512&&Oy(e)}catch(p){ht(e,e.return,p)}}if(e===n){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function xb(n){for(;te!==null;){var e=te;if(e===n){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function Tb(n){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mp(4,e)}catch(l){ht(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ht(e,s,l)}}var i=e.return;try{Oy(e)}catch(l){ht(e,i,l)}break;case 5:var o=e.return;try{Oy(e)}catch(l){ht(e,o,l)}}}catch(l){ht(e,e.return,l)}if(e===n){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var nD=Math.ceil,Nf=Ts.ReactCurrentDispatcher,Fv=Ts.ReactCurrentOwner,Qn=Ts.ReactCurrentBatchConfig,Pe=0,Ft=null,wt=null,Wt=0,Rn=0,Ka=Mi(0),Rt=0,Mc=null,Uo=0,Fp=0,Uv=0,lc=null,wn=null,$v=0,Tl=1/0,ts=null,Of=!1,Vy=null,_i=null,hd=!1,ci=null,jf=0,uc=0,Ly=null,$d=-1,Bd=0;function cn(){return Pe&6?pt():$d!==-1?$d:$d=pt()}function vi(n){return n.mode&1?Pe&2&&Wt!==0?Wt&-Wt:F2.transition!==null?(Bd===0&&(Bd=WS()),Bd):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:XS(n.type)),n):1}function wr(n,e,t,r){if(50<uc)throw uc=0,Ly=null,Error(W(185));dh(n,t,r),(!(Pe&2)||n!==Ft)&&(n===Ft&&(!(Pe&2)&&(Fp|=t),Rt===4&&Qs(n,Wt)),An(n,r),t===1&&Pe===0&&!(e.mode&1)&&(Tl=pt()+500,Dp&&Fi()))}function An(n,e){var t=n.callbackNode;Fj(n,e);var r=yf(n,n===Ft?Wt:0);if(r===0)t!==null&&OE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&OE(t),e===1)n.tag===0?M2(Ib.bind(null,n)):yA(Ib.bind(null,n)),j2(function(){!(Pe&6)&&Fi()}),t=null;else{switch(KS(r)){case 1:t=fv;break;case 4:t=zS;break;case 16:t=gf;break;case 536870912:t=qS;break;default:t=gf}t=mk(t,lk.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function lk(n,e){if($d=-1,Bd=0,Pe&6)throw Error(W(327));var t=n.callbackNode;if(Xa()&&n.callbackNode!==t)return null;var r=yf(n,n===Ft?Wt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Df(n,r);else{e=r;var s=Pe;Pe|=2;var i=ck();(Ft!==n||Wt!==e)&&(ts=null,Tl=pt()+500,Co(n,e));do try{iD();break}catch(a){uk(n,a)}while(!0);Sv(),Nf.current=i,Pe=s,wt!==null?e=0:(Ft=null,Wt=0,e=Rt)}if(e!==0){if(e===2&&(s=cy(n),s!==0&&(r=s,e=My(n,s))),e===1)throw t=Mc,Co(n,0),Qs(n,r),An(n,pt()),t;if(e===6)Qs(n,r);else{if(s=n.current.alternate,!(r&30)&&!rD(s)&&(e=Df(n,r),e===2&&(i=cy(n),i!==0&&(r=i,e=My(n,i))),e===1))throw t=Mc,Co(n,0),Qs(n,r),An(n,pt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:so(n,wn,ts);break;case 3:if(Qs(n,r),(r&130023424)===r&&(e=$v+500-pt(),10<e)){if(yf(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){cn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=_y(so.bind(null,n,wn,ts),e);break}so(n,wn,ts);break;case 4:if(Qs(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nD(r/1960))-r,10<r){n.timeoutHandle=_y(so.bind(null,n,wn,ts),r);break}so(n,wn,ts);break;case 5:so(n,wn,ts);break;default:throw Error(W(329))}}}return An(n,pt()),n.callbackNode===t?lk.bind(null,n):null}function My(n,e){var t=lc;return n.current.memoizedState.isDehydrated&&(Co(n,e).flags|=256),n=Df(n,e),n!==2&&(e=wn,wn=t,e!==null&&Fy(e)),n}function Fy(n){wn===null?wn=n:wn.push.apply(wn,n)}function rD(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!br(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(n,e){for(e&=~Uv,e&=~Fp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-vr(e),r=1<<t;n[t]=-1,e&=~r}}function Ib(n){if(Pe&6)throw Error(W(327));Xa();var e=yf(n,0);if(!(e&1))return An(n,pt()),null;var t=Df(n,e);if(n.tag!==0&&t===2){var r=cy(n);r!==0&&(e=r,t=My(n,r))}if(t===1)throw t=Mc,Co(n,0),Qs(n,e),An(n,pt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,so(n,wn,ts),An(n,pt()),null}function Bv(n,e){var t=Pe;Pe|=1;try{return n(e)}finally{Pe=t,Pe===0&&(Tl=pt()+500,Dp&&Fi())}}function $o(n){ci!==null&&ci.tag===0&&!(Pe&6)&&Xa();var e=Pe;Pe|=1;var t=Qn.transition,r=Ue;try{if(Qn.transition=null,Ue=1,n)return n()}finally{Ue=r,Qn.transition=t,Pe=e,!(Pe&6)&&Fi()}}function zv(){Rn=Ka.current,Xe(Ka)}function Co(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,O2(t)),wt!==null)for(t=wt.return;t!==null;){var r=t;switch(xv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bf();break;case 3:bl(),Xe(In),Xe(nn),Nv();break;case 5:Cv(r);break;case 4:bl();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Av(r.type._context);break;case 22:case 23:zv()}t=t.return}if(Ft=n,wt=n=wi(n.current,null),Wt=Rn=e,Rt=0,Mc=null,Uv=Fp=Uo=0,wn=lc=null,vo!==null){for(e=0;e<vo.length;e++)if(t=vo[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}vo=null}return n}function uk(n,e){do{var t=wt;try{if(Sv(),Md.current=Cf,Pf){for(var r=it.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pf=!1}if(Fo=0,Mt=kt=it=null,oc=!1,Dc=0,Fv.current=null,t===null||t.return===null){Rt=1,Mc=e,wt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=db(o);if(g!==null){g.flags&=-257,fb(g,o,a,i,e),g.mode&1&&hb(i,u,e),e=g,l=u;var w=e.updateQueue;if(w===null){var E=new Set;E.add(l),e.updateQueue=E}else w.add(l);break e}else{if(!(e&1)){hb(i,u,e),qv();break e}l=Error(W(426))}}else if(tt&&a.mode&1){var T=db(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),fb(T,o,a,i,e),Tv(xl(l,a));break e}}i=l=xl(l,a),Rt!==4&&(Rt=2),lc===null?lc=[i]:lc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=KA(i,l,e);ib(i,b);break e;case 1:a=l;var _=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_i===null||!_i.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=HA(i,a,e);ib(i,N);break e}}i=i.return}while(i!==null)}dk(t)}catch(D){e=D,wt===t&&t!==null&&(wt=t=t.return);continue}break}while(!0)}function ck(){var n=Nf.current;return Nf.current=Cf,n===null?Cf:n}function qv(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ft===null||!(Uo&268435455)&&!(Fp&268435455)||Qs(Ft,Wt)}function Df(n,e){var t=Pe;Pe|=2;var r=ck();(Ft!==n||Wt!==e)&&(ts=null,Co(n,e));do try{sD();break}catch(s){uk(n,s)}while(!0);if(Sv(),Pe=t,Nf.current=r,wt!==null)throw Error(W(261));return Ft=null,Wt=0,Rt}function sD(){for(;wt!==null;)hk(wt)}function iD(){for(;wt!==null&&!Pj();)hk(wt)}function hk(n){var e=pk(n.alternate,n,Rn);n.memoizedProps=n.pendingProps,e===null?dk(n):wt=e,Fv.current=null}function dk(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=X2(t,e),t!==null){t.flags&=32767,wt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rt=6,wt=null;return}}else if(t=Y2(t,e,Rn),t!==null){wt=t;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=n}while(e!==null);Rt===0&&(Rt=5)}function so(n,e,t){var r=Ue,s=Qn.transition;try{Qn.transition=null,Ue=1,oD(n,e,t,r)}finally{Qn.transition=s,Ue=r}return null}function oD(n,e,t,r){do Xa();while(ci!==null);if(Pe&6)throw Error(W(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(Uj(n,i),n===Ft&&(wt=Ft=null,Wt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||hd||(hd=!0,mk(gf,function(){return Xa(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Qn.transition,Qn.transition=null;var o=Ue;Ue=1;var a=Pe;Pe|=4,Fv.current=null,eD(n,t),ok(t,n),S2(gy),_f=!!my,gy=my=null,n.current=t,tD(t),Cj(),Pe=a,Ue=o,Qn.transition=i}else n.current=t;if(hd&&(hd=!1,ci=n,jf=s),i=n.pendingLanes,i===0&&(_i=null),jj(t.stateNode),An(n,pt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Of)throw Of=!1,n=Vy,Vy=null,n;return jf&1&&n.tag!==0&&Xa(),i=n.pendingLanes,i&1?n===Ly?uc++:(uc=0,Ly=n):uc=0,Fi(),null}function Xa(){if(ci!==null){var n=KS(jf),e=Qn.transition,t=Ue;try{if(Qn.transition=null,Ue=16>n?16:n,ci===null)var r=!1;else{if(n=ci,ci=null,jf=0,Pe&6)throw Error(W(331));var s=Pe;for(Pe|=4,te=n.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(te=u;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:ac(8,h,i)}var d=h.child;if(d!==null)d.return=h,te=d;else for(;te!==null;){h=te;var p=h.sibling,g=h.return;if(rk(h),h===u){te=null;break}if(p!==null){p.return=g,te=p;break}te=g}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,te=b;break e}te=i.return}}var _=n.current;for(te=_;te!==null;){o=te;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,te=v;else e:for(o=_;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mp(9,a)}}catch(D){ht(a,a.return,D)}if(a===o){te=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,te=N;break e}te=a.return}}if(Pe=s,Fi(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Pp,n)}catch{}r=!0}return r}finally{Ue=t,Qn.transition=e}}return!1}function Sb(n,e,t){e=xl(t,e),e=KA(n,e,1),n=yi(n,e,1),e=cn(),n!==null&&(dh(n,1,e),An(n,e))}function ht(n,e,t){if(n.tag===3)Sb(n,n,t);else for(;e!==null;){if(e.tag===3){Sb(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_i===null||!_i.has(r))){n=xl(t,n),n=HA(e,n,1),e=yi(e,n,1),n=cn(),e!==null&&(dh(e,1,n),An(e,n));break}}e=e.return}}function aD(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=cn(),n.pingedLanes|=n.suspendedLanes&t,Ft===n&&(Wt&t)===t&&(Rt===4||Rt===3&&(Wt&130023424)===Wt&&500>pt()-$v?Co(n,0):Uv|=t),An(n,e)}function fk(n,e){e===0&&(n.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var t=cn();n=ms(n,e),n!==null&&(dh(n,e,t),An(n,t))}function lD(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),fk(n,t)}function uD(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),fk(n,t)}var pk;pk=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||In.current)xn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return xn=!1,Q2(n,e,t);xn=!!(n.flags&131072)}else xn=!1,tt&&e.flags&1048576&&_A(e,If,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ud(n,e),n=e.pendingProps;var s=vl(e,nn.current);Ya(e,t),s=jv(null,e,r,n,s,t);var i=Dv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(i=!0,xf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Rv(e),s.updater=Lp,e.stateNode=s,s._reactInternals=e,Iy(e,r,n,t),e=ky(null,e,r,!0,i,t)):(e.tag=0,tt&&i&&bv(e),an(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ud(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=hD(r),n=ar(r,n),s){case 0:e=Ay(null,e,r,n,t);break e;case 1:e=gb(null,e,r,n,t);break e;case 11:e=pb(null,e,r,n,t);break e;case 14:e=mb(null,e,r,ar(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ar(r,s),Ay(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ar(r,s),gb(n,e,r,s,t);case 3:e:{if(YA(e),n===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,TA(n,e),kf(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xl(Error(W(423)),e),e=yb(n,e,r,t,s);break e}else if(r!==s){s=xl(Error(W(424)),e),e=yb(n,e,r,t,s);break e}else for(jn=gi(e.stateNode.containerInfo.firstChild),Vn=e,tt=!0,mr=null,t=bA(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(wl(),r===s){e=gs(n,e,t);break e}an(n,e,r,t)}e=e.child}return e;case 5:return IA(e),n===null&&by(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,yy(r,s)?o=null:i!==null&&yy(r,i)&&(e.flags|=32),QA(n,e),an(n,e,o,t),e.child;case 6:return n===null&&by(e),null;case 13:return XA(n,e,t);case 4:return Pv(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=El(e,null,r,t):an(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ar(r,s),pb(n,e,r,s,t);case 7:return an(n,e,e.pendingProps,t),e.child;case 8:return an(n,e,e.pendingProps.children,t),e.child;case 12:return an(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ge(Sf,r._currentValue),r._currentValue=o,i!==null)if(br(i.value,o)){if(i.children===s.children&&!In.current){e=gs(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=cs(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),xy(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),xy(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}an(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ya(e,t),s=Zn(s),r=r(s),e.flags|=1,an(n,e,r,t),e.child;case 14:return r=e.type,s=ar(r,e.pendingProps),s=ar(r.type,s),mb(n,e,r,s,t);case 15:return GA(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ar(r,s),Ud(n,e),e.tag=1,Sn(r)?(n=!0,xf(e)):n=!1,Ya(e,t),WA(e,r,s),Iy(e,r,s,t),ky(null,e,r,!0,n,t);case 19:return ZA(n,e,t);case 22:return JA(n,e,t)}throw Error(W(156,e.tag))};function mk(n,e){return BS(n,e)}function cD(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,e,t,r){return new cD(n,e,t,r)}function Wv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hD(n){if(typeof n=="function")return Wv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cv)return 11;if(n===hv)return 14}return 2}function wi(n,e){var t=n.alternate;return t===null?(t=Hn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function zd(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Wv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Va:return No(t.children,s,i,e);case uv:o=8,s|=8;break;case Jg:return n=Hn(12,t,e,s|2),n.elementType=Jg,n.lanes=i,n;case Qg:return n=Hn(13,t,e,s),n.elementType=Qg,n.lanes=i,n;case Yg:return n=Hn(19,t,e,s),n.elementType=Yg,n.lanes=i,n;case IS:return Up(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xS:o=10;break e;case TS:o=9;break e;case cv:o=11;break e;case hv:o=14;break e;case Ks:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=Hn(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function No(n,e,t,r){return n=Hn(7,n,r,e),n.lanes=t,n}function Up(n,e,t,r){return n=Hn(22,n,r,e),n.elementType=IS,n.lanes=t,n.stateNode={isHidden:!1},n}function yg(n,e,t){return n=Hn(6,n,null,e),n.lanes=t,n}function _g(n,e,t){return e=Hn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function dD(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kv(n,e,t,r,s,i,o,a,l){return n=new dD(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Hn(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rv(i),n}function fD(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Da,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function gk(n){if(!n)return Ri;n=n._reactInternals;e:{if(na(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Sn(t))return gA(n,t,e)}return e}function yk(n,e,t,r,s,i,o,a,l){return n=Kv(t,r,!0,n,s,i,o,a,l),n.context=gk(null),t=n.current,r=cn(),s=vi(t),i=cs(r,s),i.callback=e??null,yi(t,i,s),n.current.lanes=s,dh(n,s,r),An(n,r),n}function $p(n,e,t,r){var s=e.current,i=cn(),o=vi(s);return t=gk(t),e.context===null?e.context=t:e.pendingContext=t,e=cs(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=yi(s,e,o),n!==null&&(wr(n,s,o,i),Ld(n,s,o)),o}function Vf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ab(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Hv(n,e){Ab(n,e),(n=n.alternate)&&Ab(n,e)}function pD(){return null}var _k=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gv(n){this._internalRoot=n}Bp.prototype.render=Gv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));$p(n,e,null,null)};Bp.prototype.unmount=Gv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$o(function(){$p(null,n,null,null)}),e[ps]=null}};function Bp(n){this._internalRoot=n}Bp.prototype.unstable_scheduleHydration=function(n){if(n){var e=JS();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Js.length&&e!==0&&e<Js[t].priority;t++);Js.splice(t,0,n),t===0&&YS(n)}};function Jv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kb(){}function mD(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Vf(o);i.call(u)}}var o=yk(e,r,n,0,null,!1,!1,"",kb);return n._reactRootContainer=o,n[ps]=o.current,Pc(n.nodeType===8?n.parentNode:n),$o(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Vf(l);a.call(u)}}var l=Kv(n,0,!1,null,null,!1,!1,"",kb);return n._reactRootContainer=l,n[ps]=l.current,Pc(n.nodeType===8?n.parentNode:n),$o(function(){$p(e,l,t,r)}),l}function qp(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Vf(o);a.call(l)}}$p(e,o,n,s)}else o=mD(t,e,n,s,r);return Vf(o)}HS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=zu(e.pendingLanes);t!==0&&(pv(e,t|1),An(e,pt()),!(Pe&6)&&(Tl=pt()+500,Fi()))}break;case 13:$o(function(){var r=ms(n,1);if(r!==null){var s=cn();wr(r,n,1,s)}}),Hv(n,1)}};mv=function(n){if(n.tag===13){var e=ms(n,134217728);if(e!==null){var t=cn();wr(e,n,134217728,t)}Hv(n,134217728)}};GS=function(n){if(n.tag===13){var e=vi(n),t=ms(n,e);if(t!==null){var r=cn();wr(t,n,e,r)}Hv(n,e)}};JS=function(){return Ue};QS=function(n,e){var t=Ue;try{return Ue=n,e()}finally{Ue=t}};ay=function(n,e,t){switch(e){case"input":if(ey(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=jp(r);if(!s)throw Error(W(90));AS(r),ey(r,s)}}}break;case"textarea":RS(n,t);break;case"select":e=t.value,e!=null&&Ha(n,!!t.multiple,e,!1)}};VS=Bv;LS=$o;var gD={usingClientEntryPoint:!1,Events:[ph,Ua,jp,jS,DS,Bv]},Ou={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yD={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=US(n),n===null?null:n.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||pD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{Pp=dd.inject(yD),zr=dd}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD;$n.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(e))throw Error(W(200));return fD(n,e,null,t)};$n.createRoot=function(n,e){if(!Jv(n))throw Error(W(299));var t=!1,r="",s=_k;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Kv(n,1,!1,null,null,t,!1,r,s),n[ps]=e.current,Pc(n.nodeType===8?n.parentNode:n),new Gv(e)};$n.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=US(e),n=n===null?null:n.stateNode,n};$n.flushSync=function(n){return $o(n)};$n.hydrate=function(n,e,t){if(!zp(e))throw Error(W(200));return qp(null,n,e,!0,t)};$n.hydrateRoot=function(n,e,t){if(!Jv(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=_k;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=yk(e,null,n,1,t??null,s,!1,i,o),n[ps]=e.current,Pc(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Bp(e)};$n.render=function(n,e,t){if(!zp(e))throw Error(W(200));return qp(null,n,e,!1,t)};$n.unmountComponentAtNode=function(n){if(!zp(n))throw Error(W(40));return n._reactRootContainer?($o(function(){qp(null,null,n,!1,function(){n._reactRootContainer=null,n[ps]=null})}),!0):!1};$n.unstable_batchedUpdates=Bv;$n.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!zp(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return qp(n,e,t,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function vk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vk)}catch(n){console.error(n)}}vk(),vS.exports=$n;var _D=vS.exports,Rb=_D;Hg.createRoot=Rb.createRoot,Hg.hydrateRoot=Rb.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pb="popstate";function vD(n={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Uy("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Fc(s)}return ED(e,t,null,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wD(){return Math.random().toString(36).substring(2,10)}function Cb(n,e){return{usr:n.state,key:n.key,idx:e}}function Uy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Yl(e):e,state:t,key:e&&e.key||r||wD()}}function Fc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Yl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function ED(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function d(){a="POP";let T=h(),b=T==null?null:T-u;u=T,l&&l({action:a,location:E.location,delta:b})}function p(T,b){a="PUSH";let _=Uy(E.location,T,b);u=h()+1;let v=Cb(_,u),N=E.createHref(_);try{o.pushState(v,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(N)}i&&l&&l({action:a,location:E.location,delta:1})}function g(T,b){a="REPLACE";let _=Uy(E.location,T,b);u=h();let v=Cb(_,u),N=E.createHref(_);o.replaceState(v,"",N),i&&l&&l({action:a,location:E.location,delta:0})}function w(T){return bD(T)}let E={get action(){return a},get location(){return n(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Pb,d),l=T,()=>{s.removeEventListener(Pb,d),l=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let b=w(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:g,go(T){return o.go(T)}};return E}function bD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ot(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Fc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function wk(n,e,t="/"){return xD(n,e,t,!1)}function xD(n,e,t,r){let s=typeof e=="string"?Yl(e):e,i=ys(s.pathname||"/",t);if(i==null)return null;let o=Ek(n);TD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=DD(i);a=OD(o[l],u,r)}return a}function Ek(n,e=[],t=[],r="",s=!1){let i=(o,a,l=s,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;ot(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let d=hs([r,h.relativePath]),p=t.concat(h);o.children&&o.children.length>0&&(ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Ek(o.children,e,p,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:CD(d,o.index),routesMeta:p})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of bk(o.path))i(o,a,!0,u)}),e}function bk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function TD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ND(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ID=/^:[\w-]+$/,SD=3,AD=2,kD=1,RD=10,PD=-2,Nb=n=>n==="*";function CD(n,e){let t=n.split("/"),r=t.length;return t.some(Nb)&&(r+=PD),e&&(r+=AD),t.filter(s=>!Nb(s)).reduce((s,i)=>s+(ID.test(i)?SD:i===""?kD:RD),r)}function ND(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function OD(n,e,t=!1){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!d&&u&&t&&!r[r.length-1].route.index&&(d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:hs([i,d.pathname]),pathnameBase:UD(hs([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=hs([i,d.pathnameBase]))}return o}function Lf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:h,isOptional:d},p)=>{if(h==="*"){let w=a[p]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[p];return d&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:n}}function jD(n,e=!1,t=!0){tr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ys(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var VD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LD=n=>VD.test(n);function MD(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Yl(n):n,i;if(t)if(LD(t))i=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),tr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?i=Ob(t.substring(1),"/"):i=Ob(t,e)}else i=e;return{pathname:i,search:$D(r),hash:BD(s)}}function Ob(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xk(n){let e=FD(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Tk(n,e,t,r=!1){let s;typeof n=="string"?s=Yl(n):(s={...n},ot(!s.pathname||!s.pathname.includes("?"),vg("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),vg("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),vg("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=MD(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var hs=n=>n.join("/").replace(/\/\/+/g,"/"),UD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$D=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function qD(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ik=["POST","PUT","PATCH","DELETE"];new Set(Ik);var WD=["GET",...Ik];new Set(WD);var Xl=j.createContext(null);Xl.displayName="DataRouter";var Wp=j.createContext(null);Wp.displayName="DataRouterState";j.createContext(!1);var Sk=j.createContext({isTransitioning:!1});Sk.displayName="ViewTransition";var KD=j.createContext(new Map);KD.displayName="Fetchers";var HD=j.createContext(null);HD.displayName="Await";var Tr=j.createContext(null);Tr.displayName="Navigation";var gh=j.createContext(null);gh.displayName="Location";var Ir=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var Qv=j.createContext(null);Qv.displayName="RouteError";function GD(n,{relative:e}={}){ot(yh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Tr),{hash:s,pathname:i,search:o}=_h(n,{relative:e}),a=i;return t!=="/"&&(a=i==="/"?t:hs([t,i])),r.createHref({pathname:a,search:o,hash:s})}function yh(){return j.useContext(gh)!=null}function Is(){return ot(yh(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(gh).location}var Ak="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kk(n){j.useContext(Tr).static||j.useLayoutEffect(n)}function Ui(){let{isDataRoute:n}=j.useContext(Ir);return n?cV():JD()}function JD(){ot(yh(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Xl),{basename:e,navigator:t}=j.useContext(Tr),{matches:r}=j.useContext(Ir),{pathname:s}=Is(),i=JSON.stringify(xk(r)),o=j.useRef(!1);return kk(()=>{o.current=!0}),j.useCallback((l,u={})=>{if(tr(o.current,Ak),!o.current)return;if(typeof l=="number"){t.go(l);return}let h=Tk(l,JSON.parse(i),s,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hs([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,i,s,n])}var QD=j.createContext(null);function YD(n){let e=j.useContext(Ir).outlet;return j.useMemo(()=>e&&j.createElement(QD.Provider,{value:n},e),[e,n])}function XD(){let{matches:n}=j.useContext(Ir),e=n[n.length-1];return e?e.params:{}}function _h(n,{relative:e}={}){let{matches:t}=j.useContext(Ir),{pathname:r}=Is(),s=JSON.stringify(xk(t));return j.useMemo(()=>Tk(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function ZD(n,e){return Rk(n,e)}function Rk(n,e,t,r,s){var _;ot(yh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext(Tr),{matches:o}=j.useContext(Ir),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",d=a&&a.route;{let v=d&&d.path||"";Pk(u,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let p=Is(),g;if(e){let v=typeof e=="string"?Yl(e):e;ot(h==="/"||((_=v.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=p;let w=g.pathname||"/",E=w;if(h!=="/"){let v=h.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(v.length).join("/")}let T=wk(n,{pathname:E});tr(d||T!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),tr(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=sV(T&&T.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:hs([h,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:hs([h,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,t,r,s);return e&&b?j.createElement(gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},b):b}function eV(){let n=uV(),e=zD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,o)}var tV=j.createElement(eV,null),nV=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?j.createElement(Ir.Provider,{value:this.props.routeContext},j.createElement(Qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rV({routeContext:n,match:e,children:t}){let r=j.useContext(Xl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ir.Provider,{value:n},t)}function sV(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let h=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);ot(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,l=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:p,errors:g}=t,w=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||w){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let u=t&&r?(h,d)=>{var p,g;r(h,{location:t.location,params:((g=(p=t.matches)==null?void 0:p[0])==null?void 0:g.params)??{},unstable_pattern:qD(t.matches),errorInfo:d})}:void 0;return i.reduceRight((h,d,p)=>{let g,w=!1,E=null,T=null;t&&(g=o&&d.route.id?o[d.route.id]:void 0,E=d.route.errorElement||tV,a&&(l<0&&p===0?(Pk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):l===p&&(w=!0,T=d.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),_=()=>{let v;return g?v=E:w?v=T:d.route.Component?v=j.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,j.createElement(rV,{match:d,routeContext:{outlet:h,matches:b,isDataRoute:t!=null},children:v})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?j.createElement(nV,{location:t.location,revalidation:t.revalidation,component:E,error:g,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:u}):_()},null)}function Yv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iV(n){let e=j.useContext(Xl);return ot(e,Yv(n)),e}function oV(n){let e=j.useContext(Wp);return ot(e,Yv(n)),e}function aV(n){let e=j.useContext(Ir);return ot(e,Yv(n)),e}function Xv(n){let e=aV(n),t=e.matches[e.matches.length-1];return ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function lV(){return Xv("useRouteId")}function uV(){var r;let n=j.useContext(Qv),e=oV("useRouteError"),t=Xv("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function cV(){let{router:n}=iV("useNavigate"),e=Xv("useNavigate"),t=j.useRef(!1);return kk(()=>{t.current=!0}),j.useCallback(async(s,i={})=>{tr(t.current,Ak),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...i}))},[n,e])}var jb={};function Pk(n,e,t){!e&&!jb[n]&&(jb[n]=!0,tr(!1,t))}j.memo(hV);function hV({routes:n,future:e,state:t,unstable_onError:r}){return Rk(n,void 0,t,r,e)}function dV(n){return YD(n.context)}function Cr(n){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fV({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){ot(!yh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=j.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof t=="string"&&(t=Yl(t));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:g="default"}=t,w=j.useMemo(()=>{let E=ys(u,a);return E==null?null:{location:{pathname:E,search:h,hash:d,state:p,key:g},navigationType:r}},[a,u,h,d,p,g,r]);return tr(w!=null,`<Router basename="${a}"> is not able to match the URL "${u}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(Tr.Provider,{value:l},j.createElement(gh.Provider,{children:e,value:w}))}function pV({children:n,location:e}){return ZD($y(n),e)}function $y(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){t.push.apply(t,$y(r.props.children,i));return}ot(r.type===Cr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$y(r.props.children,i)),t.push(o)}),t}var qd="get",Wd="application/x-www-form-urlencoded";function Kp(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function mV(n){return Kp(n)&&n.tagName.toLowerCase()==="button"}function gV(n){return Kp(n)&&n.tagName.toLowerCase()==="form"}function yV(n){return Kp(n)&&n.tagName.toLowerCase()==="input"}function _V(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vV(n,e){return n.button===0&&(!e||e==="_self")&&!_V(n)}function By(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function wV(n,e){let t=By(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}var fd=null;function EV(){if(fd===null)try{new FormData(document.createElement("form"),0),fd=!1}catch{fd=!0}return fd}var bV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wg(n){return n!=null&&!bV.has(n)?(tr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):n}function xV(n,e){let t,r,s,i,o;if(gV(n)){let a=n.getAttribute("action");r=a?ys(a,e):null,t=n.getAttribute("method")||qd,s=wg(n.getAttribute("enctype"))||Wd,i=new FormData(n)}else if(mV(n)||yV(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?ys(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||qd,s=wg(n.getAttribute("formenctype"))||wg(a.getAttribute("enctype"))||Wd,i=new FormData(a,n),!EV()){let{name:u,type:h,value:d}=n;if(h==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,d)}}else{if(Kp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qd,r=null,s=Wd,o=n}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TV(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ys(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function IV(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AV(n,e,t){let r=await Promise.all(n.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await IV(i,t);return o.links?o.links():[]}return[]}));return CV(r.flat(1).filter(SV).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Db(n,e,t,r,s,i){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var h;return t[u].pathname!==l.pathname||((h=t[u].route.path)==null?void 0:h.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?e.filter((l,u)=>{var d;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function kV(n,e,{includeHydrateFallback:t}={}){return RV(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function RV(n){return[...new Set(n)]}function PV(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function CV(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let i=JSON.stringify(PV(s));return t.has(i)||(t.add(i),r.push({key:i,link:s})),r},[])}function Ck(){let n=j.useContext(Xl);return Zv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function NV(){let n=j.useContext(Wp);return Zv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ew=j.createContext(void 0);ew.displayName="FrameworkContext";function Nk(){let n=j.useContext(ew);return Zv(n,"You must render this element inside a <HydratedRouter> element"),n}function OV(n,e){let t=j.useContext(ew),[r,s]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,p=j.useRef(null);j.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let E=b=>{b.forEach(_=>{o(_.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return p.current&&T.observe(p.current),()=>{T.disconnect()}}},[n]),j.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{s(!0)},w=()=>{s(!1),o(!1)};return t?n!=="intent"?[i,p,{}]:[i,p,{onFocus:ju(a,g),onBlur:ju(l,w),onMouseEnter:ju(u,g),onMouseLeave:ju(h,w),onTouchStart:ju(d,g)}]:[!1,p,{}]}function ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jV({page:n,...e}){let{router:t}=Ck(),r=j.useMemo(()=>wk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(VV,{page:n,matches:r,...e}):null}function DV(n){let{manifest:e,routeModules:t}=Nk(),[r,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return AV(n,e,t).then(o=>{i||s(o)}),()=>{i=!0}},[n,e,t]),r}function VV({page:n,matches:e,...t}){let r=Is(),{manifest:s,routeModules:i}=Nk(),{basename:o}=Ck(),{loaderData:a,matches:l}=NV(),u=j.useMemo(()=>Db(n,e,l,s,r,"data"),[n,e,l,s,r]),h=j.useMemo(()=>Db(n,e,l,s,r,"assets"),[n,e,l,s,r]),d=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,E=!1;if(e.forEach(b=>{var v;let _=s.routes[b.route.id];!_||!_.hasLoader||(!u.some(N=>N.route.id===b.route.id)&&b.route.id in a&&((v=i[b.route.id])!=null&&v.shouldRevalidate)||_.hasClientLoader?E=!0:w.add(b.route.id))}),w.size===0)return[];let T=TV(n,o,"data");return E&&w.size>0&&T.searchParams.set("_routes",e.filter(b=>w.has(b.route.id)).map(b=>b.route.id).join(",")),[T.pathname+T.search]},[o,a,r,s,u,e,n,i]),p=j.useMemo(()=>kV(h,s),[h,s]),g=DV(h);return j.createElement(j.Fragment,null,d.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),p.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),g.map(({key:w,link:E})=>j.createElement("link",{key:w,nonce:t.nonce,...E})))}function LV(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ok&&(window.__reactRouterVersion="7.10.1")}catch{}function MV({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=vD({window:r,v5Compat:!0}));let i=s.current,[o,a]=j.useState({action:i.action,location:i.location}),l=j.useCallback(u=>{t===!1?a(u):j.startTransition(()=>a(u))},[t]);return j.useLayoutEffect(()=>i.listen(l),[i,l]),j.createElement(fV,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:t===!0})}var jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d,...p},g){let{basename:w,unstable_useTransitions:E}=j.useContext(Tr),T=typeof u=="string"&&jk.test(u),b,_=!1;if(typeof u=="string"&&T&&(b=u,Ok))try{let R=new URL(window.location.href),C=u.startsWith("//")?new URL(R.protocol+u):new URL(u),O=ys(C.pathname,w);C.origin===R.origin&&O!=null?u=O+C.search+C.hash:_=!0}catch{tr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=GD(u,{relative:s}),[N,D,F]=OV(r,p),S=BV(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d,unstable_useTransitions:E});function x(R){e&&e(R),R.defaultPrevented||S(R)}let A=j.createElement("a",{...p,...F,href:b||v,onClick:_||i?e:x,ref:LV(g,D),target:l,"data-discover":!T&&t==="render"?"true":void 0});return N&&!T?j.createElement(j.Fragment,null,A,j.createElement(jV,{page:v})):A});We.displayName="Link";var FV=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},h){let d=_h(o,{relative:u.relative}),p=Is(),g=j.useContext(Wp),{navigator:w,basename:E}=j.useContext(Tr),T=g!=null&&HV(d)&&a===!0,b=w.encodeLocation?w.encodeLocation(d).pathname:d.pathname,_=p.pathname,v=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(_=_.toLowerCase(),v=v?v.toLowerCase():null,b=b.toLowerCase()),v&&E&&(v=ys(v,E)||v);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let D=_===b||!s&&_.startsWith(b)&&_.charAt(N)==="/",F=v!=null&&(v===b||!s&&v.startsWith(b)&&v.charAt(b.length)==="/"),S={isActive:D,isPending:F,isTransitioning:T},x=D?e:void 0,A;typeof r=="function"?A=r(S):A=[r,D?"active":null,F?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(S):i;return j.createElement(We,{...u,"aria-current":x,className:A,ref:h,style:R,to:o,viewTransition:a},typeof l=="function"?l(S):l)});FV.displayName="NavLink";var UV=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:i,method:o=qd,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:d,...p},g)=>{let{unstable_useTransitions:w}=j.useContext(Tr),E=WV(),T=KV(a,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&jk.test(a),v=N=>{if(l&&l(N),N.defaultPrevented)return;N.preventDefault();let D=N.nativeEvent.submitter,F=(D==null?void 0:D.getAttribute("formmethod"))||o,S=()=>E(D||N.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:s,state:i,relative:u,preventScrollReset:h,viewTransition:d});w&&t!==!1?j.startTransition(()=>S()):S()};return j.createElement("form",{ref:g,method:b,action:T,onSubmit:r?l:v,...p,"data-discover":!_&&n==="render"?"true":void 0})});UV.displayName="Form";function $V(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dk(n){let e=j.useContext(Xl);return ot(e,$V(n)),e}function BV(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_useTransitions:a}={}){let l=Ui(),u=Is(),h=_h(n,{relative:i});return j.useCallback(d=>{if(vV(d,e)){d.preventDefault();let p=t!==void 0?t:Fc(u)===Fc(h),g=()=>l(n,{replace:p,state:r,preventScrollReset:s,relative:i,viewTransition:o});a?j.startTransition(()=>g()):g()}},[u,l,h,t,r,e,n,s,i,o,a])}function Vk(n){tr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(By(n)),t=j.useRef(!1),r=Is(),s=j.useMemo(()=>wV(r.search,t.current?null:e.current),[r.search]),i=Ui(),o=j.useCallback((a,l)=>{const u=By(typeof a=="function"?a(new URLSearchParams(s)):a);t.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var zV=0,qV=()=>`__${String(++zV)}__`;function WV(){let{router:n}=Dk("useSubmit"),{basename:e}=j.useContext(Tr),t=lV(),r=n.fetch,s=n.navigate;return j.useCallback(async(i,o={})=>{let{action:a,method:l,encType:u,formData:h,body:d}=xV(i,e);if(o.navigate===!1){let p=o.fetcherKey||qV();await r(p,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await s(o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,t])}function KV(n,{relative:e}={}){let{basename:t}=j.useContext(Tr),r=j.useContext(Ir);ot(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={..._h(n||".",{relative:e})},o=Is();if(n==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let h=a.toString();i.search=h?`?${h}`:""}}return(!n||n===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:hs([t,i.pathname])),Fc(i)}function HV(n,{relative:e}={}){let t=j.useContext(Sk);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Dk("useViewTransitionState"),s=_h(n,{relative:e});if(!t.isTransitioning)return!1;let i=ys(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=ys(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Lf(s.pathname,o)!=null||Lf(s.pathname,i)!=null}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Vb=n=>{const e=JV(n);return e.charAt(0).toUpperCase()+e.slice(1)},Lk=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>j.createElement("svg",{ref:l,...QV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Lk("lucide",s),...a},[...o.map(([u,h])=>j.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(n,e)=>{const t=j.forwardRef(({className:r,...s},i)=>j.createElement(YV,{ref:i,iconNode:e,className:Lk(`lucide-${GV(Vb(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Vb(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ZV=Ke("award",XV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Il=Ke("briefcase",eL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Mk=Ke("building-2",tL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zy=Ke("calendar",nL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fk=Ke("check",rL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qy=Ke("chevron-down",sL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oL=Ke("circle-check-big",iL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lL=Ke("copy",aL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Lb=Ke("dollar-sign",uL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Mb=Ke("external-link",cL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dL=Ke("eye",hL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],pL=Ke("gift",fL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gL=Ke("loader-circle",mL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_L=Ke("log-out",yL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],wL=Ke("mail",vL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Uc=Ke("map-pin",EL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],xL=Ke("menu",bL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],IL=Ke("phone",TL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fb=Ke("plus",SL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Wy=Ke("search",AL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],RL=Ke("send",kL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ub=Ke("share-2",PL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],NL=Ke("sliders-horizontal",CL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Uk=Ke("trending-up",OL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],DL=Ke("user",jL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ky=Ke("users",VL);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$k=Ke("x",LL),ML=()=>{};var $b={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},FL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(t[h],t[d],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new UL;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const w=u<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class UL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $L=function(n){const e=Bk(n);return zk.encodeByteArray(e,!0)},Mf=function(n){return $L(n).replace(/\./g,"")},qk=function(n){try{return zk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=()=>Wk().__FIREBASE_DEFAULTS__,zL=()=>{if(typeof process>"u"||typeof $b>"u")return;const n=$b.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qk(n[1]);return e&&JSON.parse(e)},Hp=()=>{try{return ML()||BL()||zL()||qL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kk=n=>{var e,t;return(t=(e=Hp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WL=n=>{const e=Kk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hk=()=>{var n;return(n=Hp())==null?void 0:n.config},Gk=n=>{var e;return(e=Hp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KL=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jk(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Mf(JSON.stringify(t)),Mf(JSON.stringify(o)),""].join(".")}const cc={};function GL(){const n={prod:[],emulator:[]};for(const e of Object.keys(cc))cc[e]?n.emulator.push(e):n.prod.push(e);return n}function JL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bb=!1;function Qk(n,e){if(typeof window>"u"||typeof document>"u"||!Zl(window.location.host)||cc[n]===e||cc[n]||Bb)return;cc[n]=e;function t(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=GL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Bb=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=JL(r),g=t("text"),w=document.getElementById(g)||document.createElement("span"),E=t("learnmore"),T=document.getElementById(E)||document.createElement("a"),b=t("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),h(T,E);const N=u();l(_,b),v.append(_,w,T,N),document.body.appendChild(v)}i?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function Yk(){var e;const n=(e=Hp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZL(){const n=Pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Zk(){return!Yk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e1(){return!Yk()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tw(){try{return typeof indexedDB=="object"}catch{return!1}}function t1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(t){e(t)}})}function eM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="FirebaseError";class Sr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tM,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ra.prototype.create)}}class ra{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nM(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Sr(s,a,r)}}function nM(n,e){return n.replace(rM,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rM=/\{\$([^}]+)}/g;function sM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(zb(i)&&zb(o)){if(!Pi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ku(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function iM(n,e){const t=new oM(n,e);return t.subscribe.bind(t)}class oM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");aM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Eg),s.error===void 0&&(s.error=Eg),s.complete===void 0&&(s.complete=Eg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Eg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1e3,uM=2,cM=4*60*60*1e3,hM=.5;function qb(n,e=lM,t=uM){const r=e*Math.pow(t,n),s=Math.round(hM*r*(Math.random()-.5)*2);return Math.min(cM,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class xr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new KL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pM(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fM(n){return n===io?void 0:n}function pM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const gM={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},yM=Ae.INFO,_M={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},vM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=_M[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=yM,this._logHandler=vM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const wM=(n,e)=>e.some(t=>n instanceof t);let Wb,Kb;function EM(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bM(){return Kb||(Kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n1=new WeakMap,Hy=new WeakMap,r1=new WeakMap,bg=new WeakMap,nw=new WeakMap;function xM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Ei(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&n1.set(t,n)}).catch(()=>{}),nw.set(e,n),e}function TM(n){if(Hy.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Hy.set(n,e)}let Gy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||r1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IM(n){Gy=n(Gy)}function SM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(xg(this),e,...t);return r1.set(r,e.sort?e.sort():[e]),Ei(r)}:bM().includes(n)?function(...e){return n.apply(xg(this),e),Ei(n1.get(this))}:function(...e){return Ei(n.apply(xg(this),e))}}function AM(n){return typeof n=="function"?SM(n):(n instanceof IDBTransaction&&TM(n),wM(n,EM())?new Proxy(n,Gy):n)}function Ei(n){if(n instanceof IDBRequest)return xM(n);if(bg.has(n))return bg.get(n);const e=AM(n);return e!==n&&(bg.set(n,e),nw.set(e,n)),e}const xg=n=>nw.get(n);function s1(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Ei(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ei(o.result),l.oldVersion,l.newVersion,Ei(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const kM=["get","getKey","getAll","getAllKeys","count"],RM=["put","add","delete","clear"],Tg=new Map;function Hb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=RM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||kM.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&l.done]))[0]};return Tg.set(e,i),i}IM(n=>({...n,get:(e,t,r)=>Hb(e,t)||n.get(e,t,r),has:(e,t)=>!!Hb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function CM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jy="@firebase/app",Gb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Gp("@firebase/app"),NM="@firebase/app-compat",OM="@firebase/analytics-compat",jM="@firebase/analytics",DM="@firebase/app-check-compat",VM="@firebase/app-check",LM="@firebase/auth",MM="@firebase/auth-compat",FM="@firebase/database",UM="@firebase/data-connect",$M="@firebase/database-compat",BM="@firebase/functions",zM="@firebase/functions-compat",qM="@firebase/installations",WM="@firebase/installations-compat",KM="@firebase/messaging",HM="@firebase/messaging-compat",GM="@firebase/performance",JM="@firebase/performance-compat",QM="@firebase/remote-config",YM="@firebase/remote-config-compat",XM="@firebase/storage",ZM="@firebase/storage-compat",e4="@firebase/firestore",t4="@firebase/ai",n4="@firebase/firestore-compat",r4="firebase",s4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="[DEFAULT]",i4={[Jy]:"fire-core",[NM]:"fire-core-compat",[jM]:"fire-analytics",[OM]:"fire-analytics-compat",[VM]:"fire-app-check",[DM]:"fire-app-check-compat",[LM]:"fire-auth",[MM]:"fire-auth-compat",[FM]:"fire-rtdb",[UM]:"fire-data-connect",[$M]:"fire-rtdb-compat",[BM]:"fire-fn",[zM]:"fire-fn-compat",[qM]:"fire-iid",[WM]:"fire-iid-compat",[KM]:"fire-fcm",[HM]:"fire-fcm-compat",[GM]:"fire-perf",[JM]:"fire-perf-compat",[QM]:"fire-rc",[YM]:"fire-rc-compat",[XM]:"fire-gcs",[ZM]:"fire-gcs-compat",[e4]:"fire-fst",[n4]:"fire-fst-compat",[t4]:"fire-vertex","fire-js":"fire-js",[r4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new Map,o4=new Map,Yy=new Map;function Jb(n,e){try{n.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qr(n){const e=n.name;if(Yy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,n);for(const t of Ff.values())Jb(t,n);for(const t of o4.values())Jb(t,n);return!0}function sa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new ra("app","Firebase",a4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=s4;function i1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Qy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw bi.create("bad-app-name",{appName:String(s)});if(t||(t=Hk()),!t)throw bi.create("no-options");const i=Ff.get(s);if(i){if(Pi(t,i.options)&&Pi(r,i.config))return i;throw bi.create("duplicate-app",{appName:s})}const o=new mM(s);for(const l of Yy.values())o.addComponent(l);const a=new l4(t,r,o);return Ff.set(s,a),a}function rw(n=Qy){const e=Ff.get(n);if(!e&&n===Qy&&Hk())return i1();if(!e)throw bi.create("no-app",{appName:n});return e}function Yn(n,e,t){let r=i4[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(o.join(" "));return}Qr(new xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="firebase-heartbeat-database",c4=1,$c="firebase-heartbeat-store";let Ig=null;function o1(){return Ig||(Ig=s1(u4,c4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($c)}catch(t){console.warn(t)}}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),Ig}async function h4(n){try{const t=(await o1()).transaction($c),r=await t.objectStore($c).get(a1(n));return await t.done,r}catch(e){if(e instanceof Sr)_s.warn(e.message);else{const t=bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(t.message)}}}async function Qb(n,e){try{const r=(await o1()).transaction($c,"readwrite");await r.objectStore($c).put(e,a1(n)),await r.done}catch(t){if(t instanceof Sr)_s.warn(t.message);else{const r=bi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_s.warn(r.message)}}}function a1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=1024,f4=30;class p4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>f4){const o=y4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yb(),{heartbeatsToSend:r,unsentEntries:s}=m4(this._heartbeatsCache.heartbeats),i=Mf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return _s.warn(t),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function m4(n,e=d4){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xb(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Xb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class g4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tw()?t1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xb(n){return Mf(JSON.stringify({version:2,heartbeats:n})).length}function y4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(n){Qr(new xr("platform-logger",e=>new PM(e),"PRIVATE")),Qr(new xr("heartbeat",e=>new p4(e),"PRIVATE")),Yn(Jy,Gb,n),Yn(Jy,Gb,"esm2020"),Yn("fire-js","")}_4("");function l1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v4=l1,u1=new ra("auth","Firebase",l1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Gp("@firebase/auth");function w4(n,...e){Uf.logLevel<=Ae.WARN&&Uf.warn(`Auth (${eu}): ${n}`,...e)}function Kd(n,...e){Uf.logLevel<=Ae.ERROR&&Uf.error(`Auth (${eu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n,...e){throw iw(n,...e)}function Er(n,...e){return iw(n,...e)}function sw(n,e,t){const r={...v4(),[e]:t};return new ra("auth","Firebase",r).create(e,{appName:n.name})}function ds(n){return sw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E4(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&nr(n,"argument-error"),sw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return u1.create(n,...e)}function pe(n,e,...t){if(!n)throw iw(e,...t)}function as(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kd(e),new Error(e)}function vs(n,e){n||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function b4(){return Zb()==="http:"||Zb()==="https:"}function Zb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b4()||Xk()||"connection"in navigator)?navigator.onLine:!0}function T4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=QL()||XL()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e){vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A4=new wh(3e4,6e4);function $i(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ss(n,e,t,r,s={}){return h1(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=vh({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...i};return YL()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(u.credentials="include"),c1.fetch()(await d1(n,n.config.apiHost,t,a),u)})}async function h1(n,e,t){n._canInitEmulator=!1;const r={...I4,...e};try{const s=new R4(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pd(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pd(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pd(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw pd(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sw(n,h,u);nr(n,h)}}catch(s){if(s instanceof Sr)throw s;nr(n,"network-request-failed",{message:String(s)})}}async function Eh(n,e,t,r,s={}){const i=await Ss(n,e,t,r,s);return"mfaPendingCredential"in i&&nr(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function d1(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?ow(n.config,s):`${n.config.apiScheme}://${s}`;return S4.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function k4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),A4.get())})}}function pd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Er(n,e,r);return s.customData._tokenResponse=t,s}function ex(n){return n!==void 0&&n.enterprise!==void 0}class P4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C4(n,e){return Ss(n,"GET","/v2/recaptchaConfig",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(n,e){return Ss(n,"POST","/v1/accounts:delete",e)}async function $f(n,e){return Ss(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O4(n,e=!1){const t=Ct(n),r=await t.getIdToken(e),s=aw(r);pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hc(Sg(s.auth_time)),issuedAtTime:hc(Sg(s.iat)),expirationTime:hc(Sg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Sg(n){return Number(n)*1e3}function aw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kd("JWT malformed, contained fewer than 3 sections"),null;try{const s=qk(t);return s?JSON.parse(s):(Kd("Failed to decode base64 JWT payload"),null)}catch(s){return Kd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tx(n){const e=aw(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sr&&j4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function j4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(n){var d;const e=n.auth,t=await n.getIdToken(),r=await Sl(n,$f(e,{idToken:t}));pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=(d=s.providerUserInfo)!=null&&d.length?f1(s.providerUserInfo):[],o=L4(n.providerData,i),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function V4(n){const e=Ct(n);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L4(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function f1(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(n,e){const t=await h1(n,{},async()=>{const r=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await d1(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(l.credentials="include"),c1.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function F4(n,e){return Ss(n,"POST","/v2/accounts:revokeToken",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await M4(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new Za;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Za,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _r{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new D4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return O4(this,e)}reload(){return V4(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await Sl(this,N4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:E}=t;pe(d&&E,e,"internal-error");const T=Za.fromJSON(this.name,E);pe(typeof d=="string",e,"internal-error"),$s(r,e.name),$s(s,e.name),pe(typeof p=="boolean",e,"internal-error"),pe(typeof g=="boolean",e,"internal-error"),$s(i,e.name),$s(o,e.name),$s(a,e.name),$s(l,e.name),$s(u,e.name),$s(h,e.name);const b=new _r({uid:d,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:T,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(_=>({..._}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,t,r=!1){const s=new Za;s.updateFromServerResponse(t);const i=new _r({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bf(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?f1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Za;a.updateFromIdToken(r);const l=new _r({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function ls(n){vs(n instanceof Function,"Expected a class definition");let e=nx.get(n);return e?(vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}p1.type="NONE";const rx=p1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n,e,t){return`firebase:${n}:${e}:${t}`}class el{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Hd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Hd("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $f(this.auth,{idToken:e}).catch(()=>{});return t?_r._fromGetAccountInfoResponse(this.auth,t,e):null}return _r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new el(ls(rx),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ls(rx);const o=Hd(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await $f(e,{idToken:h}).catch(()=>{});if(!p)break;d=await _r._fromGetAccountInfoResponse(e,p,h)}else d=_r._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new el(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new el(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w1(e))return"Blackberry";if(E1(e))return"Webos";if(g1(e))return"Safari";if((e.includes("chrome/")||y1(e))&&!e.includes("edge/"))return"Chrome";if(v1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function m1(n=Pt()){return/firefox\//i.test(n)}function g1(n=Pt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y1(n=Pt()){return/crios\//i.test(n)}function _1(n=Pt()){return/iemobile/i.test(n)}function v1(n=Pt()){return/android/i.test(n)}function w1(n=Pt()){return/blackberry/i.test(n)}function E1(n=Pt()){return/webos/i.test(n)}function lw(n=Pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function U4(n=Pt()){var e;return lw(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $4(){return ZL()&&document.documentMode===10}function b1(n=Pt()){return lw(n)||v1(n)||E1(n)||w1(n)||/windows phone/i.test(n)||_1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(n,e=[]){let t;switch(n){case"Browser":t=sx(Pt());break;case"Worker":t=`${sx(Pt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${eu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z4(n,e={}){return Ss(n,"GET","/v2/passwordPolicy",$i(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=6;class W4{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??q4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new B4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await el.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $f(this,{idToken:e}),r=await _r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(ds(this));const t=e?Ct(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z4(this),t=new W4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ra("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await F4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&w4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bi(n){return Ct(n)}class ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=iM(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H4(n){Jp=n}function T1(n){return Jp.loadJS(n)}function G4(){return Jp.recaptchaEnterpriseScript}function J4(){return Jp.gapiScript}function Q4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Y4{constructor(){this.enterprise=new X4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class X4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Z4="recaptcha-enterprise",I1="NO_RECAPTCHA";class eF{constructor(e){this.type=Z4,this.auth=Bi(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{C4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new P4(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;ex(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(I1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Y4().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!t&&ex(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=G4();l.length!==0&&(l+=a),T1(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function ox(n,e,t,r=!1,s=!1){const i=new eF(n);let o;if(s)o=I1;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function e_(n,e,t,r,s){var i;if((i=n._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ox(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ox(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(n,e){const t=sa(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Pi(i,e??{}))return s;nr(s,"already-initialized")}return t.initialize({options:e})}function nF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ls);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rF(n,e,t){const r=Bi(n);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=S1(e),{host:o,port:a}=sF(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(Pi(u,r.config.emulator)&&Pi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Zl(o)?(Jk(`${i}//${o}${l}`),Qk("Auth",!0)):iF()}function S1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sF(n){const e=S1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ax(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ax(o)}}}function ax(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function iF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function oF(n,e){return Ss(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(n,e){return Eh(n,"POST","/v1/accounts:signInWithPassword",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",$i(n,e))}async function uF(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends uw{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Bc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Bc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,t,"signInWithPassword",aF);case"emailLink":return lF(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return e_(e,r,"signUpPassword",oF);case"emailLink":return uF(e,{idToken:t,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n,e){return Eh(n,"POST","/v1/accounts:signInWithIdp",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="http://localhost";class Bo extends uw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const o=new Bo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return tl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,tl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:cF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dF(n){const e=Wu(Ku(n)).link,t=e?Wu(Ku(e)).deep_link_id:null,r=Wu(Ku(n)).deep_link_id;return(r?Wu(Ku(r)).link:null)||r||t||e||n}class cw{constructor(e){const t=Wu(Ku(e)),r=t.apiKey??null,s=t.oobCode??null,i=hF(t.mode??null);pe(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=dF(e);try{return new cw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.providerId=tu.PROVIDER_ID}static credential(e,t){return Bc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cw.parseLink(t);return pe(r,"argument-error"),Bc._fromEmailAndCode(e,r.code,r.tenantId)}}tu.PROVIDER_ID="password";tu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends hw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends bh{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends bh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ss.credential(t,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends bh{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends bh{constructor(){super("twitter.com")}static credential(e,t){return Bo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zs.credential(t,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(n,e){return Eh(n,"POST","/v1/accounts:signUp",$i(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await _r._fromIdTokenResponse(e,r,s),o=lx(r);return new zo({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=lx(r);return new zo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function lx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Sr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new zf(e,t,r,s)}}function A1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(n,i,e,r):i})}async function pF(n,e,t=!1){const r=await Sl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(n,e,t=!1){const{auth:r}=n;if(Cn(r.app))return Promise.reject(ds(r));const s="reauthenticate";try{const i=await Sl(n,A1(r,s,e,n),t);pe(i.idToken,r,"internal-error");const o=aw(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(n.uid===a,r,"user-mismatch"),zo._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(n,e,t=!1){if(Cn(n.app))return Promise.reject(ds(n));const r="signIn",s=await A1(n,r,e),i=await zo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function gF(n,e){return k1(Bi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(n){const e=Bi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yF(n,e,t){if(Cn(n.app))return Promise.reject(ds(n));const r=Bi(n),o=await e_(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fF).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&R1(n),l}),a=await zo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function _F(n,e,t){return Cn(n.app)?Promise.reject(ds(n)):gF(Ct(n),tu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R1(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(n,e){return Ss(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ct(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Sl(r,vF(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function EF(n,e,t,r){return Ct(n).onIdTokenChanged(e,t,r)}function bF(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}function xF(n,e,t,r){return Ct(n).onAuthStateChanged(e,t,r)}function TF(n){return Ct(n).signOut()}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=1e3,SF=10;class C1 extends P1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);$4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}C1.type="LOCAL";const AF=C1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends P1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}N1.type="SESSION";const O1=N1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Qp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,i)),l=await kF(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=dw("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function PF(n){Wr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function CF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function OF(){return j1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firebaseLocalStorageDb",jF=1,Wf="firebaseLocalStorage",V1="fbase_key";class xh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yp(n,e){return n.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function DF(){const n=indexedDB.deleteDatabase(D1);return new xh(n).toPromise()}function t_(){const n=indexedDB.open(D1,jF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Wf,{keyPath:V1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Wf)?e(r):(r.close(),await DF(),e(await t_()))})})}async function ux(n,e,t){const r=Yp(n,!0).put({[V1]:e,value:t});return new xh(r).toPromise()}async function VF(n,e){const t=Yp(n,!1).get(e),r=await new xh(t).toPromise();return r===void 0?null:r.value}function cx(n,e){const t=Yp(n,!0).delete(e);return new xh(t).toPromise()}const LF=800,MF=3;class L1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await t_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>MF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qp._getInstance(OF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await CF(),!this.activeServiceWorker)return;this.sender=new RF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await t_();return await ux(e,qf,"1"),await cx(e,qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ux(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yp(s,!1).getAll();return new xh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L1.type="LOCAL";const FF=L1;new wh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e){return e?ls(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends uw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UF(n){return k1(n.auth,new fw(n),n.bypassAuthState)}function $F(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),mF(t,new fw(n),n.bypassAuthState)}async function BF(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),pF(t,new fw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UF;case"linkViaPopup":case"linkViaRedirect":return BF;case"reauthViaPopup":case"reauthViaRedirect":return $F;default:nr(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new wh(2e3,1e4);async function qF(n,e,t){if(Cn(n.app))return Promise.reject(Er(n,"operation-not-supported-in-this-environment"));const r=Bi(n);E4(n,e,hw);const s=M1(r,t);return new Eo(r,"signInViaPopup",e,s).executeNotNull()}class Eo extends F1{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Eo.currentPopupAction&&Eo.currentPopupAction.cancel(),Eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=dw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zF.get())};e()}}Eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="pendingRedirect",Gd=new Map;class KF extends F1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gd.get(this.auth._key());if(!e){try{const r=await HF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gd.set(this.auth._key(),e)}return this.bypassAuthState||Gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HF(n,e){const t=QF(e),r=JF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function GF(n,e){Gd.set(n._key(),e)}function JF(n){return ls(n._redirectPersistence)}function QF(n){return Hd(WF,n.config.apiKey,n.name)}async function YF(n,e,t=!1){if(Cn(n.app))return Promise.reject(ds(n));const r=Bi(n),s=M1(r,e),o=await new KF(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=10*60*1e3;class ZF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!U1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Er(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XF&&this.cachedEventUids.clear(),this.cachedEventUids.has(hx(e))}saveEventToCache(e){this.cachedEventUids.add(hx(e)),this.lastProcessedEventTime=Date.now()}}function hx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function U1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(n,e={}){return Ss(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rU=/^https?/;async function sU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tU(n);for(const t of e)try{if(iU(t))return}catch{}nr(n,"unauthorized-domain")}function iU(n){const e=Xy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rU.test(t))return!1;if(nU.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=new wh(3e4,6e4);function dx(){const n=Wr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aU(n){return new Promise((e,t)=>{var s,i,o;function r(){dx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dx(),t(Er(n,"network-request-failed"))},timeout:oU.get()})}if((i=(s=Wr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Wr().gapi)!=null&&o.load)r();else{const a=Q4("iframefcb");return Wr()[a]=()=>{gapi.load?r():t(Er(n,"network-request-failed"))},T1(`${J4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function lU(n){return Jd=Jd||aU(n),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new wh(5e3,15e3),cU="__/auth/iframe",hU="emulator/auth/iframe",dU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pU(n){const e=n.config;pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ow(e,hU):`https://${n.config.authDomain}/${cU}`,r={apiKey:e.apiKey,appName:n.name,v:eu},s=fU.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${vh(r).slice(1)}`}async function mU(n){const e=await lU(n),t=Wr().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:pU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Er(n,"network-request-failed"),a=Wr().setTimeout(()=>{i(o)},uU.get());function l(){Wr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yU=500,_U=600,vU="_blank",wU="http://localhost";class fx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EU(n,e,t,r=yU,s=_U){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...gU,width:r.toString(),height:s.toString(),top:i,left:o},u=Pt().toLowerCase();t&&(a=y1(u)?vU:t),m1(u)&&(e=e||wU,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(U4(u)&&a!=="_self")return bU(e||"",a),new fx(null);const d=window.open(e||"",a,h);pe(d,n,"popup-blocked");try{d.focus()}catch{}return new fx(d)}function bU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="__/auth/handler",TU="emulator/auth/handler",IU=encodeURIComponent("fac");async function px(n,e,t,r,s,i){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:eu,eventId:s};if(e instanceof hw){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",sM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof bh){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${IU}=${encodeURIComponent(l)}`:"";return`${SU(n)}?${vh(a).slice(1)}${u}`}function SU({config:n}){return n.emulator?ow(n,TU):`https://${n.authDomain}/${xU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class AU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=YF,this._overrideRedirectResult=GF}async _openPopup(e,t,r,s){var o;vs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await px(e,t,r,Xy(),s);return EU(e,i,dw())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await px(e,t,r,Xy(),s);return PF(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(vs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mU(e),r=new ZF(e);return t.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ag,{type:Ag},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Ag];i!==void 0&&t(!!i),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return b1()||g1()||lw()}}const kU=AU;var mx="@firebase/auth",gx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CU(n){Qr(new xr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x1(n)},u=new K4(r,s,i,l);return nF(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qr(new xr("auth-internal",e=>{const t=Bi(e.getProvider("auth").getImmediate());return(r=>new RU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(mx,gx,PU(n)),Yn(mx,gx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=5*60,OU=Gk("authIdTokenMaxAge")||NU;let yx=null;const jU=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>OU)return;const s=t==null?void 0:t.token;yx!==s&&(yx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function DU(n=rw()){const e=sa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tF(n,{popupRedirectResolver:kU,persistence:[FF,AF,O1]}),r=Gk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=jU(i.toString());bF(t,o,()=>o(t.currentUser)),EF(t,a=>o(a))}}const s=Kk("auth");return s&&rF(t,`http://${s}`),t}function VU(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}H4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Er("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",VU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CU("Browser");var LU="firebase",MU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(LU,MU,"app");const $1="@firebase/installations",pw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=1e4,z1=`w:${pw}`,q1="FIS_v2",FU="https://firebaseinstallations.googleapis.com/v1",UU=60*60*1e3,$U="installations",BU="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qo=new ra($U,BU,zU);function W1(n){return n instanceof Sr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1({projectId:n}){return`${FU}/projects/${n}/installations`}function H1(n){return{token:n.token,requestStatus:2,expiresIn:WU(n.expiresIn),creationTime:Date.now()}}async function G1(n,e){const r=(await e.json()).error;return qo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function J1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function qU(n,{refreshToken:e}){const t=J1(n);return t.append("Authorization",KU(e)),t}async function Q1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function WU(n){return Number(n.replace("s","000"))}function KU(n){return`${q1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=K1(n),s=J1(n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:t,authVersion:q1,appId:n.appId,sdkVersion:z1},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Q1(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:H1(u.authToken)}}else throw await G1("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=/^[cdef][\w-]{21}$/,n_="";function QU(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=YU(n);return JU.test(t)?t:n_}catch{return n_}}function YU(n){return GU(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new Map;function Z1(n,e){const t=Xp(n);eR(t,e),XU(t,e)}function eR(n,e){const t=X1.get(n);if(t)for(const r of t)r(e)}function XU(n,e){const t=ZU();t&&t.postMessage({key:n,fid:e}),e$()}let bo=null;function ZU(){return!bo&&"BroadcastChannel"in self&&(bo=new BroadcastChannel("[Firebase] FID Change"),bo.onmessage=n=>{eR(n.data.key,n.data.fid)}),bo}function e$(){X1.size===0&&bo&&(bo.close(),bo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$="firebase-installations-database",n$=1,Wo="firebase-installations-store";let kg=null;function mw(){return kg||(kg=s1(t$,n$,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Wo)}}})),kg}async function Kf(n,e){const t=Xp(n),s=(await mw()).transaction(Wo,"readwrite"),i=s.objectStore(Wo),o=await i.get(t);return await i.put(e,t),await s.done,(!o||o.fid!==e.fid)&&Z1(n,e.fid),e}async function tR(n){const e=Xp(n),r=(await mw()).transaction(Wo,"readwrite");await r.objectStore(Wo).delete(e),await r.done}async function Zp(n,e){const t=Xp(n),s=(await mw()).transaction(Wo,"readwrite"),i=s.objectStore(Wo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await s.done,a&&(!o||o.fid!==a.fid)&&Z1(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gw(n){let e;const t=await Zp(n.appConfig,r=>{const s=r$(r),i=s$(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===n_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function r$(n){const e=n||{fid:QU(),registrationStatus:0};return nR(e)}function s$(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=i$(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:o$(n)}:{installationEntry:e}}async function i$(n,e){try{const t=await HU(n,e);return Kf(n.appConfig,t)}catch(t){throw W1(t)&&t.customData.serverCode===409?await tR(n.appConfig):await Kf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function o$(n){let e=await _x(n.appConfig);for(;e.registrationStatus===1;)await Y1(100),e=await _x(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await gw(n);return r||t}return e}function _x(n){return Zp(n,e=>{if(!e)throw qo.create("installation-not-found");return nR(e)})}function nR(n){return a$(n)?{fid:n.fid,registrationStatus:0}:n}function a$(n){return n.registrationStatus===1&&n.registrationTime+B1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$({appConfig:n,heartbeatServiceProvider:e},t){const r=u$(n,t),s=qU(n,t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:z1,appId:n.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Q1(()=>fetch(r,a));if(l.ok){const u=await l.json();return H1(u)}else throw await G1("Generate Auth Token",l)}function u$(n,{fid:e}){return`${K1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(n,e=!1){let t;const r=await Zp(n.appConfig,i=>{if(!rR(i))throw qo.create("not-registered");const o=i.authToken;if(!e&&d$(o))return i;if(o.requestStatus===1)return t=c$(n,e),i;{if(!navigator.onLine)throw qo.create("app-offline");const a=p$(i);return t=h$(n,a),a}});return t?await t:r.authToken}async function c$(n,e){let t=await vx(n.appConfig);for(;t.authToken.requestStatus===1;)await Y1(100),t=await vx(n.appConfig);const r=t.authToken;return r.requestStatus===0?yw(n,e):r}function vx(n){return Zp(n,e=>{if(!rR(e))throw qo.create("not-registered");const t=e.authToken;return m$(t)?{...e,authToken:{requestStatus:0}}:e})}async function h$(n,e){try{const t=await l$(n,e),r={...e,authToken:t};return await Kf(n.appConfig,r),t}catch(t){if(W1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await tR(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Kf(n.appConfig,r)}throw t}}function rR(n){return n!==void 0&&n.registrationStatus===2}function d$(n){return n.requestStatus===2&&!f$(n)}function f$(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+UU}function p$(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function m$(n){return n.requestStatus===1&&n.requestTime+B1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(n){const e=n,{installationEntry:t,registrationPromise:r}=await gw(e);return r?r.catch(console.error):yw(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(n,e=!1){const t=n;return await _$(t),(await yw(t,e)).token}async function _$(n){const{registrationPromise:e}=await gw(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(n){if(!n||!n.options)throw Rg("App Configuration");if(!n.name)throw Rg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Rg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Rg(n){return qo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="installations",w$="installations-internal",E$=n=>{const e=n.getProvider("app").getImmediate(),t=v$(e),r=sa(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},b$=n=>{const e=n.getProvider("app").getImmediate(),t=sa(e,sR).getImmediate();return{getId:()=>g$(t),getToken:s=>y$(t,s)}};function x$(){Qr(new xr(sR,E$,"PUBLIC")),Qr(new xr(w$,b$,"PRIVATE"))}x$();Yn($1,pw);Yn($1,pw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="analytics",T$="firebase_id",I$="origin",S$=60*1e3,A$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_w="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new Gp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ln=new ra("analytics","Analytics",k$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(n){if(!n.startsWith(_w)){const e=Ln.create("invalid-gtag-resource",{gtagURL:n});return hn.warn(e.message),""}return n}function iR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function P$(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function C$(n,e){const t=P$("firebase-js-sdk-policy",{createScriptURL:R$}),r=document.createElement("script"),s=`${_w}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function N$(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function O$(n,e,t,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await iR(t)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(a){hn.error(a)}n("config",s,i)}async function j$(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await iR(t);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){hn.error(i)}}function D$(n,e,t,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await j$(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await O$(n,e,t,r,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,u]=o;n("get",a,l,u)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){hn.error(a)}}return s}function V$(n,e,t,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=D$(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function L$(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_w)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=30,F$=1e3;class U${constructor(e={},t=F$){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oR=new U$;function $$(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function B$(n){var o;const{appId:e,apiKey:t}=n,r={method:"GET",headers:$$(t)},s=A$.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const l=await i.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Ln.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function z$(n,e=oR,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw Ln.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ln.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new K$;return setTimeout(async()=>{a.abort()},S$),aR({appId:r,apiKey:s,measurementId:i},o,a,e)}async function aR(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=oR){var a;const{appId:i,measurementId:o}=n;try{await q$(r,e)}catch(l){if(o)return hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:o};throw l}try{const l=await B$(n);return s.deleteThrottleMetadata(i),l}catch(l){const u=l;if(!W$(u)){if(s.deleteThrottleMetadata(i),o)return hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?qb(t,s.intervalMillis,M$):qb(t,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return s.setThrottleMetadata(i,d),hn.debug(`Calling attemptFetch again in ${h} millis`),aR(n,d,r,s)}}function q$(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(Ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function W$(n){if(!(n instanceof Sr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class K${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function H$(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,o={...r,send_to:i};n("event",t,o)}}async function G$(n,e,t,r){if(r&&r.global){const s={};for(const i of Object.keys(t))s[`user_properties.${i}`]=t[i];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(){if(tw())try{await t1()}catch(n){return hn.warn(Ln.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return hn.warn(Ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Q$(n,e,t,r,s,i,o){const a=z$(n);a.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&hn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>hn.error(p)),e.push(a);const l=J$().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);L$(i)||C$(i,u.measurementId),s("js",new Date);const d=(o==null?void 0:o.config)??{};return d[I$]="firebase",d.update=!0,h!=null&&(d[T$]=h),s("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.app=e}_delete(){return delete nl[this.app.options.appId],Promise.resolve()}}let nl={},wx=[];const Ex={};let Pg="dataLayer",X$="gtag",bx,vw,xx=!1;function Z$(){const n=[];if(Xk()&&n.push("This is a browser extension environment."),eM()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Ln.create("invalid-analytics-context",{errorInfo:e});hn.warn(t.message)}}function e6(n,e,t){Z$();const r=n.options.appId;if(!r)throw Ln.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ln.create("no-api-key");if(nl[r]!=null)throw Ln.create("already-exists",{id:r});if(!xx){N$(Pg);const{wrappedGtag:i,gtagCore:o}=V$(nl,wx,Ex,Pg,X$);vw=i,bx=o,xx=!0}return nl[r]=Q$(n,wx,Ex,e,bx,Pg,t),new Y$(n)}function t6(n=rw()){n=Ct(n);const e=sa(n,Hf);return e.isInitialized()?e.getImmediate():n6(n)}function n6(n,e={}){const t=sa(n,Hf);if(t.isInitialized()){const s=t.getImmediate();if(Pi(e,t.getOptions()))return s;throw Ln.create("already-initialized")}return t.initialize({options:e})}function r6(n,e,t){n=Ct(n),G$(vw,nl[n.app.options.appId],e,t).catch(r=>hn.error(r))}function s6(n,e,t,r){n=Ct(n),H$(vw,nl[n.app.options.appId],e,t,r).catch(s=>hn.error(s))}const Tx="@firebase/analytics",Ix="0.10.19";function i6(){Qr(new xr(Hf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return e6(r,s,t)},"PUBLIC")),Qr(new xr("analytics-internal",n,"PRIVATE")),Yn(Tx,Ix),Yn(Tx,Ix,"esm2020");function n(e){try{const t=e.getProvider(Hf).getImmediate();return{logEvent:(r,s,i)=>s6(t,r,s,i),setUserProperties:(r,s)=>r6(t,r,s)}}catch(t){throw Ln.create("interop-component-reg-failed",{reason:t})}}}i6();var Sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,lR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,x){function A(){}A.prototype=x.prototype,S.F=x.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(R,C,O){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return x.prototype[C].apply(R,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,x,A){A||(A=0);const R=Array(16);if(typeof x=="string")for(var C=0;C<16;++C)R[C]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(C=0;C<16;++C)R[C]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=S.g[0],A=S.g[1],C=S.g[2];let O=S.g[3],k;k=x+(O^A&(C^O))+R[0]+3614090360&4294967295,x=A+(k<<7&4294967295|k>>>25),k=O+(C^x&(A^C))+R[1]+3905402710&4294967295,O=x+(k<<12&4294967295|k>>>20),k=C+(A^O&(x^A))+R[2]+606105819&4294967295,C=O+(k<<17&4294967295|k>>>15),k=A+(x^C&(O^x))+R[3]+3250441966&4294967295,A=C+(k<<22&4294967295|k>>>10),k=x+(O^A&(C^O))+R[4]+4118548399&4294967295,x=A+(k<<7&4294967295|k>>>25),k=O+(C^x&(A^C))+R[5]+1200080426&4294967295,O=x+(k<<12&4294967295|k>>>20),k=C+(A^O&(x^A))+R[6]+2821735955&4294967295,C=O+(k<<17&4294967295|k>>>15),k=A+(x^C&(O^x))+R[7]+4249261313&4294967295,A=C+(k<<22&4294967295|k>>>10),k=x+(O^A&(C^O))+R[8]+1770035416&4294967295,x=A+(k<<7&4294967295|k>>>25),k=O+(C^x&(A^C))+R[9]+2336552879&4294967295,O=x+(k<<12&4294967295|k>>>20),k=C+(A^O&(x^A))+R[10]+4294925233&4294967295,C=O+(k<<17&4294967295|k>>>15),k=A+(x^C&(O^x))+R[11]+2304563134&4294967295,A=C+(k<<22&4294967295|k>>>10),k=x+(O^A&(C^O))+R[12]+1804603682&4294967295,x=A+(k<<7&4294967295|k>>>25),k=O+(C^x&(A^C))+R[13]+4254626195&4294967295,O=x+(k<<12&4294967295|k>>>20),k=C+(A^O&(x^A))+R[14]+2792965006&4294967295,C=O+(k<<17&4294967295|k>>>15),k=A+(x^C&(O^x))+R[15]+1236535329&4294967295,A=C+(k<<22&4294967295|k>>>10),k=x+(C^O&(A^C))+R[1]+4129170786&4294967295,x=A+(k<<5&4294967295|k>>>27),k=O+(A^C&(x^A))+R[6]+3225465664&4294967295,O=x+(k<<9&4294967295|k>>>23),k=C+(x^A&(O^x))+R[11]+643717713&4294967295,C=O+(k<<14&4294967295|k>>>18),k=A+(O^x&(C^O))+R[0]+3921069994&4294967295,A=C+(k<<20&4294967295|k>>>12),k=x+(C^O&(A^C))+R[5]+3593408605&4294967295,x=A+(k<<5&4294967295|k>>>27),k=O+(A^C&(x^A))+R[10]+38016083&4294967295,O=x+(k<<9&4294967295|k>>>23),k=C+(x^A&(O^x))+R[15]+3634488961&4294967295,C=O+(k<<14&4294967295|k>>>18),k=A+(O^x&(C^O))+R[4]+3889429448&4294967295,A=C+(k<<20&4294967295|k>>>12),k=x+(C^O&(A^C))+R[9]+568446438&4294967295,x=A+(k<<5&4294967295|k>>>27),k=O+(A^C&(x^A))+R[14]+3275163606&4294967295,O=x+(k<<9&4294967295|k>>>23),k=C+(x^A&(O^x))+R[3]+4107603335&4294967295,C=O+(k<<14&4294967295|k>>>18),k=A+(O^x&(C^O))+R[8]+1163531501&4294967295,A=C+(k<<20&4294967295|k>>>12),k=x+(C^O&(A^C))+R[13]+2850285829&4294967295,x=A+(k<<5&4294967295|k>>>27),k=O+(A^C&(x^A))+R[2]+4243563512&4294967295,O=x+(k<<9&4294967295|k>>>23),k=C+(x^A&(O^x))+R[7]+1735328473&4294967295,C=O+(k<<14&4294967295|k>>>18),k=A+(O^x&(C^O))+R[12]+2368359562&4294967295,A=C+(k<<20&4294967295|k>>>12),k=x+(A^C^O)+R[5]+4294588738&4294967295,x=A+(k<<4&4294967295|k>>>28),k=O+(x^A^C)+R[8]+2272392833&4294967295,O=x+(k<<11&4294967295|k>>>21),k=C+(O^x^A)+R[11]+1839030562&4294967295,C=O+(k<<16&4294967295|k>>>16),k=A+(C^O^x)+R[14]+4259657740&4294967295,A=C+(k<<23&4294967295|k>>>9),k=x+(A^C^O)+R[1]+2763975236&4294967295,x=A+(k<<4&4294967295|k>>>28),k=O+(x^A^C)+R[4]+1272893353&4294967295,O=x+(k<<11&4294967295|k>>>21),k=C+(O^x^A)+R[7]+4139469664&4294967295,C=O+(k<<16&4294967295|k>>>16),k=A+(C^O^x)+R[10]+3200236656&4294967295,A=C+(k<<23&4294967295|k>>>9),k=x+(A^C^O)+R[13]+681279174&4294967295,x=A+(k<<4&4294967295|k>>>28),k=O+(x^A^C)+R[0]+3936430074&4294967295,O=x+(k<<11&4294967295|k>>>21),k=C+(O^x^A)+R[3]+3572445317&4294967295,C=O+(k<<16&4294967295|k>>>16),k=A+(C^O^x)+R[6]+76029189&4294967295,A=C+(k<<23&4294967295|k>>>9),k=x+(A^C^O)+R[9]+3654602809&4294967295,x=A+(k<<4&4294967295|k>>>28),k=O+(x^A^C)+R[12]+3873151461&4294967295,O=x+(k<<11&4294967295|k>>>21),k=C+(O^x^A)+R[15]+530742520&4294967295,C=O+(k<<16&4294967295|k>>>16),k=A+(C^O^x)+R[2]+3299628645&4294967295,A=C+(k<<23&4294967295|k>>>9),k=x+(C^(A|~O))+R[0]+4096336452&4294967295,x=A+(k<<6&4294967295|k>>>26),k=O+(A^(x|~C))+R[7]+1126891415&4294967295,O=x+(k<<10&4294967295|k>>>22),k=C+(x^(O|~A))+R[14]+2878612391&4294967295,C=O+(k<<15&4294967295|k>>>17),k=A+(O^(C|~x))+R[5]+4237533241&4294967295,A=C+(k<<21&4294967295|k>>>11),k=x+(C^(A|~O))+R[12]+1700485571&4294967295,x=A+(k<<6&4294967295|k>>>26),k=O+(A^(x|~C))+R[3]+2399980690&4294967295,O=x+(k<<10&4294967295|k>>>22),k=C+(x^(O|~A))+R[10]+4293915773&4294967295,C=O+(k<<15&4294967295|k>>>17),k=A+(O^(C|~x))+R[1]+2240044497&4294967295,A=C+(k<<21&4294967295|k>>>11),k=x+(C^(A|~O))+R[8]+1873313359&4294967295,x=A+(k<<6&4294967295|k>>>26),k=O+(A^(x|~C))+R[15]+4264355552&4294967295,O=x+(k<<10&4294967295|k>>>22),k=C+(x^(O|~A))+R[6]+2734768916&4294967295,C=O+(k<<15&4294967295|k>>>17),k=A+(O^(C|~x))+R[13]+1309151649&4294967295,A=C+(k<<21&4294967295|k>>>11),k=x+(C^(A|~O))+R[4]+4149444226&4294967295,x=A+(k<<6&4294967295|k>>>26),k=O+(A^(x|~C))+R[11]+3174756917&4294967295,O=x+(k<<10&4294967295|k>>>22),k=C+(x^(O|~A))+R[2]+718787259&4294967295,C=O+(k<<15&4294967295|k>>>17),k=A+(O^(C|~x))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.v=function(S,x){x===void 0&&(x=S.length);const A=x-this.blockSize,R=this.C;let C=this.h,O=0;for(;O<x;){if(C==0)for(;O<=A;)s(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<x;)if(R[C++]=S.charCodeAt(O++),C==this.blockSize){s(this,R),C=0;break}}else for(;O<x;)if(R[C++]=S[O++],C==this.blockSize){s(this,R),C=0;break}}this.h=C,this.o+=x},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;x=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=x&255,x/=256;for(this.v(S),S=Array(16),x=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)S[x++]=this.g[A]>>>R&255;return S};function i(S,x){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=x(S)}function o(S,x){this.h=x;const A=[];let R=!0;for(let C=S.length-1;C>=0;C--){const O=S[C]|0;R&&O==x||(A[C]=O,R=!1)}this.g=A}var a={};function l(S){return-128<=S&&S<128?i(S,function(x){return new o([x|0],x<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return T(u(-S));const x=[];let A=1;for(let R=0;S>=A;R++)x[R]=S/A|0,A*=4294967296;return new o(x,0)}function h(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return T(h(S.substring(1),x));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(x,8));let R=d;for(let O=0;O<S.length;O+=8){var C=Math.min(8,S.length-O);const k=parseInt(S.substring(O,O+C),x);C<8?(C=u(Math.pow(x,C)),R=R.j(C).add(u(k))):(R=R.j(A),R=R.add(u(k)))}return R}var d=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(E(this))return-T(this).m();let S=0,x=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);S+=(R>=0?R:4294967296+R)*x,x*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(E(this))return"-"+T(this).toString(S);const x=u(Math.pow(S,6));var A=this;let R="";for(;;){const C=N(A,x).g;A=b(A,C.j(x));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=C,w(A))return O+R;for(;O.length<6;)O="0"+O;R=O+R}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function E(S){return S.h==-1}n.l=function(S){return S=b(this,S),E(S)?-1:w(S)?0:1};function T(S){const x=S.g.length,A=[];for(let R=0;R<x;R++)A[R]=~S.g[R];return new o(A,~S.h).add(p)}n.abs=function(){return E(this)?T(this):this},n.add=function(S){const x=Math.max(this.g.length,S.g.length),A=[];let R=0;for(let C=0;C<=x;C++){let O=R+(this.i(C)&65535)+(S.i(C)&65535),k=(O>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);R=k>>>16,O&=65535,k&=65535,A[C]=k<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function b(S,x){return S.add(T(x))}n.j=function(S){if(w(this)||w(S))return d;if(E(this))return E(S)?T(this).j(T(S)):T(T(this).j(S));if(E(S))return T(this.j(T(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const x=this.g.length+S.g.length,A=[];for(var R=0;R<2*x;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<S.g.length;C++){const O=this.i(R)>>>16,k=this.i(R)&65535,Ee=S.i(C)>>>16,Be=S.i(C)&65535;A[2*R+2*C]+=k*Be,_(A,2*R+2*C),A[2*R+2*C+1]+=O*Be,_(A,2*R+2*C+1),A[2*R+2*C+1]+=k*Ee,_(A,2*R+2*C+1),A[2*R+2*C+2]+=O*Ee,_(A,2*R+2*C+2)}for(S=0;S<x;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=x;S<2*x;S++)A[S]=0;return new o(A,0)};function _(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function v(S,x){this.g=S,this.h=x}function N(S,x){if(w(x))throw Error("division by zero");if(w(S))return new v(d,d);if(E(S))return x=N(T(S),x),new v(T(x.g),T(x.h));if(E(x))return x=N(S,T(x)),new v(T(x.g),x.h);if(S.g.length>30){if(E(S)||E(x))throw Error("slowDivide_ only works with positive integers.");for(var A=p,R=x;R.l(S)<=0;)A=D(A),R=D(R);var C=F(A,1),O=F(R,1);for(R=F(R,2),A=F(A,2);!w(R);){var k=O.add(R);k.l(S)<=0&&(C=C.add(A),O=k),R=F(R,1),A=F(A,1)}return x=b(S,C.j(x)),new v(C,x)}for(C=d;S.l(x)>=0;){for(A=Math.max(1,Math.floor(S.m()/x.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),O=u(A),k=O.j(x);E(k)||k.l(S)>0;)A-=R,O=u(A),k=O.j(x);w(O)&&(O=p),C=C.add(O),S=b(S,k)}return new v(C,S)}n.B=function(S){return N(this,S).h},n.and=function(S){const x=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<x;R++)A[R]=this.i(R)&S.i(R);return new o(A,this.h&S.h)},n.or=function(S){const x=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<x;R++)A[R]=this.i(R)|S.i(R);return new o(A,this.h|S.h)},n.xor=function(S){const x=Math.max(this.g.length,S.g.length),A=[];for(let R=0;R<x;R++)A[R]=this.i(R)^S.i(R);return new o(A,this.h^S.h)};function D(S){const x=S.g.length+1,A=[];for(let R=0;R<x;R++)A[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(A,S.h)}function F(S,x){const A=x>>5;x%=32;const R=S.g.length-A,C=[];for(let O=0;O<R;O++)C[O]=x>0?S.i(O+A)>>>x|S.i(O+A+1)<<32-x:S.i(O+A);return new o(C,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,lR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xi=o}).apply(typeof Sx<"u"?Sx:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uR,Hu,cR,Qd,r_,hR,dR,fR;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function s(c,m){if(m)e:{var y=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var L=c[I];if(!(L in y))break e;y=y[L]}c=c[c.length-1],I=y[c],m=m(I),m!=I&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(m){var y=[],I;for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&y.push([I,m[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function l(c,m,y){return c.call.apply(c.bind,arguments)}function u(c,m,y){return u=l,u.apply(null,arguments)}function h(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function d(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(I,L,U){for(var G=Array(arguments.length-2),be=2;be<arguments.length;be++)G[be-2]=arguments[be];return m.prototype[L].apply(I,G)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const m=c.length;if(m>0){const y=Array(m);for(let I=0;I<m;I++)y[I]=c[I];return y}return[]}function w(c,m){for(let I=1;I<arguments.length;I++){const L=arguments[I];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=c.length||0;const U=L.length||0;c.length=y+U;for(let G=0;G<U;G++)c[y+G]=L[G]}else c.push(L)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function T(c){o.setTimeout(()=>{throw c},0)}function b(){var c=S;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class _{constructor(){this.h=this.g=null}add(m,y){const I=v.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var v=new E(()=>new N,c=>c.reset());class N{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let D,F=!1,S=new _,x=()=>{const c=Promise.resolve(void 0);D=()=>{c.then(A)}};function A(){for(var c;c=b();){try{c.h.call(c.g)}catch(y){T(y)}var m=v;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c}();function k(c){return/^[\s\xa0]*$/.test(c)}function Ee(c,m){C.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}d(Ee,C),Ee.prototype.init=function(c,m){const y=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),lt=0;function Ot(c,m,y,I,L){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=L,this.key=++lt,this.da=this.fa=!1}function Y(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ce(c,m,y){for(const I in c)m.call(y,c[I],I,c)}function me(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function Le(c){const m={};for(const y in c)m[y]=c[y];return m}const Je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,m){let y,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(y in I)c[y]=I[y];for(let U=0;U<Je.length;U++)y=Je[U],Object.prototype.hasOwnProperty.call(I,y)&&(c[y]=I[y])}}function xe(c){this.src=c,this.g={},this.h=0}xe.prototype.add=function(c,m,y,I,L){const U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);const G=jt(c,m,I,L);return G>-1?(m=c[G],y||(m.fa=!1)):(m=new Ot(m,this.src,U,!!I,L),m.fa=y,c.push(m)),m};function It(c,m){const y=m.type;if(y in c.g){var I=c.g[y],L=Array.prototype.indexOf.call(I,m,void 0),U;(U=L>=0)&&Array.prototype.splice.call(I,L,1),U&&(Y(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function jt(c,m,y,I){for(let L=0;L<c.length;++L){const U=c[L];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==I)return L}return-1}var mn="closure_lm_"+(Math.random()*1e6|0),Rs={};function Ps(c,m,y,I,L){if(Array.isArray(m)){for(let U=0;U<m.length;U++)Ps(c,m[U],y,I,L);return null}return y=Cm(y),c&&c[Be]?c.J(m,y,a(I)?!!I.capture:!1,L):Cs(c,m,y,!1,I,L)}function Cs(c,m,y,I,L,U){if(!m)throw Error("Invalid event type");const G=a(L)?!!L.capture:!!L;let be=uu(c);if(be||(c[mn]=be=new xe(c)),y=be.add(m,y,I,G,U),y.proxy)return y;if(I=la(),y.proxy=I,I.src=c,I.listener=y,c.addEventListener)O||(L=G),L===void 0&&(L=!1),c.addEventListener(m.toString(),I,L);else if(c.attachEvent)c.attachEvent(Os(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function la(){function c(y){return m.call(c.src,c.listener,y)}const m=Vh;return c}function Ns(c,m,y,I,L){if(Array.isArray(m))for(var U=0;U<m.length;U++)Ns(c,m[U],y,I,L);else I=a(I)?!!I.capture:!!I,y=Cm(y),c&&c[Be]?(c=c.i,U=String(m).toString(),U in c.g&&(m=c.g[U],y=jt(m,y,I,L),y>-1&&(Y(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[U],c.h--)))):c&&(c=uu(c))&&(m=c.g[m.toString()],c=-1,m&&(c=jt(m,y,I,L)),(y=c>-1?m[c]:null)&&Hi(y))}function Hi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Be])It(m.i,c);else{var y=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(y,I,c.capture):m.detachEvent?m.detachEvent(Os(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=uu(m))?(It(y,c),y.h==0&&(y.src=null,m[mn]=null)):Y(c)}}}function Os(c){return c in Rs?Rs[c]:Rs[c]="on"+c}function Vh(c,m){if(c.da)c=!0;else{m=new Ee(m,this);const y=c.listener,I=c.ha||c.src;c.fa&&Hi(c),c=y.call(I,m)}return c}function uu(c){return c=c[mn],c instanceof xe?c:null}var cu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cm(c){return typeof c=="function"?c:(c[cu]||(c[cu]=function(m){return c.handleEvent(m)}),c[cu])}function St(){R.call(this),this.i=new xe(this),this.M=this,this.G=null}d(St,R),St.prototype[Be]=!0,St.prototype.removeEventListener=function(c,m,y,I){Ns(this,c,m,y,I)};function P(c,m){var y,I=c.G;if(I)for(y=[];I;I=I.G)y.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new C(m,c);else if(m instanceof C)m.target=m.target||c;else{var L=m;m=new C(I,c),re(m,L)}L=!0;let U,G;if(y)for(G=y.length-1;G>=0;G--)U=m.g=y[G],L=M(U,I,!0,m)&&L;if(U=m.g=c,L=M(U,I,!0,m)&&L,L=M(U,I,!1,m)&&L,y)for(G=0;G<y.length;G++)U=m.g=y[G],L=M(U,I,!1,m)&&L}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let I=0;I<y.length;I++)Y(y[I]);delete c.g[m],c.h--}}this.G=null},St.prototype.J=function(c,m,y,I){return this.i.add(String(c),m,!1,y,I)},St.prototype.K=function(c,m,y,I){return this.i.add(String(c),m,!0,y,I)};function M(c,m,y,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let U=0;U<m.length;++U){const G=m[U];if(G&&!G.da&&G.capture==y){const be=G.listener,At=G.ha||G.src;G.fa&&It(c.i,G),L=be.call(At,I)!==!1&&L}}return L&&!I.defaultPrevented}function $(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function Z(c){c.g=$(()=>{c.g=null,c.i&&(c.i=!1,Z(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Q extends R{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Z(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function K(c){R.call(this),this.h=c,this.g={}}d(K,R);var he=[];function Ne(c){ce(c.g,function(m,y){this.g.hasOwnProperty(y)&&Hi(m)},c),c.g={}}K.prototype.N=function(){K.Z.N.call(this),Ne(this)},K.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ve=o.JSON.stringify,gn=o.JSON.parse,ua=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function sr(){}function Lh(){}var Xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gi(){C.call(this,"d")}d(Gi,C);function hu(){C.call(this,"c")}d(hu,C);var Ar={},Mh=null;function Ji(){return Mh=Mh||new St}Ar.Ia="serverreachability";function C0(c){C.call(this,Ar.Ia,c)}d(C0,C);function du(c){const m=Ji();P(m,new C0(m))}Ar.STAT_EVENT="statevent";function N0(c,m){C.call(this,Ar.STAT_EVENT,c),this.stat=m}d(N0,C);function rn(c){const m=Ji();P(m,new N0(m,c))}Ar.Ja="timingevent";function O0(c,m){C.call(this,Ar.Ja,c),this.size=m}d(O0,C);function fu(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function pu(){this.g=!0}pu.prototype.ua=function(){this.g=!1};function bO(c,m,y,I,L,U){c.info(function(){if(c.g)if(U){var G="",be=U.split("&");for(let ze=0;ze<be.length;ze++){var At=be[ze].split("=");if(At.length>1){const Dt=At[0];At=At[1];const Rr=Dt.split("_");G=Rr.length>=2&&Rr[1]=="type"?G+(Dt+"="+At+"&"):G+(Dt+"=redacted&")}}}else G=null;else G=U;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+m+`
`+y+`
`+G})}function xO(c,m,y,I,L,U,G){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+m+`
`+y+`
`+U+" "+G})}function ca(c,m,y,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+IO(c,y)+(I?" "+I:"")})}function TO(c,m){c.info(function(){return"TIMEOUT: "+m})}pu.prototype.info=function(){};function IO(c,m){if(!c.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(c=0;c<U.length;c++)if(Array.isArray(U[c])){var y=U[c];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let G=1;G<I.length;G++)I[G]=""}}}}return Ve(U)}catch{return m}}var Fh={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},j0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},D0;function Nm(){}d(Nm,sr),Nm.prototype.g=function(){return new XMLHttpRequest},D0=new Nm;function mu(c){return encodeURIComponent(String(c))}function SO(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function js(c,m,y,I){this.j=c,this.i=m,this.l=y,this.S=I||1,this.V=new K(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new V0}function V0(){this.i=null,this.g="",this.h=!1}var L0={},Om={};function jm(c,m,y){c.M=1,c.A=$h(kr(m)),c.u=y,c.R=!0,M0(c,null)}function M0(c,m){c.F=Date.now(),Uh(c),c.B=kr(c.A);var y=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Y0(y.i,"t",I),c.C=0,y=c.j.L,c.h=new V0,c.g=mE(c.j,y?m:null,!c.u),c.P>0&&(c.O=new Q(u(c.Y,c,c.g),c.P)),m=c.V,y=c.g,I=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(he[0]=L.toString()),L=he);for(let U=0;U<L.length;U++){const G=Ps(y,L[U],I||m.handleEvent,!1,m.h||m);if(!G)break;m.g[G.key]=G}m=c.J?Le(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),du(),bO(c.i,c.v,c.B,c.l,c.S,c.u)}js.prototype.ba=function(c){c=c.target;const m=this.O;m&&Ls(c)==3?m.j():this.Y(c)},js.prototype.Y=function(c){try{if(c==this.g)e:{const be=Ls(this.g),At=this.g.ya(),ze=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||sE(this.g)))){this.K||be!=4||At==7||(At==8||ze<=0?du(3):du(2)),Dm(this);var m=this.g.ca();this.X=m;var y=AO(this);if(this.o=m==200,xO(this.i,this.v,this.B,this.l,this.S,be,m),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var U=I;break t}}U=null}if(c=U)ca(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vm(this,c);else{this.o=!1,this.m=3,rn(12),Qi(this),gu(this);break e}}if(this.R){c=!0;let Dt;for(;!this.K&&this.C<y.length;)if(Dt=kO(this,y),Dt==Om){be==4&&(this.m=4,rn(14),c=!1),ca(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==L0){this.m=4,rn(15),ca(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else ca(this.i,this.l,Dt,null),Vm(this,Dt);if(F0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||y.length!=0||this.h.h||(this.m=1,rn(16),c=!1),this.o=this.o&&c,!c)ca(this.i,this.l,y,"[Invalid Chunked Response]"),Qi(this),gu(this);else if(y.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),qm(G),G.P=!0,rn(11))}}else ca(this.i,this.l,y,null),Vm(this,y);be==4&&Qi(this),this.o&&!this.K&&(be==4?hE(this.j,this):(this.o=!1,Uh(this)))}else BO(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Qi(this),gu(this)}}}catch{}finally{}};function AO(c){if(!F0(c))return c.g.la();const m=sE(c.g);if(m==="")return"";let y="";const I=m.length,L=Ls(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Qi(c),gu(c),"";c.h.i=new o.TextDecoder}for(let U=0;U<I;U++)c.h.h=!0,y+=c.h.i.decode(m[U],{stream:!(L&&U==I-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function F0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function kO(c,m){var y=c.C,I=m.indexOf(`
`,y);return I==-1?Om:(y=Number(m.substring(y,I)),isNaN(y)?L0:(I+=1,I+y>m.length?Om:(m=m.slice(I,I+y),c.C=I+y,m)))}js.prototype.cancel=function(){this.K=!0,Qi(this)};function Uh(c){c.T=Date.now()+c.H,U0(c,c.H)}function U0(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=fu(u(c.aa,c),m)}function Dm(c){c.D&&(o.clearTimeout(c.D),c.D=null)}js.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(TO(this.i,this.B),this.M!=2&&(du(),rn(17)),Qi(this),this.m=2,gu(this)):U0(this,this.T-c)};function gu(c){c.j.I==0||c.K||hE(c.j,c)}function Qi(c){Dm(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Ne(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Vm(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||Lm(y.h,c))){if(!c.L&&Lm(y.h,c)&&y.I==3){try{var I=y.Ba.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)Kh(y),qh(y);else break e;zm(y),rn(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=fu(u(y.Va,y),6e3));z0(y.h)<=1&&y.ta&&(y.ta=void 0)}else Xi(y,11)}else if((c.L||y.g==c)&&Kh(y),!k(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let ze=L[m];const Dt=ze[0];if(!(Dt<=y.K))if(y.K=Dt,ze=ze[1],y.I==2)if(ze[0]=="c"){y.M=ze[1],y.ba=ze[2];const Rr=ze[3];Rr!=null&&(y.ka=Rr,y.j.info("VER="+y.ka));const Zi=ze[4];Zi!=null&&(y.za=Zi,y.j.info("SVER="+y.za));const Ms=ze[5];Ms!=null&&typeof Ms=="number"&&Ms>0&&(I=1.5*Ms,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const Fs=c.g;if(Fs){const Gh=Fs.g?Fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gh){var U=I.h;U.g||Gh.indexOf("spdy")==-1&&Gh.indexOf("quic")==-1&&Gh.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Mm(U,U.h),U.h=null))}if(I.G){const Wm=Fs.g?Fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Wm&&(I.wa=Wm,Qe(I.J,I.G,Wm))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var G=c;if(I.na=pE(I,I.L?I.ba:null,I.W),G.L){q0(I.h,G);var be=G,At=I.O;At&&(be.H=At),be.D&&(Dm(be),Uh(be)),I.g=G}else uE(I);y.i.length>0&&Wh(y)}else ze[0]!="stop"&&ze[0]!="close"||Xi(y,7);else y.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Xi(y,7):Bm(y):ze[0]!="noop"&&y.l&&y.l.qa(ze),y.A=0)}}du(4)}catch{}}var RO=class{constructor(c,m){this.g=c,this.map=m}};function $0(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function B0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function z0(c){return c.h?1:c.g?c.g.size:0}function Lm(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Mm(c,m){c.g?c.g.add(m):c.h=m}function q0(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}$0.prototype.cancel=function(){if(this.i=W0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function W0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return g(c.i)}var K0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PO(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const I=c[y].indexOf("=");let L,U=null;I>=0?(L=c[y].substring(0,I),U=c[y].substring(I+1)):L=c[y],m(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ds(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Ds?(this.l=c.l,yu(this,c.j),this.o=c.o,this.g=c.g,_u(this,c.u),this.h=c.h,Fm(this,X0(c.i)),this.m=c.m):c&&(m=String(c).match(K0))?(this.l=!1,yu(this,m[1]||"",!0),this.o=vu(m[2]||""),this.g=vu(m[3]||"",!0),_u(this,m[4]),this.h=vu(m[5]||"",!0),Fm(this,m[6]||"",!0),this.m=vu(m[7]||"")):(this.l=!1,this.i=new Eu(null,this.l))}Ds.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(wu(m,H0,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(wu(m,H0,!0),"@"),c.push(mu(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(wu(y,y.charAt(0)=="/"?OO:NO,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",wu(y,DO)),c.join("")},Ds.prototype.resolve=function(c){const m=kr(this);let y=!!c.j;y?yu(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var I=c.h;if(y)_u(m,c.u);else if(y=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=m.h.lastIndexOf("/");L!=-1&&(I=m.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let G=0;G<L.length;){const be=L[G++];be=="."?I&&G==L.length&&U.push(""):be==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&G==L.length&&U.push("")):(U.push(be),I=!0)}I=U.join("/")}else I=L}return y?m.h=I:y=c.i.toString()!=="",y?Fm(m,X0(c.i)):y=!!c.m,y&&(m.m=c.m),m};function kr(c){return new Ds(c)}function yu(c,m,y){c.j=y?vu(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function _u(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Fm(c,m,y){m instanceof Eu?(c.i=m,VO(c.i,c.l)):(y||(m=wu(m,jO)),c.i=new Eu(m,c.l))}function Qe(c,m,y){c.i.set(m,y)}function $h(c){return Qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function vu(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wu(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,CO),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function CO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var H0=/[#\/\?@]/g,NO=/[#\?:]/g,OO=/[#\?]/g,jO=/[#\?@]/g,DO=/#/g;function Eu(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Yi(c){c.g||(c.g=new Map,c.h=0,c.i&&PO(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}n=Eu.prototype,n.add=function(c,m){Yi(this),this.i=null,c=ha(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function G0(c,m){Yi(c),m=ha(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function J0(c,m){return Yi(c),m=ha(c,m),c.g.has(m)}n.forEach=function(c,m){Yi(this),this.g.forEach(function(y,I){y.forEach(function(L){c.call(m,L,I,this)},this)},this)};function Q0(c,m){Yi(c);let y=[];if(typeof m=="string")J0(c,m)&&(y=y.concat(c.g.get(ha(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}n.set=function(c,m){return Yi(this),this.i=null,c=ha(this,c),J0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=Q0(this,c),c.length>0?String(c[0]):m):m};function Y0(c,m,y){G0(c,m),y.length>0&&(c.i=null,c.g.set(ha(c,m),g(y)),c.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let I=0;I<m.length;I++){var y=m[I];const L=mu(y);y=Q0(this,y);for(let U=0;U<y.length;U++){let G=L;y[U]!==""&&(G+="="+mu(y[U])),c.push(G)}}return this.i=c.join("&")};function X0(c){const m=new Eu;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function ha(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function VO(c,m){m&&!c.j&&(Yi(c),c.i=null,c.g.forEach(function(y,I){const L=I.toLowerCase();I!=L&&(G0(this,I),Y0(this,L,y))},c)),c.j=m}function LO(c,m){const y=new pu;if(o.Image){const I=new Image;I.onload=h(Vs,y,"TestLoadImage: loaded",!0,m,I),I.onerror=h(Vs,y,"TestLoadImage: error",!1,m,I),I.onabort=h(Vs,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=h(Vs,y,"TestLoadImage: timeout",!1,m,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function MO(c,m){const y=new pu,I=new AbortController,L=setTimeout(()=>{I.abort(),Vs(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then(U=>{clearTimeout(L),U.ok?Vs(y,"TestPingServer: ok",!0,m):Vs(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Vs(y,"TestPingServer: error",!1,m)})}function Vs(c,m,y,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(y)}catch{}}function FO(){this.g=new ua}function Um(c){this.i=c.Sb||null,this.h=c.ab||!1}d(Um,sr),Um.prototype.g=function(){return new Bh(this.i,this.h)};function Bh(c,m){St.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Bh,St),n=Bh.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,xu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bu(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xu(this)),this.g&&(this.readyState=3,xu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Z0(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Z0(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?bu(this):xu(this),this.readyState==3&&Z0(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,bu(this))},n.Na=function(c){this.g&&(this.response=c,bu(this))},n.ga=function(){this.g&&bu(this)};function bu(c){c.readyState=4,c.l=null,c.j=null,c.B=null,xu(c)}n.setRequestHeader=function(c,m){this.A.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function xu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function eE(c){let m="";return ce(c,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function $m(c,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=eE(y),typeof c=="string"?y!=null&&mu(y):Qe(c,m,y))}function ut(c){St.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ut,St);var UO=/^https?$/i,$O=["POST","PUT"];n=ut.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():D0.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(U){tE(this,U);return}if(c=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)y.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())y.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call($O,m,void 0)>=0)||I||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of y)this.g.setRequestHeader(U,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(U){tE(this,U)}};function tE(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,nE(c),zh(c)}function nE(c){c.A||(c.A=!0,P(c,"complete"),P(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,P(this,"complete"),P(this,"abort"),zh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zh(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rE(this):this.Xa())},n.Xa=function(){rE(this)};function rE(c){if(c.h&&typeof i<"u"){if(c.v&&Ls(c)==4)setTimeout(c.Ca.bind(c),0);else if(P(c,"readystatechange"),Ls(c)==4){c.h=!1;try{const U=c.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=U===0){let G=String(c.D).match(K0)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),I=!UO.test(G?G.toLowerCase():"")}y=I}if(y)P(c,"complete"),P(c,"success");else{c.o=6;try{var L=Ls(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",nE(c)}}finally{zh(c)}}}}function zh(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||P(c,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ls(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Ls(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),gn(m)}};function sE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function BO(c){const m={};c=(c.g&&Ls(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(k(c[I]))continue;var y=SO(c[I]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[L]||[];m[L]=U,U.push(y)}me(m,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tu(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function iE(c){this.za=0,this.i=[],this.j=new pu,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tu("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tu("baseRetryDelayMs",5e3,c),this.Za=Tu("retryDelaySeedMs",1e4,c),this.Ta=Tu("forwardChannelMaxRetries",2,c),this.va=Tu("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new $0(c&&c.concurrentRequestLimit),this.Ba=new FO,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=iE.prototype,n.ka=8,n.I=1,n.connect=function(c,m,y,I){rn(0),this.W=c,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=pE(this,null,this.W),Wh(this)};function Bm(c){if(oE(c),c.I==3){var m=c.V++,y=kr(c.J);if(Qe(y,"SID",c.M),Qe(y,"RID",m),Qe(y,"TYPE","terminate"),Iu(c,y),m=new js(c,c.j,m),m.M=2,m.A=$h(kr(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=mE(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Uh(m)}fE(c)}function qh(c){c.g&&(qm(c),c.g.cancel(),c.g=null)}function oE(c){qh(c),c.v&&(o.clearTimeout(c.v),c.v=null),Kh(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Wh(c){if(!B0(c.h)&&!c.m){c.m=!0;var m=c.Ea;D||x(),F||(D(),F=!0),S.add(m,c),c.D=0}}function zO(c,m){return z0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=fu(u(c.Ea,c,m),dE(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new js(this,this.j,c);let U=this.o;if(this.U&&(U?(U=Le(U),re(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=lE(this,L,m),y=kr(this.J),Qe(y,"RID",c),Qe(y,"CVER",22),this.G&&Qe(y,"X-HTTP-Session-Id",this.G),Iu(this,y),U&&(this.R?m="headers="+mu(eE(U))+"&"+m:this.u&&$m(y,this.u,U)),Mm(this.h,L),this.Ra&&Qe(y,"TYPE","init"),this.S?(Qe(y,"$req",m),Qe(y,"SID","null"),L.U=!0,jm(L,y,null)):jm(L,y,m),this.I=2}}else this.I==3&&(c?aE(this,c):this.i.length==0||B0(this.h)||aE(this))};function aE(c,m){var y;m?y=m.l:y=c.V++;const I=kr(c.J);Qe(I,"SID",c.M),Qe(I,"RID",y),Qe(I,"AID",c.K),Iu(c,I),c.u&&c.o&&$m(I,c.u,c.o),y=new js(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=lE(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Mm(c.h,y),jm(y,I,m)}function Iu(c,m){c.H&&ce(c.H,function(y,I){Qe(m,I,y)}),c.l&&ce({},function(y,I){Qe(m,I,y)})}function lE(c,m,y){y=Math.min(c.i.length,y);const I=c.l?u(c.l.Ka,c.l,c):null;e:{var L=c.i;let be=-1;for(;;){const At=["count="+y];be==-1?y>0?(be=L[0].g,At.push("ofs="+be)):be=0:At.push("ofs="+be);let ze=!0;for(let Dt=0;Dt<y;Dt++){var U=L[Dt].g;const Rr=L[Dt].map;if(U-=be,U<0)be=Math.max(0,L[Dt].g-100),ze=!1;else try{U="req"+U+"_"||"";try{var G=Rr instanceof Map?Rr:Object.entries(Rr);for(const[Zi,Ms]of G){let Fs=Ms;a(Ms)&&(Fs=Ve(Ms)),At.push(U+Zi+"="+encodeURIComponent(Fs))}}catch(Zi){throw At.push(U+"type="+encodeURIComponent("_badmap")),Zi}}catch{I&&I(Rr)}}if(ze){G=At.join("&");break e}}G=void 0}return c=c.i.splice(0,y),m.G=c,G}function uE(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;D||x(),F||(D(),F=!0),S.add(m,c),c.A=0}}function zm(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=fu(u(c.Da,c),dE(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,cE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=fu(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),qh(this),cE(this))};function qm(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function cE(c){c.g=new js(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=kr(c.na);Qe(m,"RID","rpc"),Qe(m,"SID",c.M),Qe(m,"AID",c.K),Qe(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qe(m,"TO",c.ia),Qe(m,"TYPE","xmlhttp"),Iu(c,m),c.u&&c.o&&$m(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=$h(kr(m)),y.u=null,y.R=!0,M0(y,c)}n.Va=function(){this.C!=null&&(this.C=null,qh(this),zm(this),rn(19))};function Kh(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function hE(c,m){var y=null;if(c.g==m){Kh(c),qm(c),c.g=null;var I=2}else if(Lm(c.h,m))y=m.G,q0(c.h,m),I=1;else return;if(c.I!=0){if(m.o)if(I==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=c.D;I=Ji(),P(I,new O0(I,y)),Wh(c)}else uE(c);else if(L=m.m,L==3||L==0&&m.X>0||!(I==1&&zO(c,m)||I==2&&zm(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),L){case 1:Xi(c,5);break;case 4:Xi(c,10);break;case 3:Xi(c,6);break;default:Xi(c,2)}}}function dE(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function Xi(c,m){if(c.j.info("Error code "+m),m==2){var y=u(c.bb,c),I=c.Ua;const L=!I;I=new Ds(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yu(I,"https"),$h(I),L?LO(I.toString(),y):MO(I.toString(),y)}else rn(2);c.I=0,c.l&&c.l.pa(m),fE(c),oE(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function fE(c){if(c.I=0,c.ja=[],c.l){const m=W0(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function pE(c,m,y){var I=y instanceof Ds?kr(y):new Ds(y);if(I.g!="")m&&(I.g=m+"."+I.g),_u(I,I.u);else{var L=o.location;I=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const U=new Ds(null);I&&yu(U,I),m&&(U.g=m),L&&_u(U,L),y&&(U.h=y),I=U}return y=c.G,m=c.wa,y&&m&&Qe(I,y,m),Qe(I,"VER",c.ka),Iu(c,I),I}function mE(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new ut(new Um({ab:y})):new ut(c.ma),m.Fa(c.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gE(){}n=gE.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hh(){}Hh.prototype.g=function(c,m){return new kn(c,m)};function kn(c,m){St.call(this),this.g=new iE(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!k(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new da(this)}d(kn,St),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Bm(this.g)},kn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=Ve(c),c=y);m.i.push(new RO(m.Ya++,c)),m.I==3&&Wh(m)},kn.prototype.N=function(){this.g.l=null,delete this.j,Bm(this.g),delete this.g,kn.Z.N.call(this)};function yE(c){Gi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}d(yE,Gi);function _E(){hu.call(this),this.status=1}d(_E,hu);function da(c){this.g=c}d(da,gE),da.prototype.ra=function(){P(this.g,"a")},da.prototype.qa=function(c){P(this.g,new yE(c))},da.prototype.pa=function(c){P(this.g,new _E)},da.prototype.oa=function(){P(this.g,"b")},Hh.prototype.createWebChannel=Hh.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,fR=function(){return new Hh},dR=function(){return Ji()},hR=Ar,r_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fh.NO_ERROR=0,Fh.TIMEOUT=8,Fh.HTTP_ERROR=6,Qd=Fh,j0.COMPLETE="complete",cR=j0,Lh.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",St.prototype.listen=St.prototype.J,Hu=Lh,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,uR=ut}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const Ax="@firebase/firestore",kx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Gp("@firebase/firestore");function Sa(){return Ko.logLevel}function q(n,...e){if(Ko.logLevel<=Ae.DEBUG){const t=e.map(ww);Ko.debug(`Firestore (${nu}): ${n}`,...t)}}function un(n,...e){if(Ko.logLevel<=Ae.ERROR){const t=e.map(ww);Ko.error(`Firestore (${nu}): ${n}`,...t)}}function Ho(n,...e){if(Ko.logLevel<=Ae.WARN){const t=e.map(ww);Ko.warn(`Firestore (${nu}): ${n}`,...t)}}function ww(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pR(n,r,t)}function pR(n,e,t){let r=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw un(r),new Error(r)}function ue(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||pR(e,s,r)}function ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}}class a6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class l6{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ue(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Kr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Kr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new mR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class u6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new u6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ue(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=d6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ge(n,e){return n<e?-1:n>e?1:0}function s_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Cg(s)===Cg(i)?ge(s,i):Cg(s)?1:-1}return ge(n.length,e.length)}const f6=55296,p6=57343;function Cg(n){const e=n.charCodeAt(0);return e>=f6&&e<=p6}function Al(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function gR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="__name__";class Or{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Or.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ge(e.length,t.length)}static compareSegments(e,t){const r=Or.isNumericId(e),s=Or.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Or.extractNumericId(e).compare(Or.extractNumericId(t)):s_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class De extends Or{construct(e,t,r){return new De(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new De(t)}static emptyPath(){return new De([])}}const m6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Or{construct(e,t,r){return new st(e,t,r)}static isValidIdentifier(e){return m6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Px}static keyField(){return new st([Px])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(t)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(De.fromString(e))}static fromName(e){return new X(De.fromString(e).popFirst(5))}static empty(){return new X(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return De.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e,t){if(!t)throw new J(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g6(n,e,t,r){if(e===!0&&r===!0)throw new J(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cx(n){if(!X.isDocumentKey(n))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nx(n){if(X.isDocumentKey(n))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _R(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie(12329,{type:typeof n})}function ws(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=em(n);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,e){const t={typeString:n};return e&&(t.value=e),t}function Th(n,e){if(!_R(n))throw new J(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new J(B.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=-62135596800,jx=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jx);return new Me(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ox)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jx}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Th(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:Et("string",Me._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Me(0,0))}static max(){return new de(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=-1;class Gf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function i_(n){return n.fields.find(e=>e.kind===2)}function oo(n){return n.fields.filter(e=>e.kind!==2)}Gf.UNKNOWN_ID=-1;class Yd{constructor(e,t){this.fieldPath=e,this.kind=t}}class qc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qc(0,Fn.min())}}function y6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Me(t+1,0):new Me(t,r));return new Fn(s,X.empty(),e)}function vR(n){return new Fn(n.readTime,n.key,zc)}class Fn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fn(de.min(),X.empty(),zc)}static max(){return new Fn(de.max(),X.empty(),zc)}}function bw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ER{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==wR)throw n;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):V.reject(t)}static resolve(e){return new V((t,r)=>{t(e)})}static reject(e){return new V((t,r)=>{r(e)})}static waitFor(e){return new V((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=V.resolve(!1);for(const r of e)t=t.next(s=>s?V.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,t){return new V((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="SimpleDb";class tm{static open(e,t,r,s){try{return new tm(t,e.transaction(s,r))}catch(i){throw new dc(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Kr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new dc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=xw(r.target.error);this.S.reject(new dc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new v6(t)}}class Ti{static delete(e){return q(Pn,"Removing database:",e),ho(Wk().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tw())return!1;if(Ti.F())return!0;const e=Pt(),t=Ti.M(e),r=0<t&&t<10,s=bR(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ti.M(Pt())===12.2&&un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Pn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new dc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new dc(e,o))},s.onupgradeneeded=i=>{q(Pn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next(()=>{q(Pn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=tm.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(q(Pn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _6{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ho(this.U.delete())}}class dc extends J{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zi(n){return n.name==="IndexedDbTransactionError"}class v6{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(q(Pn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(q(Pn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ho(r)}add(e){return q(Pn,"ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next(t=>(t===void 0&&(t=null),q(Pn,"GET",this.store.name,e,t),t))}delete(e){return q(Pn,"DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return q(Pn,"COUNT",this.store.name),ho(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new V((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.H(i,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new V((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Z(e,t){q(Pn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new V((r,s)=>{t.onerror=i=>{const o=xw(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,t){const r=[];return new V((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new _6(a),u=t(a.primaryKey,a.value,l);if(u instanceof V){const h=u.catch(d=>(l.done(),V.reject(d)));r.push(h)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(n){return new V((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=xw(r.target.error);t(s)}})}let Dx=!1;function xw(n){const e=Ti.M(Pt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dx||(Dx=!0,setTimeout(()=>{throw r},0)),r}}return n}const fc="IndexBackfiller";class w6{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(fc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();q(fc,`Documents written: ${t}`)}catch(t){zi(t)?q(fc,"Ignoring IndexedDB error during index backfill: ",t):await ia(t)}await this.re(6e4)})}}class E6{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let s=t,i=!0;return V.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q(fc,`Processing collection: ${o}`),this.oe(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>t-s)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(s,i)).next(a=>(q(fc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}_e(e,t){let r=e;return t.changes.forEach((s,i)=>{const o=vR(i);bw(o,r)>0&&(r=o)}),new Fn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=-1;function nm(n){return n==null}function Wc(n){return n===0&&1/n==-1/0}function b6(n){return typeof n=="number"&&Number.isInteger(n)&&!Wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="";function tn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vx(e)),e=x6(n.get(t),e);return Vx(e)}function x6(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Jf:t+="";break;default:t+=i}}return t}function Vx(n){return n+Jf+""}function $r(n){const e=n.length;if(ue(e>=2,64408,{path:n}),e===2)return ue(n.charAt(0)===Jf&&n.charAt(1)==="",56145,{path:n}),De.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(Jf,i);switch((o<0||o>t)&&ie(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:ie(61167,{path:n})}i=o+2}return new De(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="remoteDocuments",Ih="owner",ma="owner",Kc="mutationQueues",T6="userId",fr="mutations",Lx="batchId",xo="userMutationsIndex",Mx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n,e){return[n,tn(e)]}function xR(n,e,t){return[n,tn(e),t]}const I6={},kl="documentMutations",Qf="remoteDocumentsV14",S6=["prefixPath","collectionGroup","readTime","documentId"],Zd="documentKeyIndex",A6=["prefixPath","collectionGroup","documentId"],TR="collectionGroupIndex",k6=["collectionGroup","readTime","prefixPath","documentId"],Hc="remoteDocumentGlobal",o_="remoteDocumentGlobalKey",Rl="targets",IR="queryTargetsIndex",R6=["canonicalId","targetId"],Pl="targetDocuments",P6=["targetId","path"],Tw="documentTargetsIndex",C6=["path","targetId"],Yf="targetGlobalKey",jo="targetGlobal",Gc="collectionParents",N6=["collectionId","parent"],Cl="clientMetadata",O6="clientId",rm="bundles",j6="bundleId",sm="namedQueries",D6="name",Iw="indexConfiguration",V6="indexId",a_="collectionGroupIndex",L6="collectionGroup",pc="indexState",M6=["indexId","uid"],SR="sequenceNumberIndex",F6=["uid","sequenceNumber"],mc="indexEntries",U6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AR="documentKeyIndex",$6=["indexId","uid","orderedDocumentKey"],im="documentOverlays",B6=["userId","collectionPath","documentId"],l_="collectionPathOverlayIndex",z6=["userId","collectionPath","largestBatchId"],kR="collectionGroupOverlayIndex",q6=["userId","collectionGroup","largestBatchId"],Sw="globals",W6="name",RR=[Kc,fr,kl,ao,Rl,Ih,jo,Pl,Cl,Hc,Gc,rm,sm],K6=[...RR,im],PR=[Kc,fr,kl,Qf,Rl,Ih,jo,Pl,Cl,Hc,Gc,rm,sm,im],CR=PR,Aw=[...CR,Iw,pc,mc],H6=Aw,NR=[...Aw,Sw],G6=NR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends ER{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Nt(n,e){const t=ye(n);return Ti.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}}class gd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ux(this.data.getIterator())}getIteratorFrom(e){return new Ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $e)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $e(this.comparator);return t.data=e,t}}class Ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ga(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new $e(st.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jR("Invalid base64 string: "+i):i}}(e);return new Tt(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const J6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(n){if(ue(!!n,39018),typeof n=="string"){let e=0;const t=J6.exec(n);if(ue(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="server_timestamp",VR="__type__",LR="__previous_value__",MR="__local_write_time__";function kw(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[VR])==null?void 0:r.stringValue)===DR}function om(n){const e=n.mapValue.fields[LR];return kw(e)?om(e):e}function Jc(n){const e=Es(n.mapValue.fields[MR].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Xf="(default)";class Go{constructor(e,t){this.projectId=e,this.database=t||Xf}static empty(){return new Go("","")}get isDefaultDatabase(){return this.database===Xf}isEqual(e){return e instanceof Go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__type__",FR="__max__",hi={mapValue:{fields:{__type__:{stringValue:FR}}}},Pw="__vector__",Nl="value",ef={nullValue:"NULL_VALUE"};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kw(n)?4:UR(n)?9007199254740991:am(n)?10:11:ie(28295,{value:n})}function Yr(n,e){if(n===e)return!0;const t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jc(n).isEqual(Jc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Es(s.timestampValue),a=Es(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return bs(s.bytesValue).isEqual(bs(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=et(s.doubleValue),a=et(i.doubleValue);return o===a?Wc(o)===Wc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Al(n.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Fx(o)!==Fx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Yr(o[l],a[l])))return!1;return!0}(n,e);default:return ie(52216,{left:n})}}function Qc(n,e){return(n.values||[]).find(t=>Yr(t,e))!==void 0}function Ni(n,e){if(n===e)return 0;const t=Ci(n),r=Ci(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=et(i.integerValue||i.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return $x(n.timestampValue,e.timestampValue);case 4:return $x(Jc(n),Jc(e));case 5:return s_(n.stringValue,e.stringValue);case 6:return function(i,o){const a=bs(i),l=bs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ge(a[u],l[u]);if(h!==0)return h}return ge(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ge(et(i.latitude),et(o.latitude));return a!==0?a:ge(et(i.longitude),et(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bx(n.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,w,E;const a=i.fields||{},l=o.fields||{},u=(p=a[Nl])==null?void 0:p.arrayValue,h=(g=l[Nl])==null?void 0:g.arrayValue,d=ge(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:Bx(u,h)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===hi.mapValue&&o===hi.mapValue)return 0;if(i===hi.mapValue)return 1;if(o===hi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=s_(l[d],h[d]);if(p!==0)return p;const g=Ni(a[l[d]],u[h[d]]);if(g!==0)return g}return ge(l.length,h.length)}(n.mapValue,e.mapValue);default:throw ie(23264,{he:t})}}function $x(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);const t=Es(n),r=Es(e),s=ge(t.seconds,r.seconds);return s!==0?s:ge(t.nanos,r.nanos)}function Bx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ni(t[s],r[s]);if(i)return i}return ge(t.length,r.length)}function Ol(n){return c_(n)}function c_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return bs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=c_(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${c_(t.fields[o])}`;return s+"}"}(n.mapValue):ie(61005,{value:n})}function tf(n){switch(Ci(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=om(n);return e?16+tf(e):16;case 5:return 2*n.stringValue.length;case 6:return bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+tf(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return oa(r.fields,(i,o)=>{s+=i.length+tf(o)}),s}(n.mapValue);default:throw ie(13486,{value:n})}}function Yc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function h_(n){return!!n&&"integerValue"in n}function Xc(n){return!!n&&"arrayValue"in n}function zx(n){return!!n&&"nullValue"in n}function qx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nf(n){return!!n&&"mapValue"in n}function am(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Rw])==null?void 0:r.stringValue)===Pw}function gc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return oa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return{...n}}function UR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FR}const $R={mapValue:{fields:{[Rw]:{stringValue:Pw},[Nl]:{arrayValue:{}}}}};function Y6(n){return"nullValue"in n?ef:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yc(Go.empty(),X.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?am(n)?$R:{mapValue:{}}:ie(35942,{value:n})}function X6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yc(Go.empty(),X.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?$R:"mapValue"in n?am(n)?{mapValue:{}}:hi:ie(61959,{value:n})}function Wx(n,e){const t=Ni(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Kx(n,e){const t=Ni(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=gc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());nf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];nf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){oa(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new En(gc(this.value))}}function BR(n){const e=[];return oa(n.fields,(t,r)=>{const s=new st([t]);if(nf(r)){const i=BR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,de.min(),de.min(),de.min(),En.empty(),0)}static newFoundDocument(e,t,r,s){return new dt(e,1,t,de.min(),r,s,0)}static newNoDocument(e,t){return new dt(e,2,t,de.min(),de.min(),En.empty(),0)}static newUnknownDocument(e,t){return new dt(e,3,t,de.min(),de.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t){this.position=e,this.inclusive=t}}function Hx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),t.key):r=Ni(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{}class ke extends zR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new e3(e,t,r):t==="array-contains"?new r3(e,r):t==="in"?new JR(e,r):t==="not-in"?new s3(e,r):t==="array-contains-any"?new i3(e,r):new ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new t3(e,r):new n3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ni(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ni(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fe extends zR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fe(e,t)}matches(e){return Dl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dl(n){return n.op==="and"}function d_(n){return n.op==="or"}function Cw(n){return qR(n)&&Dl(n)}function qR(n){for(const e of n.filters)if(e instanceof Fe)return!1;return!0}function f_(n){if(n instanceof ke)return n.field.canonicalString()+n.op.toString()+Ol(n.value);if(Cw(n))return n.filters.map(e=>f_(e)).join(",");{const e=n.filters.map(t=>f_(t)).join(",");return`${n.op}(${e})`}}function WR(n,e){return n instanceof ke?function(r,s){return s instanceof ke&&r.op===s.op&&r.field.isEqual(s.field)&&Yr(r.value,s.value)}(n,e):n instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&WR(o,s.filters[a]),!0):!1}(n,e):void ie(19439)}function KR(n,e){const t=n.filters.concat(e);return Fe.create(t,n.op)}function HR(n){return n instanceof ke?function(t){return`${t.field.canonicalString()} ${t.op} ${Ol(t.value)}`}(n):n instanceof Fe?function(t){return t.op.toString()+" {"+t.getFilters().map(HR).join(" ,")+"}"}(n):"Filter"}class e3 extends ke{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){const t=X.comparator(e.key,this.key);return this.matchesComparison(t)}}class t3 extends ke{constructor(e,t){super(e,"in",t),this.keys=GR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class n3 extends ke{constructor(e,t){super(e,"not-in",t),this.keys=GR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}class r3 extends ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xc(t)&&Qc(t.arrayValue,this.value)}}class JR extends ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qc(this.value.arrayValue,t)}}class s3 extends ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qc(this.value.arrayValue,t)}}class i3 extends ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function p_(n,e=null,t=[],r=[],s=null,i=null,o=null){return new o3(n,e,t,r,s,i,o)}function Jo(n){const e=ye(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>f_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),nm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ol(r)).join(",")),e.Te=t}return e.Te}function Sh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Z6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gx(n.startAt,e.startAt)&&Gx(n.endAt,e.endAt)}function ep(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tp(n,e){return n.filters.filter(t=>t instanceof ke&&t.field.isEqual(e))}function Jx(n,e,t){let r=ef,s=!0;for(const i of tp(n,e)){let o=ef,a=!0;switch(i.op){case"<":case"<=":o=Y6(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=ef}Wx({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];Wx({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function Qx(n,e,t){let r=hi,s=!0;for(const i of tp(n,e)){let o=hi,a=!0;switch(i.op){case">=":case">":o=X6(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=hi}Kx({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];Kx({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function a3(n,e,t,r,s,i,o,a){return new Ah(n,e,t,r,s,i,o,a)}function lm(n){return new Ah(n)}function Yx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function QR(n){return n.collectionGroup!==null}function yc(n){const e=ye(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $e(st.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Zf(i,r))}),t.has(st.keyField().canonicalString())||e.Ie.push(new Zf(st.keyField(),r))}return e.Ie}function Xn(n){const e=ye(n);return e.Ee||(e.Ee=l3(e,yc(n))),e.Ee}function l3(n,e){if(n.limitType==="F")return p_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Zf(s.field,i)});const t=n.endAt?new jl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jl(n.startAt.position,n.startAt.inclusive):null;return p_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function m_(n,e){const t=n.filters.concat([e]);return new Ah(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function g_(n,e,t){return new Ah(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function um(n,e){return Sh(Xn(n),Xn(e))&&n.limitType===e.limitType}function YR(n){return`${Jo(Xn(n))}|lt:${n.limitType}`}function Aa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>HR(s)).join(", ")}]`),nm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ol(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ol(s)).join(",")),`Target(${r})`}(Xn(n))}; limitType=${n.limitType})`}function kh(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of yc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=Hx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,yc(r),s)||r.endAt&&!function(o,a,l){const u=Hx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,yc(r),s))}(n,e)}function u3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XR(n){return(e,t)=>{let r=!1;for(const s of yc(n)){const i=c3(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function c3(n,e,t){const r=n.field.isKeyField()?X.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Ni(l,u):ie(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return OR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=new nt(X.comparator);function Dn(){return h3}const ZR=new nt(X.comparator);function Gu(...n){let e=ZR;for(const t of n)e=e.insert(t.key,t);return e}function eP(n){let e=ZR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Br(){return _c()}function tP(){return _c()}function _c(){return new As(n=>n.toString(),(n,e)=>n.isEqual(e))}const d3=new nt(X.comparator),f3=new $e(X.comparator);function Te(...n){let e=f3;for(const t of n)e=e.add(t);return e}const p3=new $e(ge);function m3(){return p3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function nP(n){return{integerValue:""+n}}function g3(n,e){return b6(e)?nP(e):Nw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this._=void 0}}function y3(n,e,t){return n instanceof Vl?function(s,i){const o={fields:{[VR]:{stringValue:DR},[MR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kw(i)&&(i=om(i)),i&&(o.fields[LR]=i),{mapValue:o}}(t,e):n instanceof Ll?sP(n,e):n instanceof Ml?iP(n,e):function(s,i){const o=rP(s,i),a=Xx(o)+Xx(s.Ae);return h_(o)&&h_(s.Ae)?nP(a):Nw(s.serializer,a)}(n,e)}function _3(n,e,t){return n instanceof Ll?sP(n,e):n instanceof Ml?iP(n,e):t}function rP(n,e){return n instanceof Zc?function(r){return h_(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vl extends cm{}class Ll extends cm{constructor(e){super(),this.elements=e}}function sP(n,e){const t=oP(e);for(const r of n.elements)t.some(s=>Yr(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ml extends cm{constructor(e){super(),this.elements=e}}function iP(n,e){let t=oP(e);for(const r of n.elements)t=t.filter(s=>!Yr(s,r));return{arrayValue:{values:t}}}class Zc extends cm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xx(n){return et(n.integerValue||n.doubleValue)}function oP(n){return Xc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.field=e,this.transform=t}}function v3(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Ll&&s instanceof Ll||r instanceof Ml&&s instanceof Ml?Al(r.elements,s.elements,Yr):r instanceof Zc&&s instanceof Zc?Yr(r.Ae,s.Ae):r instanceof Vl&&s instanceof Vl}(n.transform,e.transform)}class w3{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let hm=class{};function lP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ow(n.key,Tn.none()):new ru(n.key,n.data,Tn.none());{const t=n.data,r=En.empty();let s=new $e(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qi(n.key,r,new Jn(s.toArray()),Tn.none())}}function E3(n,e,t){n instanceof ru?function(s,i,o){const a=s.value.clone(),l=eT(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof qi?function(s,i,o){if(!rf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=eT(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(uP(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function vc(n,e,t,r){return n instanceof ru?function(i,o,a,l){if(!rf(i.precondition,o))return a;const u=i.value.clone(),h=tT(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof qi?function(i,o,a,l){if(!rf(i.precondition,o))return a;const u=tT(i.fieldTransforms,l,o),h=o.data;return h.setAll(uP(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(i,o,a){return rf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function b3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=rP(r.transform,s||null);i!=null&&(t===null&&(t=En.empty()),t.set(r.field,i))}return t||null}function Zx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Al(r,s,(i,o)=>v3(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ru extends hm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qi extends hm{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eT(n,e,t){const r=new Map;ue(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_3(o,a,t[s]))}return r}function tT(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,y3(i,o,e))}return r}class Ow extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cP extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&E3(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tP();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=lP(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Te())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(t,r)=>Zx(t,r))&&Al(this.baseMutations,e.baseMutations,(t,r)=>Zx(t,r))}}class Dw{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return d3}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Dw(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Re;function T3(n){switch(n){case B.OK:return ie(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ie(15467,{code:n})}}function hP(n){if(n===void 0)return un("GRPC error has no .code"),B.UNKNOWN;switch(n){case gt.OK:return B.OK;case gt.CANCELLED:return B.CANCELLED;case gt.UNKNOWN:return B.UNKNOWN;case gt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case gt.INTERNAL:return B.INTERNAL;case gt.UNAVAILABLE:return B.UNAVAILABLE;case gt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case gt.NOT_FOUND:return B.NOT_FOUND;case gt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case gt.ABORTED:return B.ABORTED;case gt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case gt.DATA_LOSS:return B.DATA_LOSS;default:return ie(39323,{code:n})}}(Re=gt||(gt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=new xi([4294967295,4294967295],0);function nT(n){const e=I3().encode(n),t=new lR;return t.update(e),new Uint8Array(t.digest())}function rT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xi([t,r],0),new xi([s,i],0)]}class Lw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(r<0)throw new Ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(xi.fromNumber(r)));return s.compare(S3)===1&&(s=new xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nT(e),[r,s]=rT(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lw(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const t=nT(e),[r,s]=rT(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Rh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dm(de.min(),s,new nt(ge),Dn(),Te())}}class Rh{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rh(r,t,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class dP{constructor(e,t){this.targetId=e,this.Ce=t}}class fP{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class sT{constructor(){this.ve=0,this.Fe=iT(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),t=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}}),new Rh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=iT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class A3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.Je=yd(),this.He=yd(),this.Ye=new nt(ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(ep(i))if(r===0){const o=new X(i.path);this.et(t,o,dt.newNoDocument(o,de.min()))}else ue(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=bs(r).toUint8Array()}catch(l){if(l instanceof jR)return Ho("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Lw(o,s,i)}catch(l){return Ho(l instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(t,i,null),s++)}),s}Tt(e){const t=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ep(a.target)){const l=new X(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,dt.newNoDocument(l,e))}i.Be&&(t.set(o,i.ke()),i.qe())}});let r=Te();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new dm(e,t,this.Ye,this.je,r);return this.je=Dn(),this.Je=yd(),this.He=yd(),this.Ye=new nt(ge),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $e(ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $e(ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sT),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yd(){return new nt(X.comparator)}function iT(){return new nt(X.comparator)}const k3={asc:"ASCENDING",desc:"DESCENDING"},R3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P3={and:"AND",or:"OR"};class C3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y_(n,e){return n.useProto3Json||nm(e)?e:{value:e}}function Fl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N3(n,e){return Fl(n,e.toTimestamp())}function dn(n){return ue(!!n,49232),de.fromTimestamp(function(t){const r=Es(t);return new Me(r.seconds,r.nanos)}(n))}function Mw(n,e){return __(n,e).canonicalString()}function __(n,e){const t=function(s){return new De(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mP(n){const e=De.fromString(n);return ue(TP(e),10190,{key:e.toString()}),e}function np(n,e){return Mw(n.databaseId,e.path)}function Do(n,e){const t=mP(e);if(t.get(1)!==n.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(_P(t))}function gP(n,e){return Mw(n.databaseId,e)}function yP(n){const e=mP(n);return e.length===4?De.emptyPath():_P(e)}function v_(n){return new De(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _P(n){return ue(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oT(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function O3(n,e,t){const r=Do(n,e.name),s=dn(e.updateTime),i=e.createTime?dn(e.createTime):de.min(),o=new En({mapValue:{fields:e.fields}}),a=dt.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function j3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ue(h===void 0||typeof h=="string",58123),Tt.fromBase64String(h||"")):(ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Tt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:hP(u.code);return new J(h,u.message||"")}(o);t=new fP(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Do(n,r.document.name),i=dn(r.document.updateTime),o=r.document.createTime?dn(r.document.createTime):de.min(),a=new En({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new sf(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Do(n,r.document),i=r.readTime?dn(r.readTime):de.min(),o=dt.newNoDocument(s,i),a=r.removedTargetIds||[];t=new sf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Do(n,r.document),i=r.removedTargetIds||[];t=new sf([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new x3(s,i),a=r.targetId;t=new dP(a,o)}}return t}function rp(n,e){let t;if(e instanceof ru)t={update:oT(n,e.key,e.value)};else if(e instanceof Ow)t={delete:np(n,e.key)};else if(e instanceof qi)t={update:oT(n,e.key,e.data),updateMask:U3(e.fieldMask)};else{if(!(e instanceof cP))return ie(16599,{Vt:e.type});t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N3(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)}(n,e.precondition)),t}function w_(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?Tn.updateTime(dn(i.updateTime)):i.exists!==void 0?Tn.exists(i.exists):Tn.none()}(e.currentDocument):Tn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Vl;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ll(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Ml(h)}else"increment"in a?l=new Zc(o,a.increment):ie(16584,{proto:a});const u=st.fromServerFormat(a.fieldPath);return new aP(u,l)}(n,s)):[];if(e.update){e.update.name;const s=Do(n,e.update.name),i=new En({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Jn(u.map(h=>st.fromServerFormat(h)))}(e.updateMask);return new qi(s,i,o,t,r)}return new ru(s,i,t,r)}if(e.delete){const s=Do(n,e.delete);return new Ow(s,t)}if(e.verify){const s=Do(n,e.verify);return new cP(s,t)}return ie(1463,{proto:e})}function D3(n,e){return n&&n.length>0?(ue(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?dn(s.updateTime):dn(i);return o.isEqual(de.min())&&(o=dn(i)),new w3(o,s.transformResults||[])}(t,e))):[]}function vP(n,e){return{documents:[gP(n,e.path)]}}function wP(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gP(n,s);const i=function(u){if(u.length!==0)return xP(Fe.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ka(p.field),direction:L3(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=y_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:s}}function EP(n){let e=yP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ue(r===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(d){const p=bP(d);return p instanceof Fe&&Cw(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(w){return new Zf(Ra(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,nm(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new jl(g,p)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const p=!d.before,g=d.values||[];return new jl(g,p)}(t.endAt)),a3(e,s,o,i,a,"F",l,u)}function V3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ra(t.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ra(t.unaryFilter.field);return ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ra(t.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ra(t.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(n):n.fieldFilter!==void 0?function(t){return ke.create(Ra(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fe.create(t.compositeFilter.filters.map(r=>bP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(t.compositeFilter.op))}(n):ie(30097,{filter:n})}function L3(n){return k3[n]}function M3(n){return R3[n]}function F3(n){return P3[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Ra(n){return st.fromServerFormat(n.fieldPath)}function xP(n){return n instanceof ke?function(t){if(t.op==="=="){if(qx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(zx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(zx(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:M3(t.op),value:t.value}}}(n):n instanceof Fe?function(t){const r=t.getFilters().map(s=>xP(s));return r.length===1?r[0]:{compositeFilter:{op:F3(t.op),filters:r}}}(n):ie(54877,{filter:n})}function U3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t,r,s,i=de.min(),o=de.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.yt=e}}function $3(n,e){let t;if(e.document)t=O3(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),s=Yo(e.noDocument.readTime);t=dt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie(56709);{const r=X.fromSegments(e.unknownDocument.path),s=Yo(e.unknownDocument.version);t=dt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const i=new Me(s[0],s[1]);return de.fromTimestamp(i)}(e.readTime)),t}function aT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:np(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Fl(i,o.version.toTimestamp()),createTime:Fl(i,o.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Qo(e.version)}}return r}function sp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yo(n){const e=new Me(n.seconds,n.nanoseconds);return de.fromTimestamp(e)}function fo(n,e){const t=(e.baseMutations||[]).map(i=>w_(n.yt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>w_(n.yt,i)),s=Me.fromMillis(e.localWriteTimeMs);return new jw(e.batchId,s,t,r)}function Qu(n){const e=Yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yo(n.lastLimboFreeSnapshotVersion):de.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const o=i.documents.length;return ue(o===1,1966,{count:o}),Xn(lm(yP(i.documents[0])))}(n.query):function(i){return Xn(EP(i))}(n.query),new us(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function SP(n,e){const t=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion);let s;s=ep(e.target)?vP(n.yt,e.target):wP(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jo(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function AP(n){const e=EP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?g_(e,e.limit,"L"):e}function Ng(n,e){return new Vw(e.largestBatchId,w_(n.yt,e.overlayMutation))}function lT(n,e){const t=e.path.lastSegment();return[n,tn(e.path.popLast()),t]}function uT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qo(r.readTime),documentKey:tn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{getBundleMetadata(e,t){return cT(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Yo(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return cT(e).put(function(s){return{bundleId:s.id,createTime:Qo(dn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return hT(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:AP(i.bundledQuery),readTime:Yo(i.readTime)}}(r)})}saveNamedQuery(e,t){return hT(e).put(function(s){return{name:s.name,readTime:Qo(dn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function cT(n){return Nt(n,rm)}function hT(n){return Nt(n,sm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new fm(e,r)}getOverlay(e,t){return Du(e).get(lT(this.userId,t)).next(r=>r?Ng(this.serializer,r):null)}getOverlays(e,t){const r=Br();return V.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((i,o)=>{const a=new Vw(t,o);s.push(this.St(e,a))}),V.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(o=>s.add(tn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Du(e).Z(l_,a))}),V.waitFor(i)}getOverlaysForCollection(e,t,r){const s=Br(),i=tn(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Du(e).J(l_,o).next(a=>{for(const l of a){const u=Ng(this.serializer,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const i=Br();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Du(e).ee({index:kR,range:a},(l,u,h)=>{const d=Ng(this.serializer,u);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>i)}St(e,t){return Du(e).put(function(s,i,o){const[a,l,u]=lT(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rp(s.yt,o.mutation)}}(this.serializer,this.userId,t))}}function Du(n){return Nt(n,im)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{bt(e){return Nt(e,Sw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(et(e.integerValue));else if("doubleValue"in e){const r=et(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Wc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Es(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(bs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?UR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):am(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){var o,a;const r=e.fields||{};this.Ft(t,53);const s=Nl,i=((a=(o=r[s].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(t,15),t.Mt(et(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),X.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}po.Kt=new po;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=255;function q3(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function dT(n){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=q3(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(e/8)}class W3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=dT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=dT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(ya),this.sn(255)}_n(){this.an(ya),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ya?(this.sn(ya),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ya?(this.an(ya),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class K3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class H3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vu{constructor(){this.cn=new W3,this.ln=new K3(this.cn),this.hn=new H3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new mo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:of(this.En),directionalValue:of(this.dn),orderedDocumentKey:of(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Bs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=fT(n.En,e.En),t!==0?t:(t=fT(n.dn,e.dn),t!==0?t:X.comparator(n.In,e.In)))}function fT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function of(n){return e1()?function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r}(n):n}function pT(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(n)}class mT{constructor(e){this.mn=new $e((t,r)=>st.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ue(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=i_(e);if(t!==void 0&&!this.wn(t))return!1;const r=oo(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new $e(st.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Yd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Yd(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Yd(r.field,r.dir==="asc"?0:1)));return new Gf(Gf.UNKNOWN_ID,this.collectionId,t,qc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){var t,r;if(ue(n instanceof ke||n instanceof Fe,20012),n instanceof ke){if(n instanceof JR){const s=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(i=>ke.create(n.field,"==",i)))||[];return Fe.create(s,"or")}return n}const e=n.filters.map(s=>kP(s));return Fe.create(e,n.op)}function G3(n){if(n.getFilters().length===0)return[];const e=x_(kP(n));return ue(RP(e),7391),E_(e)||b_(e)?[e]:e.getFilters()}function E_(n){return n instanceof ke}function b_(n){return n instanceof Fe&&Cw(n)}function RP(n){return E_(n)||b_(n)||function(t){if(t instanceof Fe&&d_(t)){for(const r of t.getFilters())if(!E_(r)&&!b_(r))return!1;return!0}return!1}(n)}function x_(n){if(ue(n instanceof ke||n instanceof Fe,34018),n instanceof ke)return n;if(n.filters.length===1)return x_(n.filters[0]);const e=n.filters.map(r=>x_(r));let t=Fe.create(e,n.op);return t=ip(t),RP(t)?t:(ue(t instanceof Fe,64498),ue(Dl(t),40251),ue(t.filters.length>1,57927),t.filters.reduce((r,s)=>Fw(r,s)))}function Fw(n,e){let t;return ue(n instanceof ke||n instanceof Fe,38388),ue(e instanceof ke||e instanceof Fe,25473),t=n instanceof ke?e instanceof ke?function(s,i){return Fe.create([s,i],"and")}(n,e):gT(n,e):e instanceof ke?gT(e,n):function(s,i){if(ue(s.filters.length>0&&i.filters.length>0,48005),Dl(s)&&Dl(i))return KR(s,i.getFilters());const o=d_(s)?s:i,a=d_(s)?i:s,l=o.filters.map(u=>Fw(u,a));return Fe.create(l,"or")}(n,e),ip(t)}function gT(n,e){if(Dl(e))return KR(e,n.getFilters());{const t=e.filters.map(r=>Fw(n,r));return Fe.create(t,"or")}}function ip(n){if(ue(n instanceof ke||n instanceof Fe,11850),n instanceof ke)return n;const e=n.getFilters();if(e.length===1)return ip(e[0]);if(qR(n))return n;const t=e.map(s=>ip(s)),r=[];return t.forEach(s=>{s instanceof ke?r.push(s):s instanceof Fe&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Fe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.Cn=new Uw}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Fn.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class Uw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new $e(De.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $e(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="IndexedDbIndexManager",_d=new Uint8Array(0);class Q3{constructor(e,t){this.databaseId=t,this.vn=new Uw,this.Fn=new As(r=>Jo(r),(r,s)=>Sh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:r,parent:tn(s)};return _T(e).put(i)}return V.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[gR(t),""],!1,!0);return _T(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==t)break;r.push($r(o.parent))}return r})}addFieldIndex(e,t){const r=Lu(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=va(e);return i.next(a=>{o.put(uT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=Lu(e),s=va(e),i=_a(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Lu(e),r=_a(e),s=va(e);return t.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,t){return V.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new mT(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const r=_a(e);let s=!0;const i=new Map;return V.forEach(this.Mn(t),o=>this.xn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Te();const a=[];return V.forEach(i,(l,u)=>{q(yT,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${Jo(t)}`);const h=function(v,N){const D=i_(N);if(D===void 0)return null;for(const F of tp(v,D.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(u,l),d=function(v,N){const D=new Map;for(const F of oo(N))for(const S of tp(v,F.fieldPath))switch(S.op){case"==":case"in":D.set(F.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return D.set(F.fieldPath.canonicalString(),S.value),Array.from(D.values())}return null}(u,l),p=function(v,N){const D=[];let F=!0;for(const S of oo(N)){const x=S.kind===0?Jx(v,S.fieldPath,v.startAt):Qx(v,S.fieldPath,v.startAt);D.push(x.value),F&&(F=x.inclusive)}return new jl(D,F)}(u,l),g=function(v,N){const D=[];let F=!0;for(const S of oo(N)){const x=S.kind===0?Qx(v,S.fieldPath,v.endAt):Jx(v,S.fieldPath,v.endAt);D.push(x.value),F&&(F=x.inclusive)}return new jl(D,F)}(u,l),w=this.On(l,u,p),E=this.On(l,u,g),T=this.Nn(l,u,d),b=this.Bn(l.indexId,h,w,p.inclusive,E,g.inclusive,T);return V.forEach(b,_=>r.Y(_,t.limit).next(v=>{v.forEach(N=>{const D=X.fromSegments(N.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=G3(Fe.create(e.filters,"and")).map(r=>p_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,i.length),u=l/(t!=null?t.length:1),h=[];for(let d=0;d<l;++d){const p=t?this.Ln(t[d/u]):_d,g=this.kn(e,p,r[d%u],s),w=this.qn(e,p,i[d%u],o),E=a.map(T=>this.kn(e,p,T,!0));h.push(...this.createRange(g,w,E))}return h}kn(e,t,r,s){const i=new mo(e,X.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new mo(e,X.empty(),t,r);return s?i.An():i}xn(e,t){const r=new mT(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const s=this.Mn(t);return V.forEach(s,i=>this.xn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new $e(st.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&r===2?1:r)}Qn(e,t){const r=new Vu;for(const s of oo(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);po.Kt.Dt(i,o)}return r.un()}Ln(e){const t=new Vu;return po.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Vu;return po.Kt.Dt(Yc(this.databaseId,t),r.Pn(function(i){const o=oo(i);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new Vu);let i=0;for(const o of oo(e)){const a=r[i++];for(const l of s)if(this.Un(t,o.fieldPath)&&Xc(a))s=this.Kn(s,o,a);else{const u=l.Pn(o.kind);po.Kt.Dt(a,u)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Vu;l.seed(a.un()),po.Kt.Dt(o,l.Pn(t.kind)),i.push(l)}return i}Un(e,t){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Lu(e),s=va(e);return(t?r.J(a_,IDBKeyRange.bound(t,t)):r.J()).next(i=>{const o=[];return V.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const p=d?new qc(d.sequenceNumber,new Fn(Yo(d.readTime),new X($r(d.documentKey)),d.largestBatchId)):qc.empty(),g=h.fields.map(([w,E])=>new Yd(st.fromServerFormat(w),E));return new Gf(h.indexId,h.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ge(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Lu(e),i=va(e);return this.Gn(e).next(o=>s.J(a_,IDBKeyRange.bound(t,t)).next(a=>V.forEach(a,l=>i.put(uT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return V.forEach(t,(s,i)=>{const o=r.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),V.forEach(a,l=>this.zn(e,s,l).next(u=>{const h=this.jn(i,l);return u.isEqual(h)?V.resolve():this.Jn(e,i,l,u,h)}))))})}Hn(e,t,r,s){return _a(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return _a(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=_a(e);let i=new $e(Bs);return s.ee({index:AR,range:IDBKeyRange.only([r.indexId,this.uid,of(this.$n(r,t))])},(o,a)=>{i=i.add(new mo(r.indexId,t,pT(a.arrayValue),pT(a.directionalValue)))}).next(()=>i)}jn(e,t){let r=new $e(Bs);const s=this.Qn(t,e);if(s==null)return r;const i=i_(t);if(i!=null){const o=e.data.field(i.fieldPath);if(Xc(o))for(const a of o.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.Ln(a),s))}else r=r.add(new mo(t.indexId,e.key,_d,s));return r}Jn(e,t,r,s,i){q(yT,"Updating index entries for document '%s'",t.key);const o=[];return function(l,u,h,d,p){const g=l.getIterator(),w=u.getIterator();let E=ga(g),T=ga(w);for(;E||T;){let b=!1,_=!1;if(E&&T){const v=h(E,T);v<0?_=!0:v>0&&(b=!0)}else E!=null?_=!0:b=!0;b?(d(T),T=ga(w)):_?(p(E),E=ga(g)):(E=ga(g),T=ga(w))}}(s,i,Bs,a=>{o.push(this.Hn(e,t,r,a))},a=>{o.push(this.Yn(e,t,r,a))}),V.waitFor(o)}Gn(e){let t=1;return va(e).ee({index:SR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Bs(o,a)).filter((o,a,l)=>!a||Bs(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Bs(o,e),l=Bs(o,t);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,_d,X.empty()),l=s[o+1].Vn(this.uid,_d,X.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,t){return Bs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vT)}getMinOffset(e,t){return V.mapArray(this.Mn(t),r=>this.xn(e,r).next(s=>s||ie(44426))).next(vT)}}function _T(n){return Nt(n,Gc)}function _a(n){return Nt(n,mc)}function Lu(n){return Nt(n,Iw)}function va(n){return Nt(n,pc)}function vT(n){ue(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;bw(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Fn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PP=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e,t){const r=n.store(fr),s=n.store(kl),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.ee({range:o},(h,d,p)=>(a++,p.delete()));i.push(l.next(()=>{ue(a===1,47070,{batchId:t.batchId})}));const u=[];for(const h of t.mutations){const d=xR(e,h.key.path,t.batchId);i.push(s.delete(d)),u.push(h.key)}return V.waitFor(i).next(()=>u)}function op(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(PP,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class pm{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){ue(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new pm(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).ee({index:xo,range:r},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const i=Pa(e),o=zs(e);return o.add({}).next(a=>{ue(typeof a=="number",49019);const l=new jw(a,t,r,s),u=function(g,w,E){const T=E.baseMutations.map(_=>rp(g.yt,_)),b=E.mutations.map(_=>rp(g.yt,_));return{userId:w,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:T,mutations:b}}(this.serializer,this.userId,l),h=[];let d=new $e((p,g)=>ge(p.canonicalString(),g.canonicalString()));for(const p of s){const g=xR(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,I6))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return zs(e).get(t).next(r=>r?(ue(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),fo(this.serializer,r)):null)}er(e,t){return this.Xn[t]?V.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return zs(e).ee({index:xo,range:s},(o,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=r,47524,{tr:r}),i=fo(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Oo;return zs(e).ee({index:xo,range:t,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Oo],[this.userId,Number.POSITIVE_INFINITY]);return zs(e).J(xo,t).next(r=>r.map(s=>fo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Xd(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Pa(e).ee({range:s},(o,a,l)=>{const[u,h,d]=o,p=$r(h);if(u===this.userId&&t.path.isEqual(p))return zs(e).get(d).next(g=>{if(!g)throw ie(61480,{nr:o,batchId:d});ue(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:d}),i.push(fo(this.serializer,g))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ge);const s=[];return t.forEach(i=>{const o=Xd(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Pa(e).ee({range:a},(u,h,d)=>{const[p,g,w]=u,E=$r(g);p===this.userId&&i.path.isEqual(E)?r=r.add(w):d.done()});s.push(l)}),V.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Xd(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new $e(ge);return Pa(e).ee({range:o},(l,u,h)=>{const[d,p,g]=l,w=$r(p);d===this.userId&&r.isPrefixOf(w)?w.length===s&&(a=a.add(g)):h.done()}).next(()=>this.rr(e,a))}rr(e,t){const r=[],s=[];return t.forEach(i=>{s.push(zs(e).get(i).next(o=>{if(o===null)throw ie(35274,{batchId:i});ue(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(fo(this.serializer,o))}))}),V.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return CP(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),V.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Pa(e).ee({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=$r(i[1]);s.push(l)}else a.done()}).next(()=>{ue(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return NP(e,this.userId,t)}_r(e){return OP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Oo,lastStreamToken:""})}}function NP(n,e,t){const r=Xd(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Pa(n).ee({range:i,X:!0},(a,l,u)=>{const[h,d,p]=a;h===e&&d===s&&(o=!0),u.done()}).next(()=>o)}function zs(n){return Nt(n,fr)}function Pa(n){return Nt(n,kl)}function OP(n){return Nt(n,Kc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xo(0)}static cr(){return new Xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Xo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>de.fromTimestamp(new Me(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wa(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(ue(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let s=0;const i=[];return wa(e).ee((o,a)=>{const l=Qu(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(i)).next(()=>s)}forEachTarget(e,t){return wa(e).ee((r,s)=>{const i=Qu(s);t(i)})}lr(e){return ET(e).get(Yf).next(t=>(ue(t!==null,2888),t))}hr(e,t){return ET(e).put(Yf,t)}Pr(e,t){return wa(e).put(SP(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return wa(e).ee({range:s,index:IR},(o,a,l)=>{const u=Qu(a);Sh(t,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,t,r){const s=[],i=ei(e);return t.forEach(o=>{const a=tn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(s)}removeMatchingKeys(e,t,r){const s=ei(e);return V.forEach(t,i=>{const o=tn(i.path);return V.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=ei(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ei(e);let i=Te();return s.ee({range:r,X:!0},(o,a,l)=>{const u=$r(o[1]),h=new X(u);i=i.add(h)}).next(()=>i)}containsKey(e,t){const r=tn(t.path),s=IDBKeyRange.bound([r],[gR(r)],!1,!0);let i=0;return ei(e).ee({index:Tw,X:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}At(e,t){return wa(e).get(t).next(r=>r?Qu(r):null)}}function wa(n){return Nt(n,Rl)}function ET(n){return Nt(n,jo)}function ei(n){return Nt(n,Pl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="LruGarbageCollector",X3=1048576;function xT([n,e],[t,r]){const s=ge(n,t);return s===0?ge(e,r):s}class Z3{constructor(e){this.Ir=e,this.buffer=new $e(xT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(bT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zi(t)?q(bT,"Ignoring IndexedDB error during garbage collection: ",t):await ia(t)}await this.Vr(3e5)})}}class eB{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Gn.ce);const r=new Z3(t);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(wT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wT):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Sa()<=Ae.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function DP(n,e){return new eB(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,t){this.db=e,this.garbageCollector=DP(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,s)=>t(s))}addReference(e,t,r){return vd(e,r)}removeReference(e,t,r){return vd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vd(e,t)}br(e,t){return function(s,i){let o=!1;return OP(s).te(a=>NP(s,a,i).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(o,a)=>{if(a<=t){const l=this.br(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,de.min()),ei(e).delete(function(d){return[0,tn(d.path)]}(o))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vd(e,t)}Sr(e,t){const r=ei(e);let s,i=Gn.ce;return r.ee({index:Tw},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Gn.ce&&t(new X($r(s)),i),i=u,s=l):i=Gn.ce}).next(()=>{i!==Gn.ce&&t(new X($r(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vd(n,e){return ei(n).put(function(r,s){return{targetId:0,path:tn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.changes=new As(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return eo(e).put(r)}removeEntry(e,t,r){return eo(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sp(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=dt.newInvalidDocument(t);return eo(e).ee({index:Zd,range:IDBKeyRange.only(Mu(t))},(s,i)=>{r=this.Cr(t,i)}).next(()=>r)}vr(e,t){let r={size:0,document:dt.newInvalidDocument(t)};return eo(e).ee({index:Zd,range:IDBKeyRange.only(Mu(t))},(s,i)=>{r={document:this.Cr(t,i),size:op(i)}}).next(()=>r)}getEntries(e,t){let r=Dn();return this.Fr(e,t,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Mr(e,t){let r=Dn(),s=new nt(X.comparator);return this.Fr(e,t,(i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,op(o))}).next(()=>({documents:r,Or:s}))}Fr(e,t,r){if(t.isEmpty())return V.resolve();let s=new $e(ST);t.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Mu(s.first()),Mu(s.last())),o=s.getIterator();let a=o.getNext();return eo(e).ee({index:Zd,range:i},(l,u,h)=>{const d=X.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ST(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(Mu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),sp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Dn();for(const d of u){const p=this.Cr(X.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(kh(t,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,t,r,s){let i=Dn();const o=IT(t,r),a=IT(t,Fn.max());return eo(e).ee({index:TR,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const d=this.Cr(X.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(d.key,d),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new rB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TT(e).get(o_).next(t=>(ue(!!t,20021),t))}Dr(e,t){return TT(e).put(o_,t)}Cr(e,t){if(t){const r=$3(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(de.min())))return r}return dt.newInvalidDocument(e)}}function LP(n){return new nB(n)}class rB extends VP{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new As(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new $e((i,o)=>ge(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=aT(this.Nr.serializer,o);s=s.add(i.path.popLast());const u=op(l);r+=u-a.size,t.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=aT(this.Nr.serializer,o.convertToNoDocument(de.min()));t.push(this.Nr.addEntry(e,i,l))}}),s.forEach(i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Nr.updateMetadata(e,r)),V.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:s})=>(s.forEach((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function TT(n){return Nt(n,Hc)}function eo(n){return Nt(n,Qf)}function Mu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IT(n,e){const t=e.documentKey.path.toArray();return[n,sp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ST(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=ge(t[i],r[i]),s)return s;return s=ge(t.length,r.length),s||(s=ge(t[t.length-2],r[r.length-2]),s||ge(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&vc(r.mutation,s,Jn.empty(),Me.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Te()){const s=Br();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Gu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Te()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=Dn();const o=_c(),a=function(){return _c()}();return t.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof qi)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),vc(h.mutation,u,h.mutation.getFieldMask(),Me.now())):o.set(u.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>a.set(u,new sB(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){const r=_c();let s=new nt((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Jn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=tP();h.forEach(p=>{if(!i.has(p)){const g=lP(t.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):QR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):V.resolve(Br());let a=zc,l=i;return o.next(u=>V.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Te())).next(h=>({batchId:a,changes:eP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Gu();return this.indexManager.getCollectionParents(e,i).next(a=>V.forEach(a,l=>{const u=function(d,p){return new Ah(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,dt.newInvalidDocument(h)))});let a=Gu();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&vc(h.mutation,u,Jn.empty(),Me.now()),kh(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return V.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:dn(s.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(s){return{name:s.name,query:AP(s.bundledQuery),readTime:dn(s.readTime)}}(t)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.overlays=new nt(X.comparator),this.qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Br();return V.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),V.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){const s=Br(),i=t.length+1,o=new X(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new nt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Br(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Br(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return V.resolve(a)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vw(t,r));let i=this.qr.get(t);i===void 0&&(i=Te(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.Qr=new $e(Lt.$r),this.Ur=new $e(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Lt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Lt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new X(new De([])),r=new Lt(t,e),s=new Lt(t,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new X(new De([])),r=new Lt(t,e),s=new Lt(t,e+1);let i=Te();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Lt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return X.comparator(e.key,t.key)||ge(e.Yr,t.Yr)}static Kr(e,t){return ge(e.Yr,t.Yr)||X.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $e(Lt.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jw(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Oo:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Lt(t,0),s=new Lt(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ge);return t.forEach(s=>{const i=new Lt(s,0),o=new Lt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new X(i),0);let a=new $e(ge);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ue(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(t.mutations,s=>{const i=new Lt(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Lt(t,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.ri=e,this.docs=function(){return new nt(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Dn();const o=t.path,a=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||bw(vR(h),r)<=0||(s.has(h.key)||kh(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ie(9500)}ii(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cB(this)}getSize(e){return V.resolve(this.size)}}class cB extends VP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.persistence=e,this.si=new As(t=>Jo(t),Sh),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new $w,this.targetCount=0,this.ai=Xo.ur()}forEachTarget(e,t){return this.si.forEach((r,s)=>t(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),V.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Pr(t),V.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gn(0),this.li=!1,this.li=!0,this.hi=new aB,this.referenceDelegate=e(this),this.Pi=new hB(this),this.indexManager=new J3,this.remoteDocumentCache=function(s){return new uB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new IP(t),this.Ii=new iB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lB(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);const s=new dB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,t){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class dB extends ER{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Ri=new $w,this.Vi=null}static mi(e){return new mm(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const s=X.fromPath(r);return this.gi(e,s).next(i=>{i||t.removeEntry(s,de.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return V.or([()=>V.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ap{constructor(e,t){this.persistence=e,this.pi=new As(r=>tn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=DP(this,t)}static mi(e,t){return new ap(e,t)}Ei(){}di(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return V.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?V.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,i.removeEntry(o,de.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tf(e.data.value)),t}br(e,t,r){return V.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.serializer=e}k(e,t,r,s){const i=new tm("createOrUpgrade",t);r<1&&s>=1&&(function(l){l.createObjectStore(Ih)}(e),function(l){l.createObjectStore(Kc,{keyPath:T6}),l.createObjectStore(fr,{keyPath:Lx,autoIncrement:!0}).createIndex(xo,Mx,{unique:!0}),l.createObjectStore(kl)}(e),AT(e),function(l){l.createObjectStore(ao)}(e));let o=V.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Pl),l.deleteObjectStore(Rl),l.deleteObjectStore(jo)}(e),AT(e)),o=o.next(()=>function(l){const u=l.store(jo),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return u.put(Yf,h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(fr).J().next(d=>{l.deleteObjectStore(fr),l.createObjectStore(fr,{keyPath:Lx,autoIncrement:!0}).createIndex(xo,Mx,{unique:!0});const p=u.store(fr),g=d.map(w=>p.put(w));return V.waitFor(g)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Cl,{keyPath:O6})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.yi(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Hc)}(e),this.wi(i)))),r<7&&s>=7&&(o=o.next(()=>this.Si(i))),r<8&&s>=8&&(o=o.next(()=>this.bi(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Di(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(rm,{keyPath:j6})})(e),function(l){l.createObjectStore(sm,{keyPath:D6})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(im,{keyPath:B6});u.createIndex(l_,z6,{unique:!1}),u.createIndex(kR,q6,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Qf,{keyPath:S6});u.createIndex(Zd,A6),u.createIndex(TR,k6)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(ao))),r<14&&s>=14&&(o=o.next(()=>this.Fi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore(Iw,{keyPath:V6,autoIncrement:!0}).createIndex(a_,L6,{unique:!1}),l.createObjectStore(pc,{keyPath:M6}).createIndex(SR,F6,{unique:!1}),l.createObjectStore(mc,{keyPath:U6}).createIndex(AR,$6,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{t.objectStore(pc).clear()}).next(()=>{t.objectStore(mc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(Sw,{keyPath:W6})})(e)})),r<18&&s>=18&&e1()&&(o=o.next(()=>{t.objectStore(pc).clear()}).next(()=>{t.objectStore(mc).clear()})),o}wi(e){let t=0;return e.store(ao).ee((r,s)=>{t+=op(s)}).next(()=>{const r={byteSize:t};return e.store(Hc).put(o_,r)})}yi(e){const t=e.store(Kc),r=e.store(fr);return t.J().next(s=>V.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Oo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(xo,o).next(a=>V.forEach(a,l=>{ue(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=fo(this.serializer,l);return CP(e,i.userId,u).next(()=>{})}))}))}Si(e){const t=e.store(Pl),r=e.store(ao);return e.store(jo).get(Yf).next(s=>{const i=[];return r.ee((o,a)=>{const l=new De(o),u=function(d){return[0,tn(d)]}(l);i.push(t.get(u).next(h=>h?V.resolve():(d=>t.put({targetId:0,path:tn(d),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(i))})}bi(e,t){e.createObjectStore(Gc,{keyPath:N6});const r=t.store(Gc),s=new Uw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:tn(l)})}};return t.store(ao).ee({X:!0},(o,a)=>{const l=new De(o);return i(l.popLast())}).next(()=>t.store(kl).ee({X:!0},([o,a,l],u)=>{const h=$r(a);return i(h.popLast())}))}Di(e){const t=e.store(Rl);return t.ee((r,s)=>{const i=Qu(s),o=SP(this.serializer,i);return t.put(o)})}Ci(e,t){const r=t.store(ao),s=[];return r.ee((i,o)=>{const a=t.store(Qf),l=function(d){return d.document?new X(De.fromString(d.document.name).popFirst(5)):d.noDocument?X.fromSegments(d.noDocument.path):d.unknownDocument?X.fromSegments(d.unknownDocument.path):ie(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>V.waitFor(s))}Fi(e,t){const r=t.store(fr),s=LP(this.serializer),i=new Bw(mm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??Te();fo(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),V.forEach(a,(l,u)=>{const h=new zt(u),d=fm.wt(this.serializer,h),p=i.getIndexManager(h),g=pm.wt(h,this.serializer,p,i.referenceDelegate);return new MP(s,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new u_(t,Gn.ce),l).next()})})}}function AT(n){n.createObjectStore(Pl,{keyPath:P6}).createIndex(Tw,C6,{unique:!0}),n.createObjectStore(Rl,{keyPath:"targetId"}).createIndex(IR,R6,{unique:!0}),n.createObjectStore(jo)}const qs="IndexedDbPersistence",Og=18e5,jg=5e3,Dg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pB="main";class zw{constructor(e,t,r,s,i,o,a,l,u,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!zw.v())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tB(this,s),this.$i=t+pB,this.serializer=new IP(l),this.Ui=new Ti(this.$i,this.Ni,new fB(this.serializer)),this.hi=new z3,this.Pi=new Y3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LP(this.serializer),this.Ii=new B3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&un(qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,Dg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Gn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(zi(e))return q(qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(qs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Fu(e).get(ma).next(t=>V.resolve(this.es(t)))}ts(e){return wd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Og)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Nt(t,Cl);return r.J().next(s=>{const i=this.ss(s,Og),o=s.filter(a=>i.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Fu(e).get(ma).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,jg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,Dg);return!1}}return!(!this.networkEnabled||!this.inForeground)||wd(e).J().next(r=>this.ss(r,jg).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&q(qs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ih,Cl],e=>{const t=new u_(e,Gn.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>wd(e).J().next(t=>this.ss(t,Og).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return pm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Q3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){q(qs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(l){return l===18?G6:l===17?NR:l===16?H6:l===15?Aw:l===14?CR:l===13?PR:l===12?K6:l===11?RR:void ie(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,s,i,a=>(o=new u_(a,this.ci?this.ci.next():Gn.ce),t==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new J(B.FAILED_PRECONDITION,wR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Fu(e).get(ma).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,jg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,Dg)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fu(e).put(ma,t)}static v(){return Ti.v()}Zi(e){const t=Fu(e);return t.get(ma).next(r=>this.es(r)?(q(qs,"Releasing primary lease."),t.delete(ma)):V.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(un(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Zk()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return q(qs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return un(qs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){un("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fu(n){return Nt(n,Ih)}function wd(n){return Nt(n,Cl)}function mB(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Te(),s=Te();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qw(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Zk()?8:bR(Pt())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new gB;return this.Ss(e,t,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>i.result)}bs(e,t,r,s){return r.documentReadCount<this.fs?(Sa()<=Ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Aa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Sa()<=Ae.DEBUG&&q("QueryEngine","Query:",Aa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Sa()<=Ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Aa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(t))):V.resolve())}ys(e,t){if(Yx(t))return V.resolve(null);let r=Xn(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=g_(t,null,"F"),r=Xn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(t,a);return this.Cs(t,u,o,l.readTime)?this.ys(e,g_(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,r,s){return Yx(t)||s.isEqual(de.min())?V.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,r,s)?V.resolve(null):(Sa()<=Ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Aa(t)),this.vs(e,o,t,y6(s,zc)).next(a=>a))})}Ds(e,t){let r=new $e(XR(e));return t.forEach((s,i)=>{kh(e,i)&&(r=r.add(i))}),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return Sa()<=Ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Aa(t)),this.ps.getDocumentsMatchingQuery(e,t,Fn.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="LocalStore",yB=3e8;class _B{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new nt(ge),this.xs=new As(i=>Jo(i),Sh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function UP(n,e,t,r){return new _B(n,e,t,r)}async function $P(n,e){const t=ye(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function vB(n,e){const t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,p=d.keys();let g=V.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(l,w)).next(E=>{const T=u.docVersions.get(w);ue(T!==null,48541),E.version.compareTo(T)<0&&(d.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function BP(n){const e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function wB(n,e){const t=ye(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;a.push(t.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(i,h.addedDocuments,d)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Tt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),function(E,T,b){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=yB?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&a.push(t.Pi.updateTargetData(i,g))});let l=Dn(),u=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(EB(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(de.min())){const h=t.Pi.getLastRemoteSnapshotVersion(i).next(d=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(t.Ms=s,i))}function EB(n,e,t){let r=Te(),s=Te();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Dn();return t.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(Ww,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:s}})}function bB(n,e){const t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Oo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xB(n,e){const t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Pi.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):t.Pi.allocateTargetId(r).next(o=>(s=new us(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function T_(n,e,t){const r=ye(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zi(o))throw o;q(Ww,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function kT(n,e,t){const r=ye(n);let s=de.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ye(l),p=d.xs.get(h);return p!==void 0?V.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)}(r,o,Xn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?s:de.min(),t?i:Te())).next(a=>(TB(r,u3(e),a),{documents:a,Qs:i})))}function TB(n,e,t){let r=n.Os.get(e)||de.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Os.set(e,r)}class RT{constructor(){this.activeTargetIds=m3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zP{constructor(){this.Mo=new RT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="ConnectivityMonitor";class CT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(PT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(PT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed=null;function I_(){return Ed===null?Ed=function(){return 268435456+Math.round(2147483648*Math.random())}():Ed++,"0x"+Ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",SB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Xf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const o=I_(),a=this.zo(e,t.toUriEncodedString());q(Vg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=Zl(u);return this.Jo(e,a,l,r,h).then(d=>(q(Vg,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ho(Vg,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,t,r,s,i,o){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,t){const r=SB[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class RB extends AB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=I_();return new Promise((a,l)=>{const u=new uR;u.setWithCredentials(!0),u.listenOnce(cR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qd.NO_ERROR:const d=u.getResponseJson();q(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Qd.TIMEOUT:q(Qt,`RPC '${e}' ${o} timed out`),l(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const p=u.getStatus();if(q(Qt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const E=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(w.status);l(new J(E,w.message))}else l(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(B.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(Qt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(Qt,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",h,r,15)})}T_(e,t,r){const s=I_(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fR(),a=dR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(Qt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const w=new kB({Yo:T=>{g?q(Qt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(q(Qt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),q(Qt,`RPC '${e}' stream ${s} sending:`,T),d.send(T))},Zo:()=>d.close()}),E=(T,b,_)=>{T.listen(b,v=>{try{_(v)}catch(N){setTimeout(()=>{throw N},0)}})};return E(d,Hu.EventType.OPEN,()=>{g||(q(Qt,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),E(d,Hu.EventType.CLOSE,()=>{g||(g=!0,q(Qt,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(d))}),E(d,Hu.EventType.ERROR,T=>{g||(g=!0,Ho(Qt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),w.a_(new J(B.UNAVAILABLE,"The operation could not be completed")))}),E(d,Hu.EventType.MESSAGE,T=>{var b;if(!g){const _=T.data[0];ue(!!_,16349);const v=_,N=(v==null?void 0:v.error)||((b=v[0])==null?void 0:b.error);if(N){q(Qt,`RPC '${e}' stream ${s} received error:`,N);const D=N.status;let F=function(A){const R=gt[A];if(R!==void 0)return hP(R)}(D),S=N.message;F===void 0&&(F=B.INTERNAL,S="Unknown error status: "+D+" with message "+N.message),g=!0,w.a_(new J(F,S)),d.close()}else q(Qt,`RPC '${e}' stream ${s} received:`,_),w.u_(_)}}),E(a,hR.STAT_EVENT,T=>{T.stat===r_.PROXY?q(Qt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===r_.NOPROXY&&q(Qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(){return typeof window<"u"?window:null}function af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return new C3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="PersistentStream";class WP{constructor(e,t,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===t&&this.G_(r,s)},r=>{e(()=>{const s=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(NT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(q(NT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CB extends WP{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=j3(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?dn(o.readTime):de.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=v_(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=ep(l)?{documents:vP(i,l)}:{query:wP(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pP(i,o.resumeToken);const u=y_(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Fl(i,o.snapshotVersion.toTimestamp());const u=y_(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=V3(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=v_(this.serializer),t.removeTarget=e,this.q_(t)}}class NB extends WP{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=D3(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=v_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rp(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{}class jB extends OB{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,__(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,__(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class DB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(un(t),this.aa=!1):q("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class VB{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{aa(this)&&(q(Zo,"Restarting streams for network reachability change."),await async function(l){const u=ye(l);u.Ea.add(4),await Ph(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ym(u)}(this))})}),this.Ra=new DB(r,s)}}async function ym(n){if(aa(n))for(const e of n.da)await e(!0)}async function Ph(n){for(const e of n.da)await e(!1)}function KP(n,e){const t=ye(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jw(t)?Gw(t):su(t).O_()&&Hw(t,e))}function Kw(n,e){const t=ye(n),r=su(t);t.Ia.delete(e),r.O_()&&HP(t,e),t.Ia.size===0&&(r.O_()?r.L_():aa(t)&&t.Ra.set("Unknown"))}function Hw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}su(n).Y_(e)}function HP(n,e){n.Va.Ue(e),su(n).Z_(e)}function Gw(n){n.Va=new A3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),su(n).start(),n.Ra.ua()}function Jw(n){return aa(n)&&!su(n).x_()&&n.Ia.size>0}function aa(n){return ye(n).Ea.size===0}function GP(n){n.Va=void 0}async function LB(n){n.Ra.set("Online")}async function MB(n){n.Ia.forEach((e,t)=>{Hw(n,e)})}async function FB(n,e){GP(n),Jw(n)?(n.Ra.ha(e),Gw(n)):n.Ra.set("Unknown")}async function UB(n,e,t){if(n.Ra.set("Online"),e instanceof fP&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(n,e)}catch(r){q(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lp(n,r)}else if(e instanceof sf?n.Va.Ze(e):e instanceof dP?n.Va.st(e):n.Va.tt(e),!t.isEqual(de.min()))try{const r=await BP(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),HP(i,l);const d=new us(h.target,l,u,h.sequenceNumber);Hw(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){q(Zo,"Failed to raise snapshot:",r),await lp(n,r)}}async function lp(n,e,t){if(!zi(e))throw e;n.Ea.add(1),await Ph(n),n.Ra.set("Offline"),t||(t=()=>BP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{q(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ym(n)})}function JP(n,e){return e().catch(t=>lp(n,t,e))}async function Ch(n){const e=ye(n),t=Oi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Oo;for(;$B(e);)try{const s=await bB(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,BB(e,s)}catch(s){await lp(e,s)}QP(e)&&YP(e)}function $B(n){return aa(n)&&n.Ta.length<10}function BB(n,e){n.Ta.push(e);const t=Oi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function QP(n){return aa(n)&&!Oi(n).x_()&&n.Ta.length>0}function YP(n){Oi(n).start()}async function zB(n){Oi(n).ra()}async function qB(n){const e=Oi(n);for(const t of n.Ta)e.ea(t.mutations)}async function WB(n,e,t){const r=n.Ta.shift(),s=Dw.from(r,e,t);await JP(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Ch(n)}async function KB(n,e){e&&Oi(n).X_&&await async function(r,s){if(function(o){return T3(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();Oi(r).B_(),await JP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ch(r)}}(n,e),QP(n)&&YP(n)}async function OT(n,e){const t=ye(n);t.asyncQueue.verifyOperationInProgress(),q(Zo,"RemoteStore received new credentials");const r=aa(t);t.Ea.add(3),await Ph(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ym(t)}async function HB(n,e){const t=ye(n);e?(t.Ea.delete(2),await ym(t)):e||(t.Ea.add(2),await Ph(t),t.Ra.set("Unknown"))}function su(n){return n.ma||(n.ma=function(t,r,s){const i=ye(t);return i.sa(),new CB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Xo:LB.bind(null,n),t_:MB.bind(null,n),r_:FB.bind(null,n),H_:UB.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Jw(n)?Gw(n):n.Ra.set("Unknown")):(await n.ma.stop(),GP(n))})),n.ma}function Oi(n){return n.fa||(n.fa=function(t,r,s){const i=ye(t);return i.sa(),new NB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zB.bind(null,n),r_:KB.bind(null,n),ta:qB.bind(null,n),na:WB.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Ch(n)):(await n.fa.stop(),n.Ta.length>0&&(q(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new Qw(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yw(n,e){if(un("AsyncQueue",`${e}: ${n}`),zi(n))return new J(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static emptySet(e){return new rl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=Gu(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.ga=new nt(X.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ul{constructor(e,t,r,s,i,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ul(e,t,rl.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class JB{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ye(t),i=s.queries;s.queries=DT(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new J(B.ABORTED,"Firestore shutting down"))}}function DT(){return new As(n=>YR(n),um)}async function XP(n,e){const t=ye(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new GB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=Yw(o,`Initialization of query '${Aa(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Xw(t)}async function ZP(n,e){const t=ye(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function QB(n,e){const t=ye(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Xw(t)}function YB(n,e,t){const r=ye(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function Xw(n){n.Ca.forEach(e=>{e.next()})}var S_,VT;(VT=S_||(S_={})).Ma="default",VT.Cache="cache";class eC{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==S_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.key=e}}class nC{constructor(e){this.key=e}}class XB{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=XR(e),this.tu=new rl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new jT,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),g=kh(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;p&&g?p.data.isEqual(g.data)?w!==E&&(r.track({type:3,doc:g}),T=!0):this.su(p,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),T=!0):p&&!g&&(r.track({type:1,doc:p}),T=!0,(l||u)&&(a=!0)),T&&(g?(o=o.add(g),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(g,w){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:T})}};return E(g)-E(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(r),s=s??!1;const a=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ul(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new nC(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new tC(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Te();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zw="SyncEngine";class ZB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class e5{constructor(e){this.key=e,this.hu=!1}}class t5{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new As(a=>YR(a),um),this.Iu=new Map,this.Eu=new Set,this.du=new nt(X.comparator),this.Au=new Map,this.Ru=new $w,this.Vu={},this.mu=new Map,this.fu=Xo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function n5(n,e,t=!0){const r=lC(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rC(r,e,t,!0),s}async function r5(n,e){const t=lC(n);await rC(t,e,!0,!1)}async function rC(n,e,t,r){const s=await xB(n.localStore,Xn(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await s5(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&KP(n.remoteStore,s),a}async function s5(n,e,t,r,s){n.pu=(d,p,g)=>async function(E,T,b,_){let v=T.view.ru(b);v.Cs&&(v=await kT(E.localStore,T.query,!1).then(({documents:S})=>T.view.ru(S,v)));const N=_&&_.targetChanges.get(T.targetId),D=_&&_.targetMismatches.get(T.targetId)!=null,F=T.view.applyChanges(v,E.isPrimaryClient,N,D);return MT(E,T.targetId,F.au),F.snapshot}(n,d,p,g);const i=await kT(n.localStore,e,!0),o=new XB(e,i.Qs),a=o.ru(i.documents),l=Rh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,l);MT(n,t,u.au);const h=new ZB(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function i5(n,e,t){const r=ye(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!um(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await T_(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Kw(r.remoteStore,s.targetId),A_(r,s.targetId)}).catch(ia)):(A_(r,s.targetId),await T_(r.localStore,s.targetId,!0))}async function o5(n,e){const t=ye(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Kw(t.remoteStore,r.targetId))}async function a5(n,e,t){const r=uC(n);try{const s=await function(o,a){const l=ye(o),u=Me.now(),h=a.reduce((g,w)=>g.add(w.key),Te());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Dn(),E=Te();return l.Ns.getEntries(g,h).next(T=>{w=T,w.forEach((b,_)=>{_.isValidDocument()||(E=E.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(T=>{d=T;const b=[];for(const _ of a){const v=b3(_,d.get(_.key).overlayedDocument);v!=null&&b.push(new qi(_.key,v,BR(v.value.mapValue),Tn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,b,a)}).next(T=>{p=T;const b=T.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(g,T.batchId,b)})}).then(()=>({batchId:p.batchId,changes:eP(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new nt(ge)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,t),await Nh(r,s.changes),await Ch(r.remoteStore)}catch(s){const i=Yw(s,"Failed to persist write");t.reject(i)}}async function sC(n,e){const t=ye(n);try{const r=await wB(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Au.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ue(o.hu,14607):s.removedDocuments.size>0&&(ue(o.hu,42227),o.hu=!1))}),await Nh(t,r,e)}catch(r){await ia(r)}}function LT(n,e,t){const r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)}),u&&Xw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l5(n,e,t){const r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new nt(X.comparator);o=o.insert(i,dt.newNoDocument(i,de.min()));const a=Te().add(i),l=new dm(de.min(),new Map,new nt(ge),o,a);await sC(r,l),r.du=r.du.remove(i),r.Au.delete(e),e0(r)}else await T_(r.localStore,e,!1).then(()=>A_(r,e,t)).catch(ia)}async function u5(n,e){const t=ye(n),r=e.batch.batchId;try{const s=await vB(t.localStore,e);oC(t,r,null),iC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Nh(t,s)}catch(s){await ia(s)}}async function c5(n,e,t){const r=ye(n);try{const s=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ue(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);oC(r,e,t),iC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Nh(r,s)}catch(s){await ia(s)}}function iC(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function oC(n,e,t){const r=ye(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function A_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||aC(n,r)})}function aC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Kw(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),e0(n))}function MT(n,e,t){for(const r of t)r instanceof tC?(n.Ru.addReference(r.key,e),h5(n,r)):r instanceof nC?(q(Zw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||aC(n,r.key)):ie(19791,{wu:r})}function h5(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(q(Zw,"New document in limbo: "+t),n.Eu.add(r),e0(n))}function e0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new X(De.fromString(e)),r=n.fu.next();n.Au.set(r,new e5(t)),n.du=n.du.insert(t,r),KP(n.remoteStore,new us(Xn(lm(t.path)),r,"TargetPurposeLimboResolution",Gn.ce))}}async function Nh(n,e,t){const r=ye(n),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=qw.As(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,u){const h=ye(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>V.forEach(u,p=>V.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>V.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!zi(d))throw d;q(Ww,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,E)}}}(r.localStore,i))}async function d5(n,e){const t=ye(n);if(!t.currentUser.isEqual(e)){q(Zw,"User change. New user:",e.toKey());const r=await $P(t.localStore,e);t.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new J(B.CANCELLED,o))})}),i.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nh(t,r.Ls)}}function f5(n,e){const t=ye(n),r=t.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=t.Iu.get(e);if(!i)return s;for(const o of i){const a=t.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function lC(n){const e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l5.bind(null,e),e.Pu.H_=QB.bind(null,e.eventManager),e.Pu.yu=YB.bind(null,e.eventManager),e}function uC(n){const e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c5.bind(null,e),e}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return UP(this.persistence,new FP,e.initialUser,this.serializer)}Cu(e){return new Bw(mm.mi,this.serializer)}Du(e){return new zP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class p5 extends eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ue(this.persistence.referenceDelegate instanceof ap,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Bw(r=>ap.mi(r,t),this.serializer)}}class m5 extends eh{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await uC(this.xu.syncEngine),await Ch(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return UP(this.persistence,new FP,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new jP(r,e.asyncQueue,t)}Mu(e,t){const r=new E6(t,this.persistence);return new w6(e.asyncQueue,r)}Cu(e){const t=mB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new zw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PB(),af(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zP}}class up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d5.bind(null,this.syncEngine),await HB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JB}()}createDatastore(e){const t=gm(e.databaseInfo.databaseId),r=function(i){return new RB(i)}(e.databaseInfo);return function(i,o,a,l){return new jB(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new VB(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>LT(this.syncEngine,t,0),function(){return CT.v()?new CT:new IB}())}createSyncEngine(e,t){return function(s,i,o,a,l,u,h){const d=new t5(s,i,o,a,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=ye(s);q(Zo,"RemoteStore shutting down."),i.Ea.add(5),await Ph(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class g5{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=Ew.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yw(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lg(n,e){n.asyncQueue.verifyOperationInProgress(),q(ji,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $P(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function FT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await y5(n);q(ji,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>OT(e.remoteStore,s)),n._onlineComponents=e}async function y5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(ji,"Using user provided OfflineComponentProvider");try{await Lg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await Lg(n,new eh)}}else q(ji,"Using default OfflineComponentProvider"),await Lg(n,new p5(void 0));return n._offlineComponents}async function hC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(ji,"Using user provided OnlineComponentProvider"),await FT(n,n._uninitializedComponentsProvider._online)):(q(ji,"Using default OnlineComponentProvider"),await FT(n,new up))),n._onlineComponents}function _5(n){return hC(n).then(e=>e.syncEngine)}async function dC(n){const e=await hC(n),t=e.eventManager;return t.onListen=n5.bind(null,e.syncEngine),t.onUnlisten=i5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o5.bind(null,e.syncEngine),t}function v5(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new cC({next:p=>{h.Nu(),o.enqueueAndForget(()=>ZP(i,d));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new eC(lm(a.path),h,{includeMetadataChanges:!0,qa:!0});return XP(i,d)}(await dC(n),n.asyncQueue,e,t,r)),r.promise}function w5(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new cC({next:p=>{h.Nu(),o.enqueueAndForget(()=>ZP(i,d)),p.fromCache&&l.source==="server"?u.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new eC(a,h,{includeMetadataChanges:!0,qa:!0});return XP(i,d)}(await dC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firestore.googleapis.com",$T=!0;class BT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pC,this.ssl=$T}else this.host=e.host,this.ssl=e.ssl??$T;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X3)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o6;switch(r.type){case"firstParty":return new c6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=UT.get(t);r&&(q("ComponentProvider","Removing Datastore"),UT.delete(t),r.terminate())}(this),Promise.resolve()}}function E5(n,e,t,r={}){var u;n=ws(n,_m);const s=Zl(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;s&&(Jk(`https://${a}`),Qk("Firestore",!0)),i.host!==pC&&i.host!==a&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Pi(l,o)&&(n._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=zt.MOCK_USER;else{h=HL(r.mockUserToken,(u=n._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new zt(p)}n._authCredentials=new a6(new mR(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm=class mC{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mC(this.firestore,e,this._query)}};class bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Th(t,bt._jsonSchema))return new bt(e,r||null,new X(De.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Et("string",bt._jsonSchemaVersion),referencePath:Et("string")};class Ii extends vm{constructor(e,t,r){super(e,t,lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new X(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function gC(n,e,...t){if(n=Ct(n),yR("collection","path",e),n instanceof _m){const r=De.fromString(e,...t);return Nx(r),new Ii(n,null,r)}{if(!(n instanceof bt||n instanceof Ii))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return Nx(r),new Ii(n.firestore,null,r)}}function sl(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=Ew.newId()),yR("doc","path",e),n instanceof _m){const r=De.fromString(e,...t);return Cx(r),new bt(n,null,new X(r))}{if(!(n instanceof bt||n instanceof Ii))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(De.fromString(e,...t));return Cx(r),new bt(n.firestore,n instanceof Ii?n.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="AsyncQueue";class qT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qP(this,"async_queue_retry"),this._c=()=>{const r=af();r&&q(zT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=af();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=af();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zi(e))throw e;q(zT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,un("INTERNAL UNHANDLED ERROR: ",WT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Qw.createAndSchedule(this,e,t,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:WT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class iu extends _m{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new qT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qT(e),this._firestoreClient=void 0,await e}}}function b5(n,e){const t=typeof n=="object"?n:rw(),r=typeof n=="string"?n:Xf,s=sa(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=WL("firestore");i&&E5(s,...i)}return s}function t0(n){if(n._terminated)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yC(n),n._firestoreClient}function yC(n){var r,s,i;const e=n._freezeSettings(),t=function(a,l,u,h){return new Q6(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new g5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function x5(n,e){Ho("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return T5(n,up.provider,{build:r=>new m5(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function T5(n,e,t){if((n=ws(n,iu))._firestoreClient||n._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Tt.fromBase64String(e))}catch(t){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Th(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Et("string",Kn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Th(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:Et("string",Hr._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Th(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Gr(e.vectorValues);throw new J(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:Et("string",Gr._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=/^__.*__$/;class S5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}function _C(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:n})}}class s0{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new s0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_C(this.Ac)&&I5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gm(e)}Cc(e,t,r,s=!1){return new s0({Ac:e,methodName:t,Dc:r,path:st.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i0(n){const e=n._freezeSettings(),t=gm(n._databaseId);return new A5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vC(n,e,t,r,s,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);bC("Data must be an object, but it was:",o,r);const a=wC(r,o);let l,u;if(i.merge)l=new Jn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=R5(e,d,t);if(!o.contains(p))throw new J(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);C5(h,p)||h.push(p)}l=new Jn(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new S5(new En(a),l,u)}class o0 extends r0{_toFieldTransform(e){return new aP(e.path,new Vl)}isEqual(e){return e instanceof o0}}function k5(n,e,t,r=!1){return a0(t,n.Cc(r?4:3,e))}function a0(n,e){if(EC(n=Ct(n)))return bC("Unsupported field value:",e,n),wC(n,e);if(n instanceof r0)return function(r,s){if(!_C(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=a0(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Me.fromDate(r);return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Me){const i=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:pP(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gr)return function(o,a){return{mapValue:{fields:{[Rw]:{stringValue:Pw},[Nl]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Nw(a.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${em(r)}`)}(n,e)}function wC(n,e){const t={};return OR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(n,(r,s)=>{const i=a0(s,e.mc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function EC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof Hr||n instanceof Kn||n instanceof bt||n instanceof r0||n instanceof Gr)}function bC(n,e,t){if(!EC(t)||!_R(t)){const r=em(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function R5(n,e,t){if((e=Ct(e))instanceof n0)return e._internalPath;if(typeof e=="string")return xC(n,e);throw cp("Field path arguments must be of type string or ",n,!1,void 0,t)}const P5=new RegExp("[~\\*/\\[\\]]");function xC(n,e,t){if(e.search(P5)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new n0(...e.split("."))._internalPath}catch{throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cp(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(B.INVALID_ARGUMENT,a+n+l)}function C5(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(l0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class N5 extends TC{data(){return super.data()}}function l0(n,e){return typeof e=="string"?xC(n,e):e instanceof n0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}class j5 extends u0{}function D5(n,e,...t){let r=[];e instanceof u0&&r.push(e),r=r.concat(t),function(i){const o=i.filter(l=>l instanceof c0).length,a=i.filter(l=>l instanceof wm).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class wm extends j5{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wm(e,t,r)}_apply(e){const t=this._parse(e);return IC(e._query,t),new vm(e.firestore,e.converter,m_(e._query,t))}_parse(e){const t=i0(e.firestore);return function(i,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){HT(d,h);const w=[];for(const E of d)w.push(KT(l,i,E));p={arrayValue:{values:w}}}else p=KT(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||HT(d,h),p=k5(a,o,d,h==="in"||h==="not-in");return ke.create(u,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function V5(n,e,t){const r=e,s=l0("where",n);return wm._create(s,r,t)}class c0 extends u0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)IC(o,l),o=m_(o,l)}(e._query,t),new vm(e.firestore,e.converter,m_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function KT(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QR(e)&&t.indexOf("/")!==-1)throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(De.fromString(t));if(!X.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yc(n,new X(r))}if(t instanceof bt)return Yc(n,t._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${em(t)}.`)}function HT(n,e){if(!Array.isArray(n)||n.length===0)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IC(n,e){const t=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class L5{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return oa(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var r,s,i;const t=(i=(s=(r=e.fields)==null?void 0:r[Nl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>et(o.doubleValue));return new Gr(t)}convertGeoPoint(e){return new Hr(et(e.latitude),et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=om(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const t=Es(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=De.fromString(e);ue(TP(r),9688,{name:e});const s=new Go(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(t)||un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vo extends TC{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(l0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vo._jsonSchema={type:Et("string",Vo._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class lf extends Vo{data(e={}){return super.data(e)}}class il{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Yu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lf(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new lf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new lf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:M5(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ew.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function M5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n){n=ws(n,bt);const e=ws(n.firestore,iu);return v5(t0(e),n._key).then(t=>$5(e,n,t))}il._jsonSchemaVersion="firestore/querySnapshot/1.0",il._jsonSchema={type:Et("string",il._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class kC extends L5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function F5(n){n=ws(n,vm);const e=ws(n.firestore,iu),t=t0(e),r=new kC(e);return O5(n._query),w5(t,n._query).then(s=>new il(e,r,n,s))}function k_(n,e,t){n=ws(n,bt);const r=ws(n.firestore,iu),s=SC(n.converter,e,t);return RC(r,[vC(i0(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Tn.none())])}function U5(n,e){const t=ws(n.firestore,iu),r=sl(n),s=SC(n.converter,e);return RC(t,[vC(i0(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function RC(n,e){return function(r,s){const i=new Kr;return r.asyncQueue.enqueueAndForget(async()=>a5(await _5(r),s,i)),i.promise}(t0(n),e)}function $5(n,e,t){const r=t.docs.get(e._key),s=new kC(n);return new Vo(n,s,e._key,r,new Yu(t.hasPendingWrites,t.fromCache),e.converter)}function ol(){return new o0("serverTimestamp")}(function(e,t=!0){(function(s){nu=s})(eu),Qr(new xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new iu(new l6(r.getProvider("auth-internal")),new h6(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Go(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:t,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Yn(Ax,kx,e),Yn(Ax,kx,"esm2020")})();const B5={apiKey:"AIzaSyBxHRTd_YdAn-1dBGKOzcWYfFea-kaaScg",authDomain:"joveo-project-hub.firebaseapp.com",projectId:"joveo-project-hub",storageBucket:"joveo-project-hub.firebasestorage.app",messagingSenderId:"689049293299",appId:"1:689049293299:web:ecd973c83b5f5461f60286",measurementId:"G-MYZXKSN6T4"},h0=i1(B5);let z5;if(typeof window<"u")try{z5=t6(h0)}catch(n){console.warn("Analytics not available:",n)}const $l=DU(h0),Si=b5(h0);try{x5(Si).catch(n=>{n.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):n.code==="unimplemented"&&console.warn("The current browser does not support persistence.")})}catch(n){console.warn("Persistence error:",n)}const PC=new ss;PC.setCustomParameters({prompt:"select_account"});const q5=async(n,e,t,r,s)=>{try{const o=(await yF($l,n,e)).user;await wF(o,{displayName:t});try{await k_(sl(Si,"users",o.uid),{uid:o.uid,email:o.email,displayName:t,role:r,phoneNumber:(s==null?void 0:s.phoneNumber)||"",address:(s==null?void 0:s.address)||"",company:(s==null?void 0:s.company)||"",createdAt:ol(),updatedAt:ol()})}catch(a){console.warn("Firestore operation failed (may be offline):",a.message)}return o}catch(i){throw console.error("Error signing up:",i),new Error(i.message)}},W5=async(n,e)=>{try{return(await _F($l,n,e)).user}catch(t){throw console.error("Error signing in:",t),new Error(t.message)}},K5=async n=>{try{const t=(await qF($l,PC)).user;try{(await AC(sl(Si,"users",t.uid))).exists()?await k_(sl(Si,"users",t.uid),{updatedAt:ol()},{merge:!0}):await k_(sl(Si,"users",t.uid),{uid:t.uid,email:t.email,displayName:t.displayName||"User",role:n||"jobseeker",phoneNumber:t.phoneNumber||"",address:"",company:"",createdAt:ol(),updatedAt:ol()})}catch(r){console.warn("Firestore operation failed (may be offline):",r.message)}return t}catch(e){throw console.error("Error signing in with Google:",e),e.code==="auth/unauthorized-domain"?new Error("Please add localhost to authorized domains in Firebase Console (Authentication > Settings > Authorized domains)"):e.code==="auth/popup-blocked"?new Error("Pop-up was blocked. Please allow pop-ups for this site."):e.code==="auth/popup-closed-by-user"?new Error("Sign-in cancelled."):new Error(e.message||"Google sign-in failed")}},H5=async()=>{try{await TF($l)}catch(n){throw console.error("Error signing out:",n),new Error(n.message)}},GT=async n=>{var e;try{const t=await AC(sl(Si,"users",n));return t.exists()?t.data():null}catch(t){if(t.code==="unavailable"||(e=t.message)!=null&&e.includes("offline"))return console.warn("Firestore is offline, user profile unavailable"),null;throw console.error("Error getting user profile:",t),new Error(t.message)}},CC=j.createContext(void 0);function G5({children:n}){const[e,t]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState(!0),a=async()=>{const p=$l.currentUser;if(p)try{const g=await GT(p.uid);s(g)}catch(g){console.error("Error fetching user profile:",g)}};j.useEffect(()=>{const p=xF($l,async g=>{var w;if(t(g),g)try{const E=await GT(g.uid);s(E)}catch(E){(E==null?void 0:E.code)!=="unavailable"&&!((w=E==null?void 0:E.message)!=null&&w.includes("offline"))&&console.error("Error fetching user profile:",E),s(null)}else s(null);o(!1)});return()=>p()},[]);const l=async(p,g)=>{try{const w=new Promise((E,T)=>setTimeout(()=>T(new Error("Request timeout - check your internet connection or ad blocker")),1e4));return await Promise.race([W5(p,g),w]),{success:!0}}catch(w){return{success:!1,error:w instanceof Error?w.message:"Login failed"}}},u=async p=>{try{const g=new Promise((w,E)=>setTimeout(()=>E(new Error("Request timeout - check your internet connection or ad blocker")),15e3));return await Promise.race([K5(p),g]),{success:!0}}catch(g){return{success:!1,error:g instanceof Error?g.message:"Google sign-in failed"}}},h=async(p,g,w,E,T)=>{try{return await q5(p,g,w,E,T),{success:!0}}catch(b){return{success:!1,error:b instanceof Error?b.message:"Registration failed"}}},d=async()=>{try{await H5(),t(null),s(null)}catch(p){console.error("Error logging out:",p)}};return f.jsx(CC.Provider,{value:{user:e,userProfile:r,loading:i,isAuthenticated:!!e,login:l,loginWithGoogle:u,register:h,logout:d,refreshUser:a},children:n})}function Wi(){const n=j.useContext(CC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}var Oh=n=>n.type==="checkbox",To=n=>n instanceof Date,vn=n=>n==null;const NC=n=>typeof n=="object";var xt=n=>!vn(n)&&!Array.isArray(n)&&NC(n)&&!To(n),J5=n=>xt(n)&&n.target?Oh(n.target)?n.target.checked:n.target.value:n,Q5=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,Y5=(n,e)=>n.has(Q5(e)),X5=n=>{const e=n.constructor&&n.constructor.prototype;return xt(e)&&e.hasOwnProperty("isPrototypeOf")},d0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vt(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(d0&&(n instanceof Blob||r))&&(t||xt(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!X5(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=Vt(n[s]));else return n;return e}var Em=n=>/^\w*$/.test(n),ft=n=>n===void 0,f0=n=>Array.isArray(n)?n.filter(Boolean):[],p0=n=>f0(n.replace(/["|']|\]/g,"").split(/\.|\[/)),se=(n,e,t)=>{if(!e||!xt(n))return t;const r=(Em(e)?[e]:p0(e)).reduce((s,i)=>vn(s)?s:s[i],n);return ft(r)||r===n?ft(n[e])?t:n[e]:r},jr=n=>typeof n=="boolean",qe=(n,e,t)=>{let r=-1;const s=Em(e)?[e]:p0(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=t;if(r!==o){const u=n[a];l=xt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}};const JT={BLUR:"blur",FOCUS_OUT:"focusout"},gr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Z5=_n.createContext(null);Z5.displayName="HookFormContext";var e9=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==gr.all&&(e._proxyFormState[o]=!r||gr.all),n[o]}});return s};const t9=typeof window<"u"?_n.useLayoutEffect:_n.useEffect;var Nn=n=>typeof n=="string",n9=(n,e,t,r,s)=>Nn(n)?(r&&e.watch.add(n),se(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),se(t,i))):(r&&(e.watchAll=!0),t),R_=n=>vn(n)||!NC(n);function ti(n,e,t=new WeakSet){if(R_(n)||R_(e))return Object.is(n,e);if(To(n)&&To(e))return n.getTime()===e.getTime();const r=Object.keys(n),s=Object.keys(e);if(r.length!==s.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const i of r){const o=n[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(To(o)&&To(a)||xt(o)&&xt(a)||Array.isArray(o)&&Array.isArray(a)?!ti(o,a,t):!Object.is(o,a))return!1}}return!0}var OC=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},wc=n=>Array.isArray(n)?n:[n],QT=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}};function jC(n,e){const t={};for(const r in n)if(n.hasOwnProperty(r)){const s=n[r],i=e[r];if(s&&xt(s)&&i){const o=jC(s,i);xt(o)&&(t[r]=o)}else n[r]&&(t[r]=i)}return t}var on=n=>xt(n)&&!Object.keys(n).length,m0=n=>n.type==="file",yr=n=>typeof n=="function",hp=n=>{if(!d0)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},DC=n=>n.type==="select-multiple",g0=n=>n.type==="radio",r9=n=>g0(n)||Oh(n),Mg=n=>hp(n)&&n.isConnected;function s9(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=ft(n)?r++:n[e[r++]];return n}function i9(n){for(const e in n)if(n.hasOwnProperty(e)&&!ft(n[e]))return!1;return!0}function mt(n,e){const t=Array.isArray(e)?e:Em(e)?[e]:p0(e),r=t.length===1?n:s9(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(xt(r)&&on(r)||Array.isArray(r)&&i9(r))&&mt(n,t.slice(0,-1)),n}var o9=n=>{for(const e in n)if(yr(n[e]))return!0;return!1};function VC(n){return Array.isArray(n)||xt(n)&&!o9(n)}function P_(n,e={}){for(const t in n){const r=n[t];VC(r)?(e[t]=Array.isArray(r)?[]:{},P_(r,e[t])):ft(r)||(e[t]=!0)}return e}function Ca(n,e,t){t||(t=P_(e));for(const r in n){const s=n[r];if(VC(s))ft(e)||R_(t[r])?t[r]=P_(s,Array.isArray(s)?[]:{}):Ca(s,vn(e)?{}:e[r],t[r]);else{const i=e[r];t[r]=!ti(s,i)}}return t}const YT={value:!1,isValid:!1},XT={value:!0,isValid:!0};var LC=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!ft(n[0].attributes.value)?ft(n[0].value)||n[0].value===""?XT:{value:n[0].value,isValid:!0}:XT:YT}return YT},MC=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>ft(n)?n:e?n===""?NaN:n&&+n:t&&Nn(n)?new Date(n):r?r(n):n;const ZT={isValid:!1,value:null};var FC=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ZT):ZT;function eI(n){const e=n.ref;return m0(e)?e.files:g0(e)?FC(n.refs).value:DC(e)?[...e.selectedOptions].map(({value:t})=>t):Oh(e)?LC(n.refs).value:MC(ft(e.value)?n.ref.value:e.value,n)}var a9=(n,e,t,r)=>{const s={};for(const i of n){const o=se(e,i);o&&qe(s,i,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},dp=n=>n instanceof RegExp,Uu=n=>ft(n)?n:dp(n)?n.source:xt(n)?dp(n.value)?n.value.source:n.value:n,tI=n=>({isOnSubmit:!n||n===gr.onSubmit,isOnBlur:n===gr.onBlur,isOnChange:n===gr.onChange,isOnAll:n===gr.all,isOnTouch:n===gr.onTouched});const nI="AsyncFunction";var l9=n=>!!n&&!!n.validate&&!!(yr(n.validate)&&n.validate.constructor.name===nI||xt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===nI)),u9=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),rI=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Ec=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=se(n,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ec(a,e))break}else if(xt(a)&&Ec(a,e))break}}};function sI(n,e,t){const r=se(n,t);if(r||Em(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=se(e,i),a=se(n,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:t}}var c9=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return on(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||gr.all))},h9=(n,e,t)=>!n||!e||n===e||wc(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),d9=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,f9=(n,e)=>!f0(se(n,e)).length&&mt(n,e),p9=(n,e,t)=>{const r=wc(se(n,t));return qe(r,"root",e[t]),qe(n,t,r),n};function iI(n,e,t="validate"){if(Nn(n)||Array.isArray(n)&&n.every(Nn)||jr(n)&&!n)return{type:t,message:Nn(n)?n:"",ref:e}}var Ea=n=>xt(n)&&!dp(n)?n:{value:n,message:""},oI=async(n,e,t,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:h,min:d,max:p,pattern:g,validate:w,name:E,valueAsNumber:T,mount:b}=n._f,_=se(t,E);if(!b||e.has(E))return{};const v=a?a[0]:o,N=O=>{s&&v.reportValidity&&(v.setCustomValidity(jr(O)?"":O||""),v.reportValidity())},D={},F=g0(o),S=Oh(o),x=F||S,A=(T||m0(o))&&ft(o.value)&&ft(_)||hp(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,R=OC.bind(null,E,r,D),C=(O,k,Ee,Be=Zr.maxLength,lt=Zr.minLength)=>{const Ot=O?k:Ee;D[E]={type:O?Be:lt,message:Ot,ref:o,...R(O?Be:lt,Ot)}};if(i?!Array.isArray(_)||!_.length:l&&(!x&&(A||vn(_))||jr(_)&&!_||S&&!LC(a).isValid||F&&!FC(a).isValid)){const{value:O,message:k}=Nn(l)?{value:!!l,message:l}:Ea(l);if(O&&(D[E]={type:Zr.required,message:k,ref:v,...R(Zr.required,k)},!r))return N(k),D}if(!A&&(!vn(d)||!vn(p))){let O,k;const Ee=Ea(p),Be=Ea(d);if(!vn(_)&&!isNaN(_)){const lt=o.valueAsNumber||_&&+_;vn(Ee.value)||(O=lt>Ee.value),vn(Be.value)||(k=lt<Be.value)}else{const lt=o.valueAsDate||new Date(_),Ot=me=>new Date(new Date().toDateString()+" "+me),Y=o.type=="time",ce=o.type=="week";Nn(Ee.value)&&_&&(O=Y?Ot(_)>Ot(Ee.value):ce?_>Ee.value:lt>new Date(Ee.value)),Nn(Be.value)&&_&&(k=Y?Ot(_)<Ot(Be.value):ce?_<Be.value:lt<new Date(Be.value))}if((O||k)&&(C(!!O,Ee.message,Be.message,Zr.max,Zr.min),!r))return N(D[E].message),D}if((u||h)&&!A&&(Nn(_)||i&&Array.isArray(_))){const O=Ea(u),k=Ea(h),Ee=!vn(O.value)&&_.length>+O.value,Be=!vn(k.value)&&_.length<+k.value;if((Ee||Be)&&(C(Ee,O.message,k.message),!r))return N(D[E].message),D}if(g&&!A&&Nn(_)){const{value:O,message:k}=Ea(g);if(dp(O)&&!_.match(O)&&(D[E]={type:Zr.pattern,message:k,ref:o,...R(Zr.pattern,k)},!r))return N(k),D}if(w){if(yr(w)){const O=await w(_,t),k=iI(O,v);if(k&&(D[E]={...k,...R(Zr.validate,k.message)},!r))return N(k.message),D}else if(xt(w)){let O={};for(const k in w){if(!on(O)&&!r)break;const Ee=iI(await w[k](_,t),v,k);Ee&&(O={...Ee,...R(k,Ee.message)},N(Ee.message),r&&(D[E]=O))}if(!on(O)&&(D[E]={ref:v,...O},!r))return D}}return N(!0),D};const m9={mode:gr.onSubmit,reValidateMode:gr.onChange,shouldFocusError:!0};function g9(n={}){let e={...m9,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:yr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=xt(e.defaultValues)||xt(e.values)?Vt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Vt(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...h};const p={array:QT(),state:QT()},g=e.criteriaMode===gr.all,w=P=>M=>{clearTimeout(u),u=setTimeout(P,M)},E=async P=>{if(!e.disabled&&(h.isValid||d.isValid||P)){const M=e.resolver?on((await S()).errors):await A(r,!0);M!==t.isValid&&p.state.next({isValid:M})}},T=(P,M)=>{!e.disabled&&(h.isValidating||h.validatingFields||d.isValidating||d.validatingFields)&&((P||Array.from(a.mount)).forEach($=>{$&&(M?qe(t.validatingFields,$,M):mt(t.validatingFields,$))}),p.state.next({validatingFields:t.validatingFields,isValidating:!on(t.validatingFields)}))},b=(P,M=[],$,Z,Q=!0,K=!0)=>{if(Z&&$&&!e.disabled){if(o.action=!0,K&&Array.isArray(se(r,P))){const he=$(se(r,P),Z.argA,Z.argB);Q&&qe(r,P,he)}if(K&&Array.isArray(se(t.errors,P))){const he=$(se(t.errors,P),Z.argA,Z.argB);Q&&qe(t.errors,P,he),f9(t.errors,P)}if((h.touchedFields||d.touchedFields)&&K&&Array.isArray(se(t.touchedFields,P))){const he=$(se(t.touchedFields,P),Z.argA,Z.argB);Q&&qe(t.touchedFields,P,he)}(h.dirtyFields||d.dirtyFields)&&(t.dirtyFields=Ca(s,i)),p.state.next({name:P,isDirty:C(P,M),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else qe(i,P,M)},_=(P,M)=>{qe(t.errors,P,M),p.state.next({errors:t.errors})},v=P=>{t.errors=P,p.state.next({errors:t.errors,isValid:!1})},N=(P,M,$,Z)=>{const Q=se(r,P);if(Q){const K=se(i,P,ft($)?se(s,P):$);ft(K)||Z&&Z.defaultChecked||M?qe(i,P,M?K:eI(Q._f)):Ee(P,K),o.mount&&!o.action&&E()}},D=(P,M,$,Z,Q)=>{let K=!1,he=!1;const Ne={name:P};if(!e.disabled){if(!$||Z){(h.isDirty||d.isDirty)&&(he=t.isDirty,t.isDirty=Ne.isDirty=C(),K=he!==Ne.isDirty);const Ve=ti(se(s,P),M);he=!!se(t.dirtyFields,P),Ve?mt(t.dirtyFields,P):qe(t.dirtyFields,P,!0),Ne.dirtyFields=t.dirtyFields,K=K||(h.dirtyFields||d.dirtyFields)&&he!==!Ve}if($){const Ve=se(t.touchedFields,P);Ve||(qe(t.touchedFields,P,$),Ne.touchedFields=t.touchedFields,K=K||(h.touchedFields||d.touchedFields)&&Ve!==$)}K&&Q&&p.state.next(Ne)}return K?Ne:{}},F=(P,M,$,Z)=>{const Q=se(t.errors,P),K=(h.isValid||d.isValid)&&jr(M)&&t.isValid!==M;if(e.delayError&&$?(l=w(()=>_(P,$)),l(e.delayError)):(clearTimeout(u),l=null,$?qe(t.errors,P,$):mt(t.errors,P)),($?!ti(Q,$):Q)||!on(Z)||K){const he={...Z,...K&&jr(M)?{isValid:M}:{},errors:t.errors,name:P};t={...t,...he},p.state.next(he)}},S=async P=>{T(P,!0);const M=await e.resolver(i,e.context,a9(P||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(P),M},x=async P=>{const{errors:M}=await S(P);if(P)for(const $ of P){const Z=se(M,$);Z?qe(t.errors,$,Z):mt(t.errors,$)}else t.errors=M;return M},A=async(P,M,$={valid:!0})=>{for(const Z in P){const Q=P[Z];if(Q){const{_f:K,...he}=Q;if(K){const Ne=a.array.has(K.name),Ve=Q._f&&l9(Q._f);Ve&&h.validatingFields&&T([K.name],!0);const gn=await oI(Q,a.disabled,i,g,e.shouldUseNativeValidation&&!M,Ne);if(Ve&&h.validatingFields&&T([K.name]),gn[K.name]&&($.valid=!1,M))break;!M&&(se(gn,K.name)?Ne?p9(t.errors,gn,K.name):qe(t.errors,K.name,gn[K.name]):mt(t.errors,K.name))}!on(he)&&await A(he,M,$)}}return $.valid},R=()=>{for(const P of a.unMount){const M=se(r,P);M&&(M._f.refs?M._f.refs.every($=>!Mg($)):!Mg(M._f.ref))&&mn(P)}a.unMount=new Set},C=(P,M)=>!e.disabled&&(P&&M&&qe(i,P,M),!ti(me(),s)),O=(P,M,$)=>n9(P,a,{...o.mount?i:ft(M)?s:Nn(P)?{[P]:M}:M},$,M),k=P=>f0(se(o.mount?i:s,P,e.shouldUnregister?se(s,P,[]):[])),Ee=(P,M,$={})=>{const Z=se(r,P);let Q=M;if(Z){const K=Z._f;K&&(!K.disabled&&qe(i,P,MC(M,K)),Q=hp(K.ref)&&vn(M)?"":M,DC(K.ref)?[...K.ref.options].forEach(he=>he.selected=Q.includes(he.value)):K.refs?Oh(K.ref)?K.refs.forEach(he=>{(!he.defaultChecked||!he.disabled)&&(Array.isArray(Q)?he.checked=!!Q.find(Ne=>Ne===he.value):he.checked=Q===he.value||!!Q)}):K.refs.forEach(he=>he.checked=he.value===Q):m0(K.ref)?K.ref.value="":(K.ref.value=Q,K.ref.type||p.state.next({name:P,values:Vt(i)})))}($.shouldDirty||$.shouldTouch)&&D(P,Q,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&ce(P)},Be=(P,M,$)=>{for(const Z in M){if(!M.hasOwnProperty(Z))return;const Q=M[Z],K=P+"."+Z,he=se(r,K);(a.array.has(P)||xt(Q)||he&&!he._f)&&!To(Q)?Be(K,Q,$):Ee(K,Q,$)}},lt=(P,M,$={})=>{const Z=se(r,P),Q=a.array.has(P),K=Vt(M);qe(i,P,K),Q?(p.array.next({name:P,values:Vt(i)}),(h.isDirty||h.dirtyFields||d.isDirty||d.dirtyFields)&&$.shouldDirty&&p.state.next({name:P,dirtyFields:Ca(s,i),isDirty:C(P,K)})):Z&&!Z._f&&!vn(K)?Be(P,K,$):Ee(P,K,$),rI(P,a)&&p.state.next({...t,name:P}),p.state.next({name:o.mount?P:void 0,values:Vt(i)})},Ot=async P=>{o.mount=!0;const M=P.target;let $=M.name,Z=!0;const Q=se(r,$),K=Ve=>{Z=Number.isNaN(Ve)||To(Ve)&&isNaN(Ve.getTime())||ti(Ve,se(i,$,Ve))},he=tI(e.mode),Ne=tI(e.reValidateMode);if(Q){let Ve,gn;const ua=M.type?eI(Q._f):J5(P),sr=P.type===JT.BLUR||P.type===JT.FOCUS_OUT,Lh=!u9(Q._f)&&!e.resolver&&!se(t.errors,$)&&!Q._f.deps||d9(sr,se(t.touchedFields,$),t.isSubmitted,Ne,he),Xr=rI($,a,sr);qe(i,$,ua),sr?(!M||!M.readOnly)&&(Q._f.onBlur&&Q._f.onBlur(P),l&&l(0)):Q._f.onChange&&Q._f.onChange(P);const Gi=D($,ua,sr),hu=!on(Gi)||Xr;if(!sr&&p.state.next({name:$,type:P.type,values:Vt(i)}),Lh)return(h.isValid||d.isValid)&&(e.mode==="onBlur"?sr&&E():sr||E()),hu&&p.state.next({name:$,...Xr?{}:Gi});if(!sr&&Xr&&p.state.next({...t}),e.resolver){const{errors:Ar}=await S([$]);if(K(ua),Z){const Mh=sI(t.errors,r,$),Ji=sI(Ar,r,Mh.name||$);Ve=Ji.error,$=Ji.name,gn=on(Ar)}}else T([$],!0),Ve=(await oI(Q,a.disabled,i,g,e.shouldUseNativeValidation))[$],T([$]),K(ua),Z&&(Ve?gn=!1:(h.isValid||d.isValid)&&(gn=await A(r,!0)));Z&&(Q._f.deps&&(!Array.isArray(Q._f.deps)||Q._f.deps.length>0)&&ce(Q._f.deps),F($,gn,Ve,Gi))}},Y=(P,M)=>{if(se(t.errors,M)&&P.focus)return P.focus(),1},ce=async(P,M={})=>{let $,Z;const Q=wc(P);if(e.resolver){const K=await x(ft(P)?P:Q);$=on(K),Z=P?!Q.some(he=>se(K,he)):$}else P?(Z=(await Promise.all(Q.map(async K=>{const he=se(r,K);return await A(he&&he._f?{[K]:he}:he)}))).every(Boolean),!(!Z&&!t.isValid)&&E()):Z=$=await A(r);return p.state.next({...!Nn(P)||(h.isValid||d.isValid)&&$!==t.isValid?{}:{name:P},...e.resolver||!P?{isValid:$}:{},errors:t.errors}),M.shouldFocus&&!Z&&Ec(r,Y,P?Q:a.mount),Z},me=(P,M)=>{let $={...o.mount?i:s};return M&&($=jC(M.dirtyFields?t.dirtyFields:t.touchedFields,$)),ft(P)?$:Nn(P)?se($,P):P.map(Z=>se($,Z))},Le=(P,M)=>({invalid:!!se((M||t).errors,P),isDirty:!!se((M||t).dirtyFields,P),error:se((M||t).errors,P),isValidating:!!se(t.validatingFields,P),isTouched:!!se((M||t).touchedFields,P)}),Je=P=>{P&&wc(P).forEach(M=>mt(t.errors,M)),p.state.next({errors:P?t.errors:{}})},re=(P,M,$)=>{const Z=(se(r,P,{_f:{}})._f||{}).ref,Q=se(t.errors,P)||{},{ref:K,message:he,type:Ne,...Ve}=Q;qe(t.errors,P,{...Ve,...M,ref:Z}),p.state.next({name:P,errors:t.errors,isValid:!1}),$&&$.shouldFocus&&Z&&Z.focus&&Z.focus()},xe=(P,M)=>yr(P)?p.state.subscribe({next:$=>"values"in $&&P(O(void 0,M),$)}):O(P,M,!0),It=P=>p.state.subscribe({next:M=>{h9(P.name,M.name,P.exact)&&c9(M,P.formState||h,cu,P.reRenderRoot)&&P.callback({values:{...i},...t,...M,defaultValues:s})}}).unsubscribe,jt=P=>(o.mount=!0,d={...d,...P.formState},It({...P,formState:d})),mn=(P,M={})=>{for(const $ of P?wc(P):a.mount)a.mount.delete($),a.array.delete($),M.keepValue||(mt(r,$),mt(i,$)),!M.keepError&&mt(t.errors,$),!M.keepDirty&&mt(t.dirtyFields,$),!M.keepTouched&&mt(t.touchedFields,$),!M.keepIsValidating&&mt(t.validatingFields,$),!e.shouldUnregister&&!M.keepDefaultValue&&mt(s,$);p.state.next({values:Vt(i)}),p.state.next({...t,...M.keepDirty?{isDirty:C()}:{}}),!M.keepIsValid&&E()},Rs=({disabled:P,name:M})=>{(jr(P)&&o.mount||P||a.disabled.has(M))&&(P?a.disabled.add(M):a.disabled.delete(M))},Ps=(P,M={})=>{let $=se(r,P);const Z=jr(M.disabled)||jr(e.disabled);return qe(r,P,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:P}},name:P,mount:!0,...M}}),a.mount.add(P),$?Rs({disabled:jr(M.disabled)?M.disabled:e.disabled,name:P}):N(P,!0,M.value),{...Z?{disabled:M.disabled||e.disabled}:{},...e.progressive?{required:!!M.required,min:Uu(M.min),max:Uu(M.max),minLength:Uu(M.minLength),maxLength:Uu(M.maxLength),pattern:Uu(M.pattern)}:{},name:P,onChange:Ot,onBlur:Ot,ref:Q=>{if(Q){Ps(P,M),$=se(r,P);const K=ft(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,he=r9(K),Ne=$._f.refs||[];if(he?Ne.find(Ve=>Ve===K):K===$._f.ref)return;qe(r,P,{_f:{...$._f,...he?{refs:[...Ne.filter(Mg),K,...Array.isArray(se(s,P))?[{}]:[]],ref:{type:K.type,name:P}}:{ref:K}}}),N(P,!1,void 0,K)}else $=se(r,P,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||M.shouldUnregister)&&!(Y5(a.array,P)&&o.action)&&a.unMount.add(P)}}},Cs=()=>e.shouldFocusError&&Ec(r,Y,a.mount),la=P=>{jr(P)&&(p.state.next({disabled:P}),Ec(r,(M,$)=>{const Z=se(r,$);Z&&(M.disabled=Z._f.disabled||P,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(Q=>{Q.disabled=Z._f.disabled||P}))},0,!1))},Ns=(P,M)=>async $=>{let Z;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let Q=Vt(i);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:K,values:he}=await S();t.errors=K,Q=Vt(he)}else await A(r);if(a.disabled.size)for(const K of a.disabled)mt(Q,K);if(mt(t.errors,"root"),on(t.errors)){p.state.next({errors:{}});try{await P(Q,$)}catch(K){Z=K}}else M&&await M({...t.errors},$),Cs(),setTimeout(Cs);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:on(t.errors)&&!Z,submitCount:t.submitCount+1,errors:t.errors}),Z)throw Z},Hi=(P,M={})=>{se(r,P)&&(ft(M.defaultValue)?lt(P,Vt(se(s,P))):(lt(P,M.defaultValue),qe(s,P,Vt(M.defaultValue))),M.keepTouched||mt(t.touchedFields,P),M.keepDirty||(mt(t.dirtyFields,P),t.isDirty=M.defaultValue?C(P,Vt(se(s,P))):C()),M.keepError||(mt(t.errors,P),h.isValid&&E()),p.state.next({...t}))},Os=(P,M={})=>{const $=P?Vt(P):s,Z=Vt($),Q=on(P),K=Q?s:Z;if(M.keepDefaultValues||(s=$),!M.keepValues){if(M.keepDirtyValues){const he=new Set([...a.mount,...Object.keys(Ca(s,i))]);for(const Ne of Array.from(he))se(t.dirtyFields,Ne)?qe(K,Ne,se(i,Ne)):lt(Ne,se(K,Ne))}else{if(d0&&ft(P))for(const he of a.mount){const Ne=se(r,he);if(Ne&&Ne._f){const Ve=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(hp(Ve)){const gn=Ve.closest("form");if(gn){gn.reset();break}}}}if(M.keepFieldsRef)for(const he of a.mount)lt(he,se(K,he));else r={}}i=e.shouldUnregister?M.keepDefaultValues?Vt(s):{}:Vt(K),p.array.next({values:{...K}}),p.state.next({values:{...K}})}a={mount:M.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!M.keepIsValid||!!M.keepDirtyValues||!e.shouldUnregister&&!on(K),o.watch=!!e.shouldUnregister,o.action=!1,M.keepErrors||(t.errors={}),p.state.next({submitCount:M.keepSubmitCount?t.submitCount:0,isDirty:Q?!1:M.keepDirty?t.isDirty:!!(M.keepDefaultValues&&!ti(P,s)),isSubmitted:M.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Q?{}:M.keepDirtyValues?M.keepDefaultValues&&i?Ca(s,i):t.dirtyFields:M.keepDefaultValues&&P?Ca(s,P):M.keepDirty?t.dirtyFields:{},touchedFields:M.keepTouched?t.touchedFields:{},errors:M.keepErrors?t.errors:{},isSubmitSuccessful:M.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Vh=(P,M)=>Os(yr(P)?P(i):P,M),uu=(P,M={})=>{const $=se(r,P),Z=$&&$._f;if(Z){const Q=Z.refs?Z.refs[0]:Z.ref;Q.focus&&(Q.focus(),M.shouldSelect&&yr(Q.select)&&Q.select())}},cu=P=>{t={...t,...P}},St={control:{register:Ps,unregister:mn,getFieldState:Le,handleSubmit:Ns,setError:re,_subscribe:It,_runSchema:S,_focusError:Cs,_getWatch:O,_getDirty:C,_setValid:E,_setFieldArray:b,_setDisabledField:Rs,_setErrors:v,_getFieldArray:k,_reset:Os,_resetDefaultValues:()=>yr(e.defaultValues)&&e.defaultValues().then(P=>{Vh(P,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:la,_subjects:p,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(P){o=P},get _defaultValues(){return s},get _names(){return a},set _names(P){a=P},get _formState(){return t},get _options(){return e},set _options(P){e={...e,...P}}},subscribe:jt,trigger:ce,register:Ps,handleSubmit:Ns,watch:xe,setValue:lt,getValues:me,reset:Vh,resetField:Hi,clearErrors:Je,unregister:mn,setError:re,setFocus:uu,getFieldState:Le};return{...St,formControl:St}}function C_(n={}){const e=_n.useRef(void 0),t=_n.useRef(void 0),[r,s]=_n.useState({isDirty:!1,isValidating:!1,isLoading:yr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:yr(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:r},n.defaultValues&&!yr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=g9(n);e.current={...a,formState:r}}const i=e.current.control;return i._options=n,t9(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),_n.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),_n.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),_n.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),_n.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),_n.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),_n.useEffect(()=>{var o;n.values&&!ti(n.values,t.current)?(i._reset(n.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),t.current=n.values,s(a=>({...a}))):i._resetDefaultValues()},[i,n.values]),_n.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=e9(r,i),e.current}const aI=(n,e,t)=>{if(n&&"reportValidity"in n){const r=se(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},UC=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?aI(r.ref,t,n):r.refs&&r.refs.forEach(s=>aI(s,t,n))}},y9=(n,e)=>{e.shouldUseNativeValidation&&UC(n,e);const t={};for(const r in n){const s=se(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(_9(e.names||Object.keys(n),r)){const o=Object.assign({},se(t,r));qe(o,"root",i),qe(t,r,o)}else qe(t,r,i)}return t},_9=(n,e)=>n.some(t=>t.startsWith(e+"."));var v9=function(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(d){return n.push(d)})}),e){var l=t[o].types,u=l&&l[r.code];t[o]=OC(o,e,t,s,u?[].concat(u,r.message):r.message)}n.shift()}return t},N_=function(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&UC({},i),{errors:{},values:t.raw?r:u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:y9(v9(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},je;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(je||(je={}));var lI;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(lI||(lI={}));const oe=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gs=n=>{switch(typeof n){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(n)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(n)?oe.array:n===null?oe.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?oe.promise:typeof Map<"u"&&n instanceof Map?oe.map:typeof Set<"u"&&n instanceof Set?oe.set:typeof Date<"u"&&n instanceof Date?oe.date:oe.object;default:return oe.unknown}},H=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class xs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return s(this),r}static assert(e){if(!(e instanceof xs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}xs.create=n=>new xs(n);const O_=(n,e)=>{let t;switch(n.code){case H.invalid_type:n.received===oe.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case H.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,je.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:t=`Unrecognized key(s) in object: ${je.joinValues(n.keys,", ")}`;break;case H.invalid_union:t="Invalid input";break;case H.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${je.joinValues(n.options)}`;break;case H.invalid_enum_value:t=`Invalid enum value. Expected ${je.joinValues(n.options)}, received '${n.received}'`;break;case H.invalid_arguments:t="Invalid function arguments";break;case H.invalid_return_type:t="Invalid function return type";break;case H.invalid_date:t="Invalid date";break;case H.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:je.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case H.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case H.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case H.custom:t="Invalid input";break;case H.invalid_intersection_types:t="Intersection results could not be merged";break;case H.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case H.not_finite:t="Number must be finite";break;default:t=e.defaultError,je.assertNever(n)}return{message:t}};let w9=O_;function E9(){return w9}const b9=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function ee(n,e){const t=E9(),r=b9({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===O_?void 0:O_].filter(s=>!!s)});n.common.issues.push(r)}class Un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return _e;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Un.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return _e;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const _e=Object.freeze({status:"aborted"}),Xu=n=>({status:"dirty",value:n}),rr=n=>({status:"valid",value:n}),uI=n=>n.status==="aborted",cI=n=>n.status==="dirty",Bl=n=>n.status==="valid",fp=n=>typeof Promise<"u"&&n instanceof Promise;var le;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(le||(le={}));class Di{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hI=(n,e)=>{if(Bl(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new xs(n.common.issues);return this._error=t,this._error}}};function Ie(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:s}}class Ce{get description(){return this._def.description}_getType(e){return Gs(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Gs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Un,ctx:{common:e.parent.common,data:e.data,parsedType:Gs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(fp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return hI(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Bl(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Bl(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(fp(s)?s:Promise.resolve(s));return hI(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:H.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new ql({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ai.create(this,this._def)}nullable(){return Wl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jr.create(this)}promise(){return yp.create(this,this._def)}or(e){return mp.create([this,e],this._def)}and(e){return gp.create(this,e,this._def)}transform(e){return new ql({...Ie(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new D_({...Ie(this._def),innerType:this,defaultValue:t,typeName:ve.ZodDefault})}brand(){return new W9({typeName:ve.ZodBranded,type:this,...Ie(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new V_({...Ie(this._def),innerType:this,catchValue:t,typeName:ve.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return y0.create(this,e)}readonly(){return L_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const x9=/^c[^\s-]{8,}$/i,T9=/^[0-9a-z]+$/,I9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,A9=/^[a-z0-9_-]{21}$/i,k9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,P9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,C9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Fg;const N9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,j9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,D9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,V9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,L9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$C="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",M9=new RegExp(`^${$C}$`);function BC(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function F9(n){return new RegExp(`^${BC(n)}$`)}function U9(n){let e=`${$C}T${BC(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function $9(n,e){return!!((e==="v4"||!e)&&N9.test(n)||(e==="v6"||!e)&&j9.test(n))}function B9(n,e){if(!k9.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function z9(n,e){return!!((e==="v4"||!e)&&O9.test(n)||(e==="v6"||!e)&&D9.test(n))}class di extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return ee(i,{code:H.invalid_type,expected:oe.string,received:i.parsedType}),_e}const r=new Un;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ee(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ee(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")P9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"email",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Fg||(Fg=new RegExp(C9,"u")),Fg.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"emoji",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")S9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"uuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")A9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"nanoid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")x9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")T9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")I9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ulid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ee(s,{validation:"url",code:H.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"regex",code:H.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?U9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?M9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?F9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:H.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?R9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"duration",code:H.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?$9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"ip",code:H.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?B9(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"jwt",code:H.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?z9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"cidr",code:H.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?V9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64",code:H.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?L9.test(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{validation:"base64url",code:H.invalid_string,message:i.message}),r.dirty()):je.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:H.invalid_string,...le.errToObj(r)})}_addCheck(e){return new di({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...le.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...le.errToObj(t)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new di({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}di.create=n=>new di({checks:[],typeName:ve.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Ie(n)});function q9(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class th extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return ee(i,{code:H.invalid_type,expected:oe.number,received:i.parsedType}),_e}let r;const s=new Un;for(const i of this._def.checks)i.kind==="int"?je.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?q9(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:H.not_finite,message:i.message}),s.dirty()):je.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,r,s){return new th({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new th({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}th.create=n=>new th({checks:[],typeName:ve.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ie(n)});class nh extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let r;const s=new Un;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ee(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):je.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ee(t,{code:H.invalid_type,expected:oe.bigint,received:t.parsedType}),_e}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,r,s){return new nh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:le.toString(s)}]})}_addCheck(e){return new nh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}nh.create=n=>new nh({checks:[],typeName:ve.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Ie(n)});class dI extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.boolean,received:r.parsedType}),_e}return rr(e.data)}}dI.create=n=>new dI({typeName:ve.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ie(n)});class pp extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return ee(i,{code:H.invalid_type,expected:oe.date,received:i.parsedType}),_e}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ee(i,{code:H.invalid_date}),_e}const r=new Un;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ee(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):je.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pp({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}pp.create=n=>new pp({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ve.ZodDate,...Ie(n)});class fI extends Ce{_parse(e){if(this._getType(e)!==oe.symbol){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.symbol,received:r.parsedType}),_e}return rr(e.data)}}fI.create=n=>new fI({typeName:ve.ZodSymbol,...Ie(n)});class pI extends Ce{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.undefined,received:r.parsedType}),_e}return rr(e.data)}}pI.create=n=>new pI({typeName:ve.ZodUndefined,...Ie(n)});class mI extends Ce{_parse(e){if(this._getType(e)!==oe.null){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.null,received:r.parsedType}),_e}return rr(e.data)}}mI.create=n=>new mI({typeName:ve.ZodNull,...Ie(n)});class gI extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}gI.create=n=>new gI({typeName:ve.ZodAny,...Ie(n)});class yI extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}yI.create=n=>new yI({typeName:ve.ZodUnknown,...Ie(n)});class Vi extends Ce{_parse(e){const t=this._getOrReturnCtx(e);return ee(t,{code:H.invalid_type,expected:oe.never,received:t.parsedType}),_e}}Vi.create=n=>new Vi({typeName:ve.ZodNever,...Ie(n)});class _I extends Ce{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.void,received:r.parsedType}),_e}return rr(e.data)}}_I.create=n=>new _I({typeName:ve.ZodVoid,...Ie(n)});class Jr extends Ce{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==oe.array)return ee(t,{code:H.invalid_type,expected:oe.array,received:t.parsedType}),_e;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(ee(t,{code:o?H.too_big:H.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(ee(t,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(ee(t,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Di(t,o,t.path,a)))).then(o=>Un.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Di(t,o,t.path,a)));return Un.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Jr({...this._def,minLength:{value:e,message:le.toString(t)}})}max(e,t){return new Jr({...this._def,maxLength:{value:e,message:le.toString(t)}})}length(e,t){return new Jr({...this._def,exactLength:{value:e,message:le.toString(t)}})}nonempty(e){return this.min(1,e)}}Jr.create=(n,e)=>new Jr({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Ie(e)});function Na(n){if(n instanceof vt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ai.create(Na(r))}return new vt({...n._def,shape:()=>e})}else return n instanceof Jr?new Jr({...n._def,type:Na(n.element)}):n instanceof Ai?Ai.create(Na(n.unwrap())):n instanceof Wl?Wl.create(Na(n.unwrap())):n instanceof ea?ea.create(n.items.map(e=>Na(e))):n}class vt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=je.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==oe.object){const u=this._getOrReturnCtx(e);return ee(u,{code:H.invalid_type,expected:oe.object,received:u.parsedType}),_e}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Vi&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const h=i[u],d=s.data[u];l.push({key:{status:"valid",value:u},value:h._parse(new Di(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Vi){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(ee(s,{code:H.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const d=s.data[h];l.push({key:{status:"valid",value:h},value:u._parse(new Di(s,d,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of l){const d=await h.key,p=await h.value;u.push({key:d,value:p,alwaysSet:h.alwaysSet})}return u}).then(u=>Un.mergeObjectSync(r,u)):Un.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new vt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:le.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new vt({...this._def,unknownKeys:"strip"})}passthrough(){return new vt({...this._def,unknownKeys:"passthrough"})}extend(e){return new vt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new vt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new vt({...this._def,catchall:e})}pick(e){const t={};for(const r of je.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new vt({...this._def,shape:()=>t})}omit(e){const t={};for(const r of je.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new vt({...this._def,shape:()=>t})}deepPartial(){return Na(this)}partial(e){const t={};for(const r of je.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new vt({...this._def,shape:()=>t})}required(e){const t={};for(const r of je.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ai;)i=i._def.innerType;t[r]=i}return new vt({...this._def,shape:()=>t})}keyof(){return zC(je.objectKeys(this.shape))}}vt.create=(n,e)=>new vt({shape:()=>n,unknownKeys:"strip",catchall:Vi.create(),typeName:ve.ZodObject,...Ie(e)});vt.strictCreate=(n,e)=>new vt({shape:()=>n,unknownKeys:"strict",catchall:Vi.create(),typeName:ve.ZodObject,...Ie(e)});vt.lazycreate=(n,e)=>new vt({shape:n,unknownKeys:"strip",catchall:Vi.create(),typeName:ve.ZodObject,...Ie(e)});class mp extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xs(a.ctx.common.issues));return ee(t,{code:H.invalid_union,unionErrors:o}),_e}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const u={...t,common:{...t.common,issues:[]},parent:null},h=l._parseSync({data:t.data,path:t.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new xs(l));return ee(t,{code:H.invalid_union,unionErrors:a}),_e}}get options(){return this._def.options}}mp.create=(n,e)=>new mp({options:n,typeName:ve.ZodUnion,...Ie(e)});function j_(n,e){const t=Gs(n),r=Gs(e);if(n===e)return{valid:!0,data:n};if(t===oe.object&&r===oe.object){const s=je.objectKeys(e),i=je.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const l=j_(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===oe.array&&r===oe.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],l=j_(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===oe.date&&r===oe.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class gp extends Ce{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(uI(i)||uI(o))return _e;const a=j_(i.value,o.value);return a.valid?((cI(i)||cI(o))&&t.dirty(),{status:t.value,value:a.data}):(ee(r,{code:H.invalid_intersection_types}),_e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}gp.create=(n,e,t)=>new gp({left:n,right:e,typeName:ve.ZodIntersection,...Ie(t)});class ea extends Ce{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.array)return ee(r,{code:H.invalid_type,expected:oe.array,received:r.parsedType}),_e;if(r.data.length<this._def.items.length)return ee(r,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&r.data.length>this._def.items.length&&(ee(r,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Di(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Un.mergeArray(t,o)):Un.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ea({...this._def,rest:e})}}ea.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ea({items:n,typeName:ve.ZodTuple,rest:null,...Ie(e)})};class vI extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.map)return ee(r,{code:H.invalid_type,expected:oe.map,received:r.parsedType}),_e;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:s._parse(new Di(r,a,r.path,[u,"key"])),value:i._parse(new Di(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,h=await l.value;if(u.status==="aborted"||h.status==="aborted")return _e;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,h=l.value;if(u.status==="aborted"||h.status==="aborted")return _e;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}}}}vI.create=(n,e,t)=>new vI({valueType:e,keyType:n,typeName:ve.ZodMap,...Ie(t)});class rh extends Ce{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.set)return ee(r,{code:H.invalid_type,expected:oe.set,received:r.parsedType}),_e;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ee(r,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ee(r,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const h of l){if(h.status==="aborted")return _e;h.status==="dirty"&&t.dirty(),u.add(h.value)}return{status:t.value,value:u}}const a=[...r.data.values()].map((l,u)=>i._parse(new Di(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new rh({...this._def,minSize:{value:e,message:le.toString(t)}})}max(e,t){return new rh({...this._def,maxSize:{value:e,message:le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}rh.create=(n,e)=>new rh({valueType:n,minSize:null,maxSize:null,typeName:ve.ZodSet,...Ie(e)});class wI extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}wI.create=(n,e)=>new wI({getter:n,typeName:ve.ZodLazy,...Ie(e)});class EI extends Ce{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ee(t,{received:t.data,code:H.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:e.data}}get value(){return this._def.value}}EI.create=(n,e)=>new EI({value:n,typeName:ve.ZodLiteral,...Ie(e)});function zC(n,e){return new zl({values:n,typeName:ve.ZodEnum,...Ie(e)})}class zl extends Ce{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return ee(t,{expected:je.joinValues(r),received:t.parsedType,code:H.invalid_type}),_e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return ee(t,{received:t.data,code:H.invalid_enum_value,options:r}),_e}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return zl.create(e,{...this._def,...t})}exclude(e,t=this._def){return zl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}zl.create=zC;class bI extends Ce{_parse(e){const t=je.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==oe.string&&r.parsedType!==oe.number){const s=je.objectValues(t);return ee(r,{expected:je.joinValues(s),received:r.parsedType,code:H.invalid_type}),_e}if(this._cache||(this._cache=new Set(je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=je.objectValues(t);return ee(r,{received:r.data,code:H.invalid_enum_value,options:s}),_e}return rr(e.data)}get enum(){return this._def.values}}bI.create=(n,e)=>new bI({values:n,typeName:ve.ZodNativeEnum,...Ie(e)});class yp extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==oe.promise&&t.common.async===!1)return ee(t,{code:H.invalid_type,expected:oe.promise,received:t.parsedType}),_e;const r=t.parsedType===oe.promise?t.data:Promise.resolve(t.data);return rr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}yp.create=(n,e)=>new yp({type:n,typeName:ve.ZodPromise,...Ie(e)});class ql extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ee(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return _e;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?_e:l.status==="dirty"||t.value==="dirty"?Xu(l.value):l});{if(t.value==="aborted")return _e;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?_e:a.status==="dirty"||t.value==="dirty"?Xu(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?_e:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?_e:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Bl(o))return _e;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Bl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):_e);je.assertNever(s)}}ql.create=(n,e,t)=>new ql({schema:n,typeName:ve.ZodEffects,effect:e,...Ie(t)});ql.createWithPreprocess=(n,e,t)=>new ql({schema:e,effect:{type:"preprocess",transform:n},typeName:ve.ZodEffects,...Ie(t)});class Ai extends Ce{_parse(e){return this._getType(e)===oe.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ai.create=(n,e)=>new Ai({innerType:n,typeName:ve.ZodOptional,...Ie(e)});class Wl extends Ce{_parse(e){return this._getType(e)===oe.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wl.create=(n,e)=>new Wl({innerType:n,typeName:ve.ZodNullable,...Ie(e)});class D_ extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}D_.create=(n,e)=>new D_({innerType:n,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ie(e)});class V_ extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fp(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}V_.create=(n,e)=>new V_({innerType:n,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ie(e)});class xI extends Ce{_parse(e){if(this._getType(e)!==oe.nan){const r=this._getOrReturnCtx(e);return ee(r,{code:H.invalid_type,expected:oe.nan,received:r.parsedType}),_e}return{status:"valid",value:e.data}}}xI.create=n=>new xI({typeName:ve.ZodNaN,...Ie(n)});class W9 extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class y0 extends Ce{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?_e:i.status==="dirty"?(t.dirty(),Xu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?_e:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new y0({in:e,out:t,typeName:ve.ZodPipeline})}}class L_ extends Ce{_parse(e){const t=this._def.innerType._parse(e),r=s=>(Bl(s)&&(s.value=Object.freeze(s.value)),s);return fp(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}L_.create=(n,e)=>new L_({innerType:n,typeName:ve.ZodReadonly,...Ie(e)});var ve;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ve||(ve={}));const Ur=di.create;Vi.create;Jr.create;const _0=vt.create;mp.create;gp.create;ea.create;const K9=zl.create;yp.create;Ai.create;Wl.create;const H9=_0({email:Ur().email("Invalid email address"),password:Ur().min(8,"Password must be at least 8 characters")}),G9=_0({firstName:Ur().min(1,"First name is required"),lastName:Ur().min(1,"Last name is required"),email:Ur().email("Invalid email address"),password:Ur().min(8,"Password must be at least 8 characters"),confirmPassword:Ur(),role:K9(["JOB_SEEKER","EMPLOYER"])}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function bm({isOpen:n,onClose:e,initialMode:t="login"}){const[r,s]=j.useState(t),[i,o]=j.useState(null),[a,l]=j.useState(!1),{login:u,register:h,loginWithGoogle:d}=Wi(),p=C_({resolver:N_(H9)}),g=C_({resolver:N_(G9),defaultValues:{role:"JOB_SEEKER"}}),w=async()=>{o(null),l(!0);const b=await d();l(!1),b.success?e():o(b.error||"Google sign-in failed")},E=async b=>{o(null),l(!0);const _=await u(b.email,b.password);l(!1),_.success?(e(),p.reset()):o(_.error||"Login failed")},T=async b=>{o(null),l(!0);const _=`${b.firstName} ${b.lastName}`,v=b.role==="JOB_SEEKER"?"jobseeker":"employer",N=await h(b.email,b.password,_,v);l(!1),N.success?(e(),g.reset()):o(N.error||"Registration failed")};return n?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 relative",children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:f.jsx($k,{className:"h-6 w-6"})}),f.jsxs("div",{className:"p-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-2",children:r==="login"?"Welcome back":"Create an account"}),f.jsx("p",{className:"text-gray-600 mb-6",children:r==="login"?"Sign in to continue to Taskify":"Join Taskify to find your dream job or hire talent"}),f.jsxs("div",{className:"flex gap-2 mb-6",children:[f.jsx("button",{onClick:()=>{s("login"),o(null)},className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${r==="login"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sign In"}),f.jsx("button",{onClick:()=>{s("register"),o(null)},className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${r==="register"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Sign Up"})]}),i&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:i}),f.jsxs("button",{onClick:w,className:"w-full mb-4 py-3 px-4 border border-gray-300 rounded-md font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),f.jsxs("div",{className:"relative mb-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or continue with email"})})]}),r==="login"?f.jsxs("form",{onSubmit:p.handleSubmit(E),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Email"}),f.jsx("input",{type:"email",...p.register("email"),className:"input",placeholder:"Enter your email"}),p.formState.errors.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.formState.errors.email.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Password"}),f.jsx("input",{type:"password",...p.register("password"),className:"input",placeholder:"Enter your password"}),p.formState.errors.password&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.formState.errors.password.message})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",className:"mr-2"}),f.jsx("span",{className:"text-sm text-gray-700",children:"Remember me"})]}),f.jsx("a",{href:"#",className:"text-sm text-accent hover:underline",children:"Forgot password?"})]}),f.jsx("button",{type:"submit",disabled:a,className:"w-full btn btn-primary",children:a?"Signing in...":"Sign In"})]}):f.jsxs("form",{onSubmit:g.handleSubmit(T),className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"First Name"}),f.jsx("input",{type:"text",...g.register("firstName"),className:"input",placeholder:"John"}),g.formState.errors.firstName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.firstName.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Last Name"}),f.jsx("input",{type:"text",...g.register("lastName"),className:"input",placeholder:"Doe"}),g.formState.errors.lastName&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.lastName.message})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"I am a"}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",value:"JOB_SEEKER",...g.register("role"),className:"mr-2"}),f.jsx("span",{className:"text-sm",children:"Job Seeker"})]}),f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",value:"EMPLOYER",...g.register("role"),className:"mr-2"}),f.jsx("span",{className:"text-sm",children:"Employer"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Email"}),f.jsx("input",{type:"email",...g.register("email"),className:"input",placeholder:"Enter your email"}),g.formState.errors.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.email.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Password"}),f.jsx("input",{type:"password",...g.register("password"),className:"input",placeholder:"Enter your password"}),g.formState.errors.password&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.password.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Confirm Password"}),f.jsx("input",{type:"password",...g.register("confirmPassword"),className:"input",placeholder:"Confirm your password"}),g.formState.errors.confirmPassword&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.formState.errors.confirmPassword.message})]}),f.jsx("button",{type:"submit",disabled:a,className:"w-full btn btn-primary",children:a?"Creating account...":"Create Account"})]})]})]})}):null}function J9(){const[n,e]=j.useState(!1),[t,r]=j.useState(!1),[s,i]=j.useState(!1),{isAuthenticated:o,user:a,logout:l}=Wi(),u=Ui();j.useEffect(()=>{o&&r(!1)},[o]);const h=()=>{l(),u("/")};return f.jsxs(f.Fragment,{children:[f.jsxs("nav",{className:"bg-white shadow",children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between h-16",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0 flex items-center",children:f.jsxs(We,{to:"/",className:"flex items-center",children:[f.jsx("img",{src:"/src/images/image.png",alt:"Taskify Logo",className:"h-10 w-auto mr-2"}),f.jsx("span",{className:"text-primary font-bold text-xl",children:"Taskify"})]})}),f.jsxs("div",{className:"hidden md:ml-6 md:flex md:space-x-4 md:items-center",children:[f.jsxs("div",{className:"relative",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[f.jsxs("button",{className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary",children:["Jobs",f.jsx(qy,{className:"ml-1 h-4 w-4"})]}),f.jsx("div",{className:`absolute left-0 top-full mt-1 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50 transition-all duration-200 ${s?"opacity-100 visible":"opacity-0 invisible"}`,children:f.jsxs("div",{className:"py-1",children:[f.jsx(We,{to:"/jobs",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary",onClick:()=>i(!1),children:"Find Jobs"}),f.jsx(We,{to:"/contact",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary",onClick:()=>i(!1),children:"Post a Job"})]})})]}),f.jsx(We,{to:"/pricing",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary",children:"Pricing"}),f.jsx(We,{to:"/refer",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700",children:"Refer & Earn"}),f.jsx(We,{to:"/contact",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary",children:"Contact"}),o&&(a==null?void 0:a.role)==="EMPLOYER"&&f.jsx(We,{to:"/employer/dashboard",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary",children:"Dashboard"})]})]}),f.jsx("div",{className:"hidden md:ml-6 md:flex md:items-center space-x-4",children:o?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(DL,{className:"h-5 w-5 text-gray-500"}),f.jsxs("span",{className:"text-sm text-gray-700",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})]}),f.jsxs("button",{onClick:h,className:"btn btn-outline-primary",children:[f.jsx(_L,{className:"h-4 w-4 mr-1"}),"Logout"]})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>r(!0),className:"btn btn-outline-primary",children:"Sign In"}),f.jsx("button",{onClick:()=>{r(!0)},className:"btn btn-primary",children:"Get Started"})]})}),f.jsx("div",{className:"flex items-center md:hidden",children:f.jsx("button",{onClick:()=>e(!n),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none",children:n?f.jsx($k,{className:"h-6 w-6"}):f.jsx(xL,{className:"h-6 w-6"})})})]})}),n&&f.jsxs("div",{className:"md:hidden",children:[f.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[f.jsxs("div",{className:"px-3 py-2",children:[f.jsx("div",{className:"text-base font-medium text-gray-700 mb-1",children:"Jobs"}),f.jsx(We,{to:"/jobs",className:"block pl-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-primary",onClick:()=>e(!1),children:"Find Jobs"}),f.jsx(We,{to:"/contact",className:"block pl-4 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-primary",onClick:()=>e(!1),children:"Post a Job"})]}),f.jsx(We,{to:"/pricing",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50",onClick:()=>e(!1),children:"Pricing"}),f.jsx(We,{to:"/contact",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50",onClick:()=>e(!1),children:"Contact"}),o&&(a==null?void 0:a.role)==="EMPLOYER"&&f.jsx(We,{to:"/employer/dashboard",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:bg-gray-50",children:"Dashboard"})]}),f.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:o?f.jsxs("div",{className:"px-4 space-y-2",children:[f.jsxs("div",{className:"text-sm text-gray-700 px-3 py-2",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),f.jsx("button",{onClick:h,className:"w-full btn btn-outline-primary",children:"Logout"})]}):f.jsxs("div",{className:"flex items-center px-4 space-x-2",children:[f.jsx("button",{onClick:()=>{r(!0),e(!1)},className:"flex-1 btn btn-outline-primary",children:"Sign In"}),f.jsx("button",{onClick:()=>{r(!0),e(!1)},className:"flex-1 btn btn-primary",children:"Get Started"})]})})]})]}),f.jsx(bm,{isOpen:t,onClose:()=>r(!1),initialMode:"login"})]})}function Q9(){const n=new Date().getFullYear();return f.jsx("footer",{className:"bg-primary text-white",children:f.jsxs("div",{className:"container mx-auto px-4 py-12",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx(Il,{className:"h-6 w-6 mr-2"}),f.jsx("span",{className:"text-lg font-semibold",children:"Taskify"})]}),f.jsx("p",{className:"text-gray-300 text-sm",children:"Connecting job seekers with employers through an intuitive, modern platform."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-4",children:"For Job Seekers"}),f.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[f.jsx("li",{children:f.jsx(We,{to:"/jobs",className:"hover:text-white",children:"Browse Jobs"})}),f.jsx("li",{children:f.jsx(We,{to:"/pricing",className:"hover:text-white",children:"Pricing"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Career Resources"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Resume Builder"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-4",children:"For Employers"}),f.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[f.jsx("li",{children:f.jsx(We,{to:"/pricing",className:"hover:text-white",children:"Post a Job"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Browse Candidates"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Pricing Plans"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Success Stories"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),f.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"About Us"})}),f.jsx("li",{children:f.jsx(We,{to:"/contact",className:"hover:text-white",children:"Contact"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy Policy"})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white",children:"Terms of Service"})})]})]})]}),f.jsx("div",{className:"border-t border-gray-700 pt-8 text-center text-sm text-gray-300",children:f.jsxs("p",{children:[" ",n," Taskify. All rights reserved."]})})]})})}function Y9(){return f.jsxs("div",{className:"flex flex-col min-h-screen",children:[f.jsx(J9,{}),f.jsx("main",{className:"flex-grow",children:f.jsx(dV,{})}),f.jsx(Q9,{})]})}function X9(){const[n,e]=j.useState(""),[t,r]=j.useState(""),[s,i]=j.useState(!1),o=Ui(),{isAuthenticated:a}=Wi(),l=u=>{u.preventDefault();const h=new URLSearchParams;n&&h.set("keyword",n),t&&h.set("location",t),o(`/jobs?${h.toString()}`)};return f.jsxs("div",{children:[f.jsx("section",{className:"bg-gradient-to-br from-primary via-primary-dark to-primary py-20 text-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Find Your Dream Job Today"}),f.jsx("p",{className:"text-xl mb-8 text-gray-200",children:"Connect with top employers and discover opportunities that match your skills and aspirations."}),f.jsxs("form",{onSubmit:l,className:"bg-white rounded-lg p-2 shadow-xl flex flex-col md:flex-row gap-2",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Wy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",value:n,onChange:u=>e(u.target.value),placeholder:"Job title, keywords, or company",className:"w-full pl-10 pr-4 py-3 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-accent"})]}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Uc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),placeholder:"Location or Remote",className:"w-full pl-10 pr-4 py-3 rounded-md text-gray-900 focus:outline-none focus:ring-2 focus:ring-accent"})]}),f.jsx("button",{type:"submit",className:"btn btn-accent px-8 py-3",children:"Search Jobs"})]}),f.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-6",children:[f.jsx(We,{to:"/jobs?workSchedule=FULL_TIME",className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-md text-sm font-medium transition-colors",children:"Full-time"}),f.jsx(We,{to:"/jobs?employment=REMOTE",className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-md text-sm font-medium transition-colors",children:"Remote"}),f.jsx(We,{to:"/jobs?category=Technology",className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-md text-sm font-medium transition-colors",children:"Tech"}),f.jsx(We,{to:"/jobs?category=Design",className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-md text-sm font-medium transition-colors",children:"Design"})]})]})})}),f.jsx("section",{className:"py-12 bg-gray-50 overflow-hidden",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("p",{className:"text-center text-gray-600 mb-8 font-medium",children:"Trusted by Companies"}),f.jsxs("div",{className:"relative",children:[f.jsx("style",{children:`
              @keyframes scroll {
                0% {
                  transform: translateX(0);
                }
                100% {
                  transform: translateX(-50%);
                }
              }
              .animate-scroll {
                animation: scroll 25s linear infinite;
              }
              .animate-scroll:hover {
                animation-play-state: paused;
              }
            `}),f.jsx("div",{className:"flex animate-scroll whitespace-nowrap",children:[...Array(2)].map((u,h)=>f.jsxs("div",{className:"flex items-center gap-16 shrink-0",children:[f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/uber.png",alt:"Uber",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})}),f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/jet.png",alt:"Jet",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})}),f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/mercor.png",alt:"Mercor",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})}),f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/scale.png",alt:"Scale",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})}),f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/wf.png",alt:"WF",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})}),f.jsx("div",{className:"w-32 h-16 flex items-center justify-center",children:f.jsx("img",{src:"/src/images/download.jpeg",alt:"Company",className:"max-h-12 max-w-full object-contain grayscale hover:grayscale-0 transition-all"})})]},h))})]})]})}),f.jsx("section",{className:"py-16 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-primary",children:"How It Works"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"bg-accent/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:f.jsx(Wy,{className:"h-8 w-8 text-accent"})}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Search Jobs"}),f.jsx("p",{className:"text-gray-600",children:"Use advanced filters to find jobs that match your skills, location, and preferences."})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"bg-accent/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:f.jsx(Il,{className:"h-8 w-8 text-accent"})}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Apply Easily"}),f.jsx("p",{className:"text-gray-600",children:"Submit your application with a cover letter and resume in just a few clicks."})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"bg-accent/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:f.jsx(Uk,{className:"h-8 w-8 text-accent"})}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Grow Your Career"}),f.jsx("p",{className:"text-gray-600",children:"Track your applications and get matched with opportunities that fit your goals."})]})]})]})}),f.jsx("section",{className:"py-16 bg-white",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 max-w-6xl mx-auto items-center",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold mb-6 text-primary",children:"Everything you need to find your next opportunity"}),f.jsx("div",{className:"space-y-4",children:["Advanced search and filtering","Real-time job matching","Easy application process","Application tracking","Company profiles and reviews","Email notifications"].map(u=>f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(oL,{className:"h-5 w-5 text-success flex-shrink-0"}),f.jsx("span",{className:"text-gray-700",children:u})]},u))}),!a&&f.jsx("button",{onClick:()=>i(!0),className:"mt-6 btn btn-primary",children:"Get Started Free"})]}),f.jsx("div",{className:"bg-gradient-to-br from-accent/10 to-primary/10 rounded-lg p-8",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("div",{className:"w-12 h-12 bg-accent/20 rounded-lg"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold",children:"Senior UI/UX Designer"}),f.jsx("div",{className:"text-sm text-gray-600",children:"TechCorp  San Francisco"})]})]}),f.jsxs("div",{className:"flex gap-2 mt-2",children:[f.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:"Remote"}),f.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:"Full-time"})]})]}),f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("div",{className:"w-12 h-12 bg-accent/20 rounded-lg"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-semibold",children:"Full Stack Developer"}),f.jsx("div",{className:"text-sm text-gray-600",children:"StartupHub  New York"})]})]}),f.jsxs("div",{className:"flex gap-2 mt-2",children:[f.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:"Hybrid"}),f.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:"Full-time"})]})]})]})})]})})}),f.jsx("section",{className:"py-16 bg-primary text-white",children:f.jsxs("div",{className:"container mx-auto px-4 text-center",children:[f.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to find your dream job?"}),f.jsx("p",{className:"text-xl mb-8 text-gray-200",children:"Join thousands of job seekers and employers on Taskify today."}),f.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:a?f.jsx(We,{to:"/jobs",className:"btn bg-white text-primary hover:bg-gray-100",children:"Browse Jobs"}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>i(!0),className:"btn bg-white text-primary hover:bg-gray-100",children:"Sign Up Free"}),f.jsx(We,{to:"/jobs",className:"btn btn-outline-primary border-white text-white hover:bg-white/10",children:"Browse Jobs"})]})})]})}),f.jsx(bm,{isOpen:s,onClose:()=>i(!1),initialMode:"register"})]})}const Z9="/api/jobs";class qC{static parseXMLJob(e){try{const t=b=>{var v;const _=e.getElementsByTagName(b)[0];return((v=_==null?void 0:_.textContent)==null?void 0:v.trim())||""},r=t("title"),s=t("company"),i=t("city"),o=t("state"),a=t("country"),l=t("description"),u=t("type"),h=t("category"),d=t("url"),p=t("date"),g=t("modifieddate"),w=t("postalcode"),E=t("referencenumber");if(!r||!s)return null;const T=[i,o,a].filter(Boolean).join(", ");return{id:E||`job-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:r,company:s,location:T,city:i,state:o,country:a,description:l,type:u||"FULL_TIME",category:h||"General",applyUrl:d,date:p,modifiedDate:g,postalCode:w}}catch(t){return console.error("Error parsing job element:",t),null}}static async fetchJobs(){try{console.log("Fetching jobs from XML feed via proxy...");const e=await fetch(Z9);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text();console.log("XML fetched successfully, length:",t.length);const s=new DOMParser().parseFromString(t,"text/xml"),i=s.querySelector("parsererror");if(i)throw console.error("XML parsing error:",i.textContent),new Error("Failed to parse XML");const o=s.getElementsByTagName("job");console.log("Found job elements:",o.length);const a=[];for(let l=0;l<o.length;l++){const u=this.parseXMLJob(o[l]);u&&a.push(u)}return console.log("Successfully parsed jobs:",a.length),a}catch(e){return console.error("Error fetching XML feed:",e),[]}}static filterJobs(e,t){return e.filter(r=>{if(t.keyword){const s=t.keyword.toLowerCase();if(!(r.title.toLowerCase().includes(s)||r.company.toLowerCase().includes(s)||r.description.toLowerCase().includes(s)))return!1}if(t.location){const s=t.location.toLowerCase();if(!(r.location.toLowerCase().includes(s)||r.city.toLowerCase().includes(s)||r.state.toLowerCase().includes(s)))return!1}if(t.type&&r.type!==t.type)return!1;if(t.category){const s=t.category.toLowerCase();if(!r.category.toLowerCase().includes(s))return!1}return!0})}}function e8(){const[n,e]=Vk(),t=Ui(),[r,s]=j.useState([]),[i,o]=j.useState(!0),[a,l]=j.useState(n.get("keyword")||""),[u,h]=j.useState(n.get("location")||""),[d,p]=j.useState(n.get("experience")||""),[g,w]=j.useState(n.get("type")||""),[E,T]=j.useState(n.get("category")||""),[b,_]=j.useState(n.get("date")||""),[v,N]=j.useState([0,500]),[D,F]=j.useState([]),[S,x]=j.useState([]),[A,R]=j.useState(1),C=20,O=async()=>{o(!0);try{const re=await qC.fetchJobs();s(re)}catch(re){console.error("Failed to fetch jobs:",re)}finally{o(!1)}},k=j.useMemo(()=>r.filter(re=>{var Cs,la,Ns;const xe=!a||re.title.toLowerCase().includes(a.toLowerCase())||re.company.toLowerCase().includes(a.toLowerCase()),It=!u||((Cs=re.location)==null?void 0:Cs.toLowerCase().includes(u.toLowerCase())),jt=!d||re.title.toLowerCase().includes(d.toLowerCase()),mn=!g||((la=re.type)==null?void 0:la.toLowerCase().includes(g.toLowerCase())),Rs=!E||((Ns=re.category)==null?void 0:Ns.toLowerCase().includes(E.toLowerCase())),Ps=D.length===0||D.some(Hi=>{var Os;return(Os=re.type)==null?void 0:Os.toLowerCase().includes(Hi.toLowerCase())});return xe&&It&&jt&&mn&&Rs&&Ps}),[r,a,u,d,g,E,D]),Ee=re=>{F(xe=>xe.includes(re)?xe.filter(It=>It!==re):[...xe,re])},Be=re=>{x(xe=>xe.includes(re)?xe.filter(It=>It!==re):[...xe,re])},lt=re=>{const xe=[re,v[1]];xe[0]>xe[1]&&(xe[1]=xe[0]),N(xe)};j.useEffect(()=>{O()},[]);const Ot=re=>{re.preventDefault();const xe=new URLSearchParams;a&&xe.set("keyword",a),u&&xe.set("location",u),d&&xe.set("experience",d),g&&xe.set("type",g),E&&xe.set("category",E),e(xe)},Y=re=>{t(`/jobs/${re.id}`,{state:{job:re}})},ce=Math.ceil(k.length/C),me=(A-1)*C,Le=me+C,Je=k.slice(me,Le);return f.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:f.jsxs("div",{className:"max-w-[1400px] mx-auto px-6",children:[f.jsx("form",{onSubmit:Ot,className:"mb-6",children:f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Wy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",value:a,onChange:re=>l(re.target.value),placeholder:"Search jobs...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors",children:"Search"})]})}),f.jsxs("div",{className:"flex gap-6",children:[f.jsx("div",{className:"w-64 flex-shrink-0",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[f.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Filters"}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium mb-3",children:"Working schedule"}),f.jsx("div",{className:"space-y-2",children:["Full time","Part time","Internship","Project work","Volunteering"].map(re=>f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:D.includes(re),onChange:()=>Ee(re),className:"w-4 h-4 text-blue-600 rounded"}),f.jsx("span",{className:"ml-2 text-sm",children:re})]},re))})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium mb-3",children:"Employment type"}),f.jsx("div",{className:"space-y-2",children:["Full day","Flexible schedule","Shift work","Distant work","Shift method"].map(re=>f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",checked:S.includes(re),onChange:()=>Be(re),className:"w-4 h-4 text-blue-600 rounded"}),f.jsx("span",{className:"ml-2 text-sm",children:re})]},re))})]})]})]})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 flex-1 max-w-[180px] border border-gray-300",children:[f.jsx(Uc,{className:"w-4 h-4 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"Work location",value:u,onChange:re=>h(re.target.value),className:"text-sm bg-transparent outline-none flex-1"}),f.jsx(qy,{className:"w-3 h-3 text-gray-400"})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 flex-1 max-w-[180px] border border-gray-300",children:[f.jsx(Il,{className:"w-4 h-4 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"Experience",value:d,onChange:re=>p(re.target.value),className:"text-sm bg-transparent outline-none flex-1"}),f.jsx(qy,{className:"w-3 h-3 text-gray-400"})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg px-3 py-2 flex-1 max-w-[180px] border border-gray-300",children:[f.jsx(zy,{className:"w-4 h-4 text-gray-400"}),f.jsx("input",{type:"date",value:b,onChange:re=>_(re.target.value),className:"text-sm bg-transparent outline-none flex-1"})]}),f.jsxs("div",{className:"w-[160px]",children:[f.jsx("div",{className:"flex items-center justify-between mb-1",children:f.jsxs("span",{className:"text-xs font-medium",children:["Salary ($",v[0]," - $",v[1],")/hr"]})}),f.jsxs("div",{className:"relative flex items-center gap-1",children:[f.jsx("span",{className:"text-[10px] text-gray-400",children:"$0"}),f.jsx("input",{type:"range",min:"0",max:"500",step:"10",value:v[0],onChange:re=>lt(parseInt(re.target.value)),className:"w-full h-1 rounded-lg cursor-pointer",style:{background:`linear-gradient(to right, #3b82f6 ${v[0]/500*100}%, #e5e7eb ${v[0]/500*100}%)`,accentColor:"#3b82f6"}}),f.jsx("span",{className:"text-[10px] text-gray-400",children:"$500"})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h2",{className:"text-gray-900 text-2xl font-semibold",children:"Recommended jobs"}),f.jsx("span",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm font-medium",children:k.length})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-gray-500 text-sm",children:"Sort by:"}),f.jsx("span",{className:"text-gray-900 text-sm font-medium",children:"Last updated"}),f.jsx("button",{className:"text-gray-500 hover:text-gray-900",children:f.jsx(NL,{className:"w-5 h-5"})})]})]}),i?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx(gL,{className:"h-8 w-8 animate-spin text-blue-600"})}):k.length===0?f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx("p",{className:"text-lg",children:"No jobs found matching your filters."}),f.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search criteria."})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Je.map((re,xe)=>{const It=["from-blue-500 to-purple-600","from-green-500 to-teal-600","from-orange-500 to-red-600","from-pink-500 to-rose-600","from-indigo-500 to-blue-600","from-yellow-500 to-orange-600","from-cyan-500 to-blue-600","from-purple-500 to-pink-600"],jt=It[xe%It.length];return f.jsxs("div",{onClick:()=>Y(re),className:"relative overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer bg-white",children:[f.jsx("div",{className:`h-2 bg-gradient-to-r ${jt}`}),f.jsxs("div",{className:"p-5",children:[f.jsx("div",{className:"flex items-start justify-between mb-3",children:f.jsx("h3",{className:"text-lg font-bold text-gray-800 line-clamp-2 flex-1",children:re.title})}),f.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[f.jsx(Mk,{className:"h-4 w-4 flex-shrink-0"}),f.jsx("span",{className:"truncate font-medium",children:re.company})]}),re.location&&f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(Uc,{className:"h-4 w-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:re.location})]})]}),f.jsx("button",{className:`w-full bg-gradient-to-r ${jt} hover:opacity-90 text-white font-semibold py-2.5 px-4 rounded-lg transition-all duration-200`,children:"View Details"})]})]},re.id)})}),ce>1&&f.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8",children:[f.jsx("button",{onClick:()=>R(A-1),disabled:A===1,className:"btn btn-outline-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),f.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",A," of ",ce]}),f.jsx("button",{onClick:()=>R(A+1),disabled:A>=ce,className:"btn btn-outline-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]})})}function t8(){var d,p;const{id:n}=XD(),e=Is(),[t,r]=j.useState(((d=e.state)==null?void 0:d.job)||null),[s,i]=j.useState(!((p=e.state)!=null&&p.job)),[o,a]=j.useState(!1),{isAuthenticated:l}=Wi();j.useEffect(()=>{(async()=>{if(!t){i(!0);try{const E=(await qC.fetchJobs()).find(T=>T.id===n);E&&r(E)}catch(w){console.error("Failed to fetch job:",w)}finally{i(!1)}}})()},[n]);const u=()=>{if(t!=null&&t.applyUrl){if(!l){a(!0);return}window.open(t.applyUrl,"_blank","noopener,noreferrer")}},h=g=>{try{return new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return g}};return s?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading job details..."})]})}):t?f.jsx("div",{className:"min-h-screen bg-background py-8",children:f.jsxs("div",{className:"container mx-auto px-4 max-w-5xl",children:[f.jsx(We,{to:"/jobs",className:"inline-flex items-center text-accent hover:underline mb-6",children:" Back to Jobs"}),f.jsx("div",{className:"card mb-6",children:f.jsxs("div",{className:"flex items-start gap-6",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:t.title}),f.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-secondary mb-4",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Mk,{className:"h-5 w-5"}),f.jsx("span",{className:"font-medium",children:t.company})]}),t.location&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Uc,{className:"h-5 w-5"}),f.jsx("span",{children:t.location})]}),t.type&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Il,{className:"h-5 w-5"}),f.jsx("span",{children:t.type})]})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[t.date&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(zy,{className:"h-4 w-4"}),f.jsxs("span",{children:["Posted: ",h(t.date)]})]}),t.modifiedDate&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(zy,{className:"h-4 w-4"}),f.jsxs("span",{children:["Updated: ",h(t.modifiedDate)]})]})]})]}),f.jsx("div",{children:f.jsxs("button",{onClick:u,className:"btn btn-primary px-8 flex items-center gap-2",children:["Apply Now",f.jsx(Mb,{className:"h-4 w-4"})]})})]})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-2 space-y-6",children:f.jsxs("div",{className:"card",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Job Description"}),f.jsx("div",{className:"prose max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:t.description}})]})}),f.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Job Details"}),f.jsxs("div",{className:"space-y-3 text-sm",children:[t.company&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Company:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.company})]}),t.category&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Category:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.category})]}),t.type&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Employment Type:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.type})]}),t.city&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"City:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.city})]}),t.state&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"State:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.state})]}),t.country&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Country:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.country})]}),t.postalCode&&f.jsxs("div",{children:[f.jsx("span",{className:"font-medium text-gray-700",children:"Postal Code:"}),f.jsx("span",{className:"ml-2 text-gray-600",children:t.postalCode})]})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tags"}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.category&&f.jsx("span",{className:"px-3 py-1 bg-accent/10 text-accent text-sm rounded",children:t.category}),t.type&&f.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded",children:t.type})]})]}),f.jsxs("button",{onClick:u,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:["Apply on External Site",f.jsx(Mb,{className:"h-4 w-4"})]})]})]}),f.jsx(bm,{isOpen:o,onClose:()=>a(!1),initialMode:"register"})]})}):f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Job Not Found"}),f.jsx("p",{className:"text-gray-600 mb-4",children:"The job you're looking for doesn't exist."}),f.jsx(We,{to:"/jobs",className:"btn btn-primary",children:"Browse All Jobs"})]})})}function n8(){const[n,e]=j.useState(!1),{isAuthenticated:t}=Wi(),r=[{name:"Starter",price:"$49",period:"month",description:"Perfect for small businesses",features:["3 job posts","Basic applicant tracking","Company profile","Email support","Standard listings"],cta:"Start Free Trial",popular:!1},{name:"Pro",price:"$149",period:"month",description:"For growing companies",features:["15 job posts","Advanced filtering","Featured listings","Priority support","Analytics dashboard","Candidate matching"],cta:"Start Free Trial",popular:!0},{name:"Enterprise",price:"Custom",period:"",description:"For large organizations",features:["Unlimited job posts","Dedicated support","API access","Custom integrations","White-label options","Dedicated account manager"],cta:"Contact Sales",popular:!1}];return f.jsxs("div",{className:"min-h-screen bg-background py-16",children:[f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h1",{className:"text-4xl font-bold text-primary mb-4",children:"Simple, Transparent Pricing"}),f.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Choose the plan that's right for you. All plans include a 14-day free trial."})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-semibold text-center mb-8 text-primary",children:"For Employers"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:r.map(s=>f.jsxs("div",{className:`card relative ${s.popular?"ring-2 ring-accent":""}`,children:[s.popular&&f.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:f.jsx("span",{className:"bg-accent text-white px-4 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),f.jsxs("div",{className:"text-center mb-6",children:[f.jsx("h3",{className:"text-2xl font-bold text-primary mb-2",children:s.name}),f.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[f.jsx("span",{className:"text-4xl font-bold",children:s.price}),s.period&&f.jsxs("span",{className:"text-gray-600",children:["/",s.period]})]}),f.jsx("p",{className:"text-gray-600 mt-2",children:s.description})]}),f.jsx("ul",{className:"space-y-3 mb-8",children:s.features.map((i,o)=>f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx(Fk,{className:"h-5 w-5 text-success flex-shrink-0 mt-0.5"}),f.jsx("span",{className:"text-gray-700",children:i})]},o))}),s.name==="Enterprise"?f.jsx(We,{to:"/contact",className:`w-full btn ${s.popular?"btn-primary":"btn-outline-primary"} block text-center`,children:s.cta}):t?f.jsx("button",{className:`w-full btn ${s.popular?"btn-primary":"btn-outline-primary"}`,children:s.cta}):f.jsx("button",{onClick:()=>e(!0),className:`w-full btn ${s.popular?"btn-primary":"btn-outline-primary"}`,children:s.cta})]},s.name))})]})]}),f.jsx(bm,{isOpen:n,onClose:()=>e(!1),initialMode:"register"})]})}var v0={},_p={},M_=function(n,e){return M_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},M_(n,e)};function WC(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vp=function(){return vp=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vp.apply(this,arguments)};function ou(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function KC(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i}function HC(n,e){return function(t,r){e(t,r,n)}}function GC(n,e,t,r,s,i){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&n?r.static?n:n.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),d,p=!1,g=t.length-1;g>=0;g--){var w={};for(var E in r)w[E]=E==="access"?{}:r[E];for(var E in r.access)w.access[E]=r.access[E];w.addInitializer=function(b){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(b||null))};var T=(0,t[g])(a==="accessor"?{get:h.get,set:h.set}:h[l],w);if(a==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(d=o(T.get))&&(h.get=d),(d=o(T.set))&&(h.set=d),(d=o(T.init))&&s.unshift(d)}else(d=o(T))&&(a==="field"?s.unshift(d):h[l]=d)}u&&Object.defineProperty(u,r.name,h),p=!0}function JC(n,e,t){for(var r=arguments.length>2,s=0;s<e.length;s++)t=r?e[s].call(n,t):e[s].call(n);return r?t:void 0}function QC(n){return typeof n=="symbol"?n:"".concat(n)}function YC(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function XC(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ne(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{u(r.next(h))}catch(d){o(d)}}function l(h){try{u(r.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function ZC(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return l([u,h])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,s=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(h){u=[6,h],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var xm=Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function eN(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xm(e,n,t)}function wp(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w0(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function tN(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(w0(arguments[e]));return n}function nN(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),s=0,e=0;e<t;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function rN(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function Kl(n){return this instanceof Kl?(this.v=n,this):new Kl(n)}function sN(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(w){return Promise.resolve(w).then(g,d)}}function a(g,w){r[g]&&(s[g]=function(E){return new Promise(function(T,b){i.push([g,E,T,b])>1||l(g,E)})},w&&(s[g]=w(s[g])))}function l(g,w){try{u(r[g](w))}catch(E){p(i[0][3],E)}}function u(g){g.value instanceof Kl?Promise.resolve(g.value.v).then(h,d):p(i[0][2],g)}function h(g){l("next",g)}function d(g){l("throw",g)}function p(g,w){g(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function iN(n){var e,t;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=n[s]?function(o){return(t=!t)?{value:Kl(n[s](o)),done:!1}:i?i(o):o}:i}}function oN(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wp=="function"?wp(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(o){return new Promise(function(a,l){o=n[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(u){i({value:u,done:a})},o)}}function aN(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var r8=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},F_=function(n){return F_=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},F_(n)};function lN(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=F_(n),r=0;r<t.length;r++)t[r]!=="default"&&xm(e,n,t[r]);return r8(e,n),e}function uN(n){return n&&n.__esModule?n:{default:n}}function cN(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function hN(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t}function dN(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function fN(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var s8=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function pN(n){function e(i){n.error=n.hasError?new s8(i,n.error,"An error was suppressed during disposal."):i,n.hasError=!0}var t,r=0;function s(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(s);if(t.dispose){var i=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return s()}function mN(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?t:s+i+"."+o.toLowerCase()+"js"}):n}const i8={__extends:WC,__assign:vp,__rest:ou,__decorate:KC,__param:HC,__esDecorate:GC,__runInitializers:JC,__propKey:QC,__setFunctionName:YC,__metadata:XC,__awaiter:ne,__generator:ZC,__createBinding:xm,__exportStar:eN,__values:wp,__read:w0,__spread:tN,__spreadArrays:nN,__spreadArray:rN,__await:Kl,__asyncGenerator:sN,__asyncDelegator:iN,__asyncValues:oN,__makeTemplateObject:aN,__importStar:lN,__importDefault:uN,__classPrivateFieldGet:cN,__classPrivateFieldSet:hN,__classPrivateFieldIn:dN,__addDisposableResource:fN,__disposeResources:pN,__rewriteRelativeImportExtension:mN},o8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fN,get __assign(){return vp},__asyncDelegator:iN,__asyncGenerator:sN,__asyncValues:oN,__await:Kl,__awaiter:ne,__classPrivateFieldGet:cN,__classPrivateFieldIn:dN,__classPrivateFieldSet:hN,__createBinding:xm,__decorate:KC,__disposeResources:pN,__esDecorate:GC,__exportStar:eN,__extends:WC,__generator:ZC,__importDefault:uN,__importStar:lN,__makeTemplateObject:aN,__metadata:XC,__param:HC,__propKey:QC,__read:w0,__rest:ou,__rewriteRelativeImportExtension:mN,__runInitializers:JC,__setFunctionName:YC,__spread:tN,__spreadArray:rN,__spreadArrays:nN,__values:wp,default:i8},Symbol.toStringTag,{value:"Module"})),a8=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);let Tm=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},gN=class extends Tm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},U_=class extends Tm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},$_=class extends Tm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ep;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Ep||(Ep={}));class l8{constructor(e,{headers:t={},customFetch:r,region:s=Ep.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=a8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ne(this,arguments,void 0,function*(t,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:h,timeout:d}=r;let p={},{region:g}=r;g||(g=this.region);const w=new URL(`${this.url}/${t}`);g&&g!=="any"&&(p["x-region"]=g,w.searchParams.set("forceFunctionRegion",g));let E;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",E=u):typeof u=="string"?(p["Content-Type"]="text/plain",E=u):typeof FormData<"u"&&u instanceof FormData?E=u:(p["Content-Type"]="application/json",E=JSON.stringify(u)):E=u;let T=h;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),h?(T=o.signal,h.addEventListener("abort",()=>o.abort())):T=o.signal);const b=yield this.fetch(w.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:E,signal:T}).catch(D=>{throw new gN(D)}),_=b.headers.get("x-relay-error");if(_&&_==="true")throw new U_(b);if(!b.ok)throw new $_(b);let v=((s=b.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),N;return v==="application/json"?N=yield b.json():v==="application/octet-stream"||v==="application/pdf"?N=yield b.blob():v==="text/event-stream"?N=b:v==="multipart/form-data"?N=yield b.formData():N=yield b.text(),{data:N,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof $_||a instanceof U_?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const u8=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Ep},FunctionsClient:l8,FunctionsError:Tm,FunctionsFetchError:gN,FunctionsHttpError:$_,FunctionsRelayError:U_},Symbol.toStringTag,{value:"Module"})),yN=ch(u8);var en={};const au=ch(o8);var bd={},xd={},Td={},Id={},Sd={},Ad={},TI;function _N(){if(TI)return Ad;TI=1,Object.defineProperty(Ad,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ad.default=n,Ad}var II;function vN(){if(II)return Sd;II=1,Object.defineProperty(Sd,"__esModule",{value:!0});const e=au.__importDefault(_N());let t=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,d,p;let g=null,w=null,E=null,T=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const D=await l.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?w=D:w=JSON.parse(D))}const v=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),N=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&N&&N.length>1&&(E=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(g={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,E=null,T=406,b="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const v=await l.text();try{g=JSON.parse(v),Array.isArray(g)&&l.status===404&&(w=[],g=null,T=200,b="OK")}catch{l.status===404&&v===""?(T=204,b="No Content"):g={message:v}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,T=200,b="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:w,count:E,status:T,statusText:b}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,h,d,p,g,w;let E="";const T=l==null?void 0:l.cause;if(T){const b=(u=T==null?void 0:T.message)!==null&&u!==void 0?u:"",_=(h=T==null?void 0:T.code)!==null&&h!==void 0?h:"";E=`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,E+=`

Caused by: ${(p=T==null?void 0:T.name)!==null&&p!==void 0?p:"Error"}: ${b}`,_&&(E+=` (${_})`),T!=null&&T.stack&&(E+=`
${T.stack}`)}else E=(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(w=l==null?void 0:l.name)!==null&&w!==void 0?w:"FetchError"}: ${l==null?void 0:l.message}`,details:E,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return Sd.default=t,Sd}var SI;function wN(){if(SI)return Id;SI=1,Object.defineProperty(Id,"__esModule",{value:!0});const e=au.__importDefault(vN());let t=class extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var h;const d=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return Id.default=t,Id}var AI;function E0(){if(AI)return Td;AI=1,Object.defineProperty(Td,"__esModule",{value:!0});const e=au.__importDefault(wN()),t=new RegExp("[,()]");let r=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${u}fts${h}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return Td.default=r,Td}var kI;function EN(){if(kI)return xd;kI=1,Object.defineProperty(xd,"__esModule",{value:!0});const e=au.__importDefault(E0());let t=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(u.length>0){const h=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return xd.default=t,xd}var RI;function c8(){if(RI)return bd;RI=1,Object.defineProperty(bd,"__esModule",{value:!0});const n=au,e=n.__importDefault(EN()),t=n.__importDefault(E0());let r=class bN{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new bN(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:u}={}){var h;let d;const p=new URL(`${this.url}/rpc/${i}`);let g;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([E,T])=>T!==void 0).map(([E,T])=>[E,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([E,T])=>{p.searchParams.append(E,T)})):(d="POST",g=o);const w=new Headers(this.headers);return u&&w.set("Prefer",`count=${u}`),new t.default({method:d,url:p,headers:w,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};return bd.default=r,bd}Object.defineProperty(en,"__esModule",{value:!0});en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const lu=au,xN=lu.__importDefault(c8());en.PostgrestClient=xN.default;const TN=lu.__importDefault(EN());en.PostgrestQueryBuilder=TN.default;const IN=lu.__importDefault(E0());en.PostgrestFilterBuilder=IN.default;const SN=lu.__importDefault(wN());en.PostgrestTransformBuilder=SN.default;const AN=lu.__importDefault(vN());en.PostgrestBuilder=AN.default;const kN=lu.__importDefault(_N());en.PostgrestError=kN.default;en.default={PostgrestClient:xN.default,PostgrestQueryBuilder:TN.default,PostgrestFilterBuilder:IN.default,PostgrestTransformBuilder:SN.default,PostgrestBuilder:AN.default,PostgrestError:kN.default};class RN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const h8="2.87.0",d8=`realtime-js/${h8}`,PN="1.0.0",f8="2.0.0",PI=PN,B_=1e4,p8=1e3,m8=100;var go;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(go||(go={}));var yt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(yt||(yt={}));var pr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(pr||(pr={}));var z_;(function(n){n.websocket="websocket"})(z_||(z_={}));var yo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(yo||(yo={}));class g8{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let w=new DataView(g),E=0;w.setUint8(E++,this.KINDS.userBroadcastPush),w.setUint8(E++,l.length),w.setUint8(E++,a.length),w.setUint8(E++,o.length),w.setUint8(E++,u.length),w.setUint8(E++,d.length),w.setUint8(E++,t),Array.from(l,b=>w.setUint8(E++,b.charCodeAt(0))),Array.from(a,b=>w.setUint8(E++,b.charCodeAt(0))),Array.from(o,b=>w.setUint8(E++,b.charCodeAt(0))),Array.from(u,b=>w.setUint8(E++,b.charCodeAt(0))),Array.from(d,b=>w.setUint8(E++,b.charCodeAt(0)));var T=new Uint8Array(g.byteLength+r.byteLength);return T.set(new Uint8Array(g),0),T.set(new Uint8Array(r),g.byteLength),T.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return t({join_ref:s,ref:i,topic:o,event:a,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const p=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,w={type:this.BROADCAST_EVENT,event:h,payload:g};return o>0&&(w.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class CN{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(He||(He={}));const CI=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=y8(o,n,e,s),i),{}):{}},y8=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?NN(i,o):q_(o)},NN=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return E8(e,t)}switch(n){case He.bool:return _8(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return v8(e);case He.json:case He.jsonb:return w8(e);case He.timestamp:return b8(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return q_(e);default:return q_(e)}},q_=n=>n,_8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},v8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},w8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},E8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>NN(e,a))}return n},b8=n=>typeof n=="string"?n.replace(" ","T"):n,ON=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ug{constructor(e,t,r={},s=B_){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var W_;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(W_||(W_={}));let jN=class uf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uf.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=uf.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=uf.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,h)=>{o[u]||(l[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const p=h.map(T=>T.presence_ref),g=d.map(T=>T.presence_ref),w=h.filter(T=>g.indexOf(T.presence_ref)<0),E=d.filter(T=>p.indexOf(T.presence_ref)<0);w.length>0&&(a[u]=w),E.length>0&&(l[u]=E)}else a[u]=h}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),h.length>0){const d=e[a].map(g=>g.presence_ref),p=h.filter(g=>d.indexOf(g.presence_ref)<0);e[a].unshift(...p)}r(a,h,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const h=l.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var K_;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(K_||(K_={}));var al;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(al||(al={}));var Dr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Dr||(Dr={}));const x8=yt;let DN=class VN{constructor(e,t={config:{}},r){var s,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ug(this,pr.join,this.params,this.timeout),this.rejoinTimer=new CN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new jN(this),this.broadcastEndpointURL=ON(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[al.PRESENCE]&&this.bindings[al.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Dr.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Dr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var w;if(this.socket.setAuth(),g===void 0){e==null||e(Dr.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,T=(w=E==null?void 0:E.length)!==null&&w!==void 0?w:0,b=[];for(let _=0;_<T;_++){const v=E[_],{filter:{event:N,schema:D,table:F,filter:S}}=v,x=g&&g[_];if(x&&x.event===N&&x.schema===D&&x.table===F&&x.filter===S)b.push(Object.assign(Object.assign({},v),{id:x.id}));else{this.unsubscribe(),this.state=yt.errored,e==null||e(Dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Dr.SUBSCRIBED);return}}).receive("error",g=>{this.state=yt.errored,e==null||e(Dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===yt.joined&&e===al.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ug(this,pr.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ug(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>m8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:h}=pr;if(r&&[a,l,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var w,E,T;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(E=g.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===o}).map(g=>g.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var w,E,T,b,_,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const N=g.id,D=(w=g.filter)===null||w===void 0?void 0:w.event;return N&&((E=t.ids)===null||E===void 0?void 0:E.includes(N))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const N=(_=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return N==="*"||N===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:E,table:T,commit_timestamp:b,type:_,errors:v}=w;p=Object.assign(Object.assign({},{schema:E,table:T,commit_timestamp:b,eventType:_,new:{},old:{},errors:v}),this._getPayloadRecords(w))}g.callback(p,r)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&VN.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pr.close,{},e)}_onError(e){this._on(pr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=CI(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=CI(e.columns,e.old_record)),t}};const $g=()=>{},kd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},T8=[1e3,2e3,5e3,1e4],I8=1e4,S8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let A8=class{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=B_,this.transport=null,this.heartbeatIntervalMs=kd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$g,this.ref=0,this.reconnectTimer=null,this.vsn=PI,this.logger=$g,this.conn=null,this.sendBuffer=[],this.serializer=new g8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${z_.websocket}`,this.httpEndpoint=ON(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=RN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case go.connecting:return yo.Connecting;case go.open:return yo.Open;case go.closing:return yo.Closing;default:return yo.Closed}}isConnected(){return this.connectionState()===yo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new DN(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(p8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},kd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=t,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===go.open||this.conn.readyState===go.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([S8],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:d8};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(pr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new CN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,o,a,l,u,h,d,p,g;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:B_,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:kd.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:$g,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:PI,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:w=>T8[w-1]||I8,this.vsn){case PN:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(w,E)=>E(JSON.stringify(w)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(w,E)=>E(JSON.parse(w));break;case f8:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const k8=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:x8,get REALTIME_LISTEN_TYPES(){return al},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return K_},get REALTIME_PRESENCE_LISTEN_EVENTS(){return W_},get REALTIME_SUBSCRIBE_STATES(){return Dr},RealtimeChannel:DN,RealtimeClient:A8,RealtimePresence:jN,WebSocketFactory:RN},Symbol.toStringTag,{value:"Module"})),LN=ch(k8);class jh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ze(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class MN extends jh{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bp extends jh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const b0=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),R8=()=>Response,H_=n=>{if(Array.isArray(n))return n.map(t=>H_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=H_(r)}),e},P8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},C8=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),Bg=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},N8=(n,e,t)=>ne(void 0,void 0,void 0,function*(){const r=yield R8();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new MN(Bg(s),i,o))}).catch(s=>{e(new bp(Bg(s),s))}):e(new bp(Bg(n),n))}),O8=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(P8(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Dh(n,e,t,r,s,i){return ne(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,O8(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>N8(l,a,r))})})}function sh(n,e,t,r){return ne(this,void 0,void 0,function*(){return Dh(n,"GET",e,t,r)})}function lr(n,e,t,r,s){return ne(this,void 0,void 0,function*(){return Dh(n,"POST",e,r,s,t)})}function G_(n,e,t,r,s){return ne(this,void 0,void 0,function*(){return Dh(n,"PUT",e,r,s,t)})}function j8(n,e,t,r){return ne(this,void 0,void 0,function*(){return Dh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function x0(n,e,t,r,s){return ne(this,void 0,void 0,function*(){return Dh(n,"DELETE",e,r,s,t)})}class D8{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}var FN;class V8{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[FN]="BlobDownloadBuilder",this.promise=null}asStream(){return new D8(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}}FN=Symbol.toStringTag;const L8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},NI={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M8{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=b0(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},NI),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),d=yield(e=="PUT"?G_:lr)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ze(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:NI.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield G_(this.fetch,a.toString(),l,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new jh("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}update(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ne(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield lr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ne(this,void 0,void 0,function*(){try{const s=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>sh(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new V8(l,this.shouldThrowOnError)}info(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield sh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:H_(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}exists(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield j8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r)&&r instanceof bp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield x0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}list(e,t,r){return ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},L8),t),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}listV2(e,t){return ne(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const UN="2.87.0",$N={"X-Client-Info":`storage-js/${UN}`};class F8{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$N),t),this.fetch=b0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield sh(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}createBucket(e){return ne(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ze(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return ne(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield x0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var ih=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function U8(n,e,t){const r=new URL(e,n);if(t)for(const[s,i]of Object.entries(t))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function $8(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function B8(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:i,headers:o}){const a=U8(n.baseUrl,r,s),l=await $8(n.auth),u=await e(a,{method:t,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),p=d&&h?JSON.parse(h):h;if(!u.ok){const g=d?p:void 0,w=g==null?void 0:g.error;throw new ih((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:g})}return{status:u.status,headers:u.headers,data:p}}}}function Rd(n){return n.join("")}var z8=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Rd(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rd(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rd(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rd(n.namespace)}`}),!0}catch(e){if(e instanceof ih&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof ih&&t.status===409)return;throw t}}};function ba(n){return n.join("")}var q8=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ba(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof ih&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof ih&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},W8=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=B8({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new z8(this.client,e),this.tableOps=new q8(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class BN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$N),t),this.fetch=b0(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}listBuckets(e){return ne(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield sh(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield x0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}from(e){if(!C8(e))throw new jh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new W8({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(i,o){const a=i[o];return typeof a!="function"?a:(...l)=>ne(this,void 0,void 0,function*(){try{return{data:yield a.apply(i,l),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}})}})}}const T0={"X-Client-Info":`storage-js/${UN}`,"Content-Type":"application/json"};class I0 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function bn(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class cf extends I0{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zN extends I0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var J_;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(J_||(J_={}));const Im=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),K8=()=>Response,qN=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},H8=n=>Array.from(new Float32Array(n)),G8=(n,e)=>{if(e!==void 0&&n.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${n.float32.length}`)},OI=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),J8=(n,e,t)=>ne(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new cf(OI(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new cf(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new cf(a,s,o))}}else e(new zN(OI(n),n))}),Q8=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(qN(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),t)):s};function Y8(n,e,t,r,s,i){return ne(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Q8(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>J8(l,a,r))})})}function On(n,e,t,r,s){return ne(this,void 0,void 0,function*(){return Y8(n,"POST",e,r,s,t)})}class WN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T0),t),this.fetch=Im(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ne(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bn(r))return{data:null,error:r};throw r}})}listIndexes(e){return ne(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ne(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(bn(r))return{data:null,error:r};throw r}})}}class KN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T0),t),this.fetch=Im(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}getVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}listVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield On(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}queryVectors(e){return ne(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ne(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}}class HN{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},T0),t),this.fetch=Im(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}getBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}listBuckets(){return ne(this,arguments,void 0,function*(e={}){try{return{data:yield On(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ne(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(bn(t))return{data:null,error:t};throw t}})}}class GN extends HN{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new JN(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ne(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ne(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ne(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ne(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class JN extends WN{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new QN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class QN extends KN{constructor(e,t,r,s,i){super(e,t,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class X8 extends F8{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new M8(this.url,this.headers,e,this.fetch)}get vectors(){return new GN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new BN(this.url+"/iceberg",this.headers,this.fetch)}}const Z8=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:BN,StorageApiError:MN,StorageClient:X8,StorageError:jh,StorageUnknownError:bp,StorageVectorsApiError:cf,StorageVectorsClient:GN,StorageVectorsError:I0,get StorageVectorsErrorCode(){return J_},StorageVectorsUnknownError:zN,VectorBucketApi:HN,VectorBucketScope:JN,VectorDataApi:KN,VectorIndexApi:WN,VectorIndexScope:QN,isPlainObject:qN,isStorageError:Ze,isStorageVectorsError:bn,normalizeToFloat32:H8,resolveFetch:Im,resolveResponse:K8,validateVectorDimension:G8},Symbol.toStringTag,{value:"Module"})),ez=ch(Z8);var YN={},Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.version=void 0;Sm.version="2.87.0";(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_REALTIME_OPTIONS=n.DEFAULT_AUTH_OPTIONS=n.DEFAULT_DB_OPTIONS=n.DEFAULT_GLOBAL_OPTIONS=n.DEFAULT_HEADERS=void 0;const e=Sm;let t="";typeof Deno<"u"?t="deno":typeof document<"u"?t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t="react-native":t="node",n.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${t}/${e.version}`},n.DEFAULT_GLOBAL_OPTIONS={headers:n.DEFAULT_HEADERS},n.DEFAULT_DB_OPTIONS={schema:"public"},n.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n.DEFAULT_REALTIME_OPTIONS={}})(YN);var XN={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithAuth=n.resolveHeadersConstructor=n.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);n.resolveFetch=e;const t=()=>Headers;n.resolveHeadersConstructor=t;const r=(s,i,o)=>{const a=(0,n.resolveFetch)(o),l=(0,n.resolveHeadersConstructor)();return async(u,h)=>{var d;const p=(d=await i())!==null&&d!==void 0?d:s;let g=new l(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),a(u,Object.assign(Object.assign({},h),{headers:g}))}};n.fetchWithAuth=r})(XN);var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.isBrowser=void 0;Ki.uuid=tz;Ki.ensureTrailingSlash=ZN;Ki.applySettingDefaults=rz;Ki.validateSupabaseUrl=sz;function tz(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function ZN(n){return n.endsWith("/")?n:n+"/"}const nz=()=>typeof window<"u";Ki.isBrowser=nz;function rz(n,e){var t,r;const{db:s,auth:i,realtime:o,global:a}=n,{db:l,auth:u,realtime:h,global:d}=e,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function sz(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ZN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Am={};const eO="2.87.0",Oa=30*1e3,Q_=3,zg=Q_*Oa,iz="http://localhost:9999",oz="supabase.auth.token",az={"X-Client-Info":`gotrue-js/${eO}`},Y_="X-Supabase-Api-Version",tO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uz=10*60*1e3;let Hl=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function ae(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}let nO=class extends Hl{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function rO(n){return ae(n)&&n.name==="AuthApiError"}let ni=class extends Hl{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},ks=class extends Hl{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}},yn=class extends ks{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function sO(n){return ae(n)&&n.name==="AuthSessionMissingError"}let lo=class extends ks{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Zu=class extends ks{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ec=class extends ks{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function iO(n){return ae(n)&&n.name==="AuthImplicitGrantRedirectError"}let X_=class extends ks{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},xp=class extends ks{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function hf(n){return ae(n)&&n.name==="AuthRetryableFetchError"}let Z_=class extends ks{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};function cz(n){return ae(n)&&n.name==="AuthWeakPasswordError"}let Tp=class extends ks{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Ip="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jI=` 	
\r=`.split(""),hz=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<jI.length;e+=1)n[jI[e].charCodeAt(0)]=-2;for(let e=0;e<Ip.length;e+=1)n[Ip[e].charCodeAt(0)]=e;return n})();function DI(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ip[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ip[r]),e.queuedBits-=6}}function oO(n,e,t){const r=hz[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function VI(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{pz(o,r,t)};for(let o=0;o<n.length;o+=1)oO(n.charCodeAt(o),s,i);return e.join("")}function dz(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function fz(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}dz(r,e)}}function pz(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ll(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)oO(n.charCodeAt(s),t,r);return new Uint8Array(e)}function mz(n){const e=[];return fz(n,t=>e.push(t)),new Uint8Array(e)}function Io(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>DI(s,t,r)),DI(null,t,r),e.join("")}function gz(n){return Math.round(Date.now()/1e3)+n}function yz(){return Symbol("auth-callback")}const $t=()=>typeof window<"u"&&typeof document<"u",to={tested:!1,writable:!1},aO=()=>{if(!$t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(to.tested)return to.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),to.tested=!0,to.writable=!0}catch{to.tested=!0,to.writable=!1}return to.writable};function _z(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const lO=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),vz=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ja=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},no=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ut=async(n,e)=>{await n.removeItem(e)};class km{constructor(){this.promise=new km.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}km.promiseConstructor=Promise;function qg(n){const e=n.split(".");if(e.length!==3)throw new Tp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!lz.test(e[r]))throw new Tp("JWT not in base64url format");return{header:JSON.parse(VI(e[0])),payload:JSON.parse(VI(e[1])),signature:ll(e[2]),raw:{header:e[0],payload:e[1]}}}async function wz(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Ez(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function bz(n){return("0"+n.toString(16)).substr(-2)}function xz(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,bz).join("")}async function Tz(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Iz(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Tz(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xa(n,e,t=!1){const r=xz();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await ja(n,`${e}-code-verifier`,s);const i=await Iz(r);return[i,r===i?"plain":"s256"]}const Sz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Az(n){const e=n.headers.get(Y_);if(!e||!e.match(Sz))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kz(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Rz(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ta(n){if(!Pz.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wg(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cz(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function LI(n){return JSON.parse(JSON.stringify(n))}const uo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Nz=[502,503,504];async function MI(n){var e;if(!vz(n))throw new xp(uo(n),0);if(Nz.includes(n.status))throw new xp(uo(n),n.status);let t;try{t=await n.json()}catch(i){throw new ni(uo(i),i)}let r;const s=Az(n);if(s&&s.getTime()>=tO["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Z_(uo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new yn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Z_(uo(t),n.status,t.weak_password.reasons);throw new nO(uo(t),n.status||500,r)}const Oz=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function fe(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Y_]||(i[Y_]=tO["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await jz(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function jz(n,e,t,r,s,i){const o=Oz(e,r,s,i);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new xp(uo(l),0)}if(a.ok||await MI(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await MI(l)}}function or(n){var e;let t=null;Lz(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=gz(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function FI(n){const e=or(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ri(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Dz(n){return{data:n,error:null}}function Vz(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=ou(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function UI(n){return n}function Lz(n){return n.access_token&&n.refresh_token&&n.expires_in}const df=["global","local","others"];let S0=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=lO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=df[0]){if(df.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${df.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ri})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ou(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Vz,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ae(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:UI});if(h.error)throw h.error;const d=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{const E=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);u[`${T}Page`]=E}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ae(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ta(e);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ta(e);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ri})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ta(e);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ri})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ta(e.userId);try{const{data:t,error:r}=await fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ta(e.userId),Ta(e.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},h=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:UI});if(h.error)throw h.error;const d=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(w=>{const E=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);u[`${T}Page`]=E}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ae(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}};function $I(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const co={debug:!!(globalThis&&aO()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let uO=class extends A0{};class Mz extends A0{}async function cO(n,e,t){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),co.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){co.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{co.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw co.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new uO(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(co.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const BI={};async function Fz(n,e,t){var r;const s=(r=BI[n])!==null&&r!==void 0?r:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new Mz(`Acquring process lock with name "${n}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await t());return BI[n]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function Uz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hO(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function $z(n){return parseInt(n,16)}function Bz(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function zz(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:h,uri:d,version:p}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const g=hO(n.address),w=h?`${h}://${r}`:r,E=n.statement?`${n.statement}
`:"",T=`${w} wants you to sign in with your Ethereum account:
${g}

${E}`;let b=`URI: ${d}
Version: ${p}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(b+=`
Expiration Time: ${s.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let _=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);_+=`
- ${v}`}b+=_}return`${T}
${b}`}class _t extends Error{constructor({message:e,code:t,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class Sp extends _t{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function qz({error:n,options:e}){var t,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(dO(o)){if(i.rp.id!==o)return new _t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Wz({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new _t({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(dO(r)){if(t.rpId!==r)return new _t({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Kz{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Hz=new Kz;function Gz(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=ou(n,["challenge","user","excludeCredentials"]),i=ll(e).buffer,o=Object.assign(Object.assign({},t),{id:ll(t.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ll(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Jz(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=ou(n,["challenge","allowCredentials"]),s=ll(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ll(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Qz(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Io(new Uint8Array(n.response.attestationObject)),clientDataJSON:Io(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Yz(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Io(new Uint8Array(s.authenticatorData)),clientDataJSON:Io(new Uint8Array(s.clientDataJSON)),signature:Io(new Uint8Array(s.signature)),userHandle:s.userHandle?Io(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dO(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function zI(){var n,e;return!!($t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Xz(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sp("Browser returned unexpected credential type",e)}:{data:null,error:new Sp("Empty credential response",e)}}catch(e){return{data:null,error:qz({error:e,options:n})}}}async function Zz(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Sp("Browser returned unexpected credential type",e)}:{data:null,error:new Sp("Empty credential response",e)}}catch(e){return{data:null,error:Wz({error:e,options:n})}}}const eq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},tq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ap(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(t(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=Ap(a,o):r[i]=Ap(o)}else r[i]=o}return r}function nq(n,e){return Ap(eq,n,e||{})}function rq(n,e){return Ap(tq,n,e||{})}class sq{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=s??Hz.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=nq(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await Xz({publicKey:u,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=rq(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await Zz(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return ae(o)?{data:null,error:o}:{data:null,error:new ni("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new Hl("rpId is required for WebAuthn authentication")};try{if(!zI())return{data:null,error:new ni("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ae(o)?{data:null,error:o}:{data:null,error:new ni("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!t)return{data:null,error:new Hl("rpId is required for WebAuthn registration")};try{if(!zI())return{data:null,error:new ni("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ae(o)?{data:null,error:o}:{data:null,error:new ni("Unexpected error in register",o)}}}}Uz();const iq={url:iz,storageKey:oz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:az,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function qI(n,e,t){return await t()}const Ia={};let k0=class ev{get jwks(){var e,t;return(t=(e=Ia[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ia[this.storageKey]=Object.assign(Object.assign({},Ia[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ia[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ia[this.storageKey]=Object.assign(Object.assign({},Ia[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},iq),e);if(this.storageKey=i.storageKey,this.instanceID=(t=ev.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,ev.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&$t()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new S0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=lO(i.fetch),this.lock=i.lock||qI,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:$t()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=cO:this.lock=qI,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:aO()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$I(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=$I(this.memoryStorage)),$t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eO}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if($t()&&(t=_z(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),$t()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),iO(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ae(t)?this._returnResult({error:t}):this._returnResult({error:new ni("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:or}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:h,password:d,options:p}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await xa(this.storage,this.storageKey)),i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:d,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:w},xform:or})}else if("phone"in e){const{phone:h,password:d,options:p}=e;i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:or})}else throw new Zu("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Ut(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:FI})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:FI})}else throw new Zu("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new lo;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,i,o,a,l,u,h,d,p;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:E,wallet:T,statement:b,options:_}=e;let v;if($t())if(typeof T=="object")v=T;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=T}const N=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href),D=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=hO(D[0]);let S=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!S){const A=await v.request({method:"eth_chainId"});S=$z(A)}const x={domain:N.host,address:F,statement:b,uri:N.href,version:"1",chainId:S,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=zz(x),w=await v.request({method:"personal_sign",params:[Bz(g),F]})}try{const{data:E,error:T}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:w},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:or});if(T)throw T;if(!E||!E.session||!E.user){const b=new lo;return this._returnResult({data:{user:null,session:null},error:b})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(ae(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var t,r,s,i,o,a,l,u,h,d,p,g;let w,E;if("message"in e)w=e.message,E=e.signature;else{const{chain:T,wallet:b,statement:_,options:v}=e;let N;if($t())if(typeof b=="object")N=b;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))N=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const D=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const F=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),_?{statement:_}:null));let S;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")S=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)S=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)w=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),E=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const F=await N.signMessage(new TextEncoder().encode(w),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:T,error:b}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Io(E)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:or});if(b)throw b;if(!T||!T.session||!T.user){const _=new lo;return this._returnResult({data:{user:null,session:null},error:_})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:b})}catch(T){if(ae(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const t=await no(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:o}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:or});if(await Ut(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new lo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:o}=e,a=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:or}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const h=new lo;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await xa(this.storage,this.storageKey));const{error:d}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Zu("You must provide either an email or phone number.")}catch(a){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:or});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await xa(this.storage,this.storageKey));const u=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Dz});return!((i=u.data)===null||i===void 0)&&i.url&&$t()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new yn;const{error:s}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await fe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await fe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Zu("You must provide either an email or phone number and a type")}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await no(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<zg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await no(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Wg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Cz(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):await this._useSession(async t=>{var r,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yn}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ri})})}catch(t){if(ae(t))return sO(t)&&(await this._removeSession(),await Ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new yn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await xa(this.storage,this.storageKey));const{data:u,error:h}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ri});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new yn;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:o}=qg(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(ae(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new yn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!$t())throw new ec("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ec(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new X_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ec("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new X_("No code detected.");const{data:_,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new ec("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let p=h+d;l&&(p=parseInt(l));const g=p-h;g*1e3<=Oa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const w=p-d;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,h);const{data:E,error:T}=await this._getUser(i);if(T)throw T;const b={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:p,refresh_token:o,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await no(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(rO(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=yz(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await xa(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,h;const{data:d,error:p}=i;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return $t()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ae(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:i}}=t;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:h}=e,d=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:or}),{data:p,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new lo}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(s){if(await Ut(this.storage,`${this.storageKey}-code-verifier`),ae(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)throw o;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Ez(async s=>(s>0&&await wz(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:or})),(s,i)=>{const o=200*Math.pow(2,s);return i&&hf(i)&&Date.now()+o-r<Oa})}catch(r){if(this._debug(t,"error",r),ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),$t()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await no(this.storage,this.storageKey);if(s&&this.userStorage){let o=await no(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ja(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Wg()}else if(s&&!s.user&&!s.user){const o=await no(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ut(this.storage,this.storageKey+"-user"),await ja(this.storage,this.storageKey,s)):s.user=Wg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<zg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${zg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),hf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new km;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new yn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),ae(i)){const o={data:null,error:i};return hf(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ut(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await ja(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=LI(s);await ja(this.storage,this.storageKey,i)}else{const s=LI(t);await ja(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ut(this.storage,this.storageKey),await Ut(this.storage,this.storageKey+"-code-verifier"),await Ut(this.storage,this.storageKey+"-user"),this.userStorage&&await Ut(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Oa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Oa}ms, refresh threshold is ${Q_} ticks`),s<=Q_&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof A0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await xa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Qz(e.webauthn.credential_response):Yz(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Gz(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Jz(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=qg(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new yn})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new yn});const o=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$t()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new yn});const o=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$t()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new yn})})}catch(e){if(ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yn})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+uz>s)return r;const{data:i,error:o}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:g,error:w}=await this.getSession();if(w||!g.session)return this._returnResult({data:null,error:w});r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=qg(r);t!=null&&t.allowExpired||kz(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const h=Rz(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,mz(`${a}.${l}`)))throw new Tp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}};k0.nextInstanceID={};const oq=S0,aq=k0,lq=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:oq,AuthApiError:nO,AuthClient:aq,AuthError:Hl,AuthImplicitGrantRedirectError:ec,AuthInvalidCredentialsError:Zu,AuthInvalidJwtError:Tp,AuthInvalidTokenResponseError:lo,AuthPKCEGrantCodeExchangeError:X_,AuthRetryableFetchError:xp,AuthSessionMissingError:yn,AuthUnknownError:ni,AuthWeakPasswordError:Z_,CustomAuthError:ks,GoTrueAdminApi:S0,GoTrueClient:k0,NavigatorLockAcquireTimeoutError:uO,SIGN_OUT_SCOPES:df,isAuthApiError:rO,isAuthError:ae,isAuthImplicitGrantRedirectError:iO,isAuthRetryableFetchError:hf,isAuthSessionMissingError:sO,isAuthWeakPasswordError:cz,lockInternals:co,navigatorLock:cO,processLock:Fz},Symbol.toStringTag,{value:"Module"})),fO=ch(lq);Object.defineProperty(Am,"__esModule",{value:!0});Am.SupabaseAuthClient=void 0;const uq=fO;class cq extends uq.AuthClient{constructor(e){super(e)}}Am.SupabaseAuthClient=cq;Object.defineProperty(_p,"__esModule",{value:!0});const hq=yN,dq=en,fq=LN,pq=ez,Pd=YN,mq=XN,WI=Ki,gq=Am;let yq=class{constructor(e,t,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=(0,WI.validateSupabaseUrl)(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Pd.DEFAULT_DB_OPTIONS,realtime:Pd.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Pd.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:Pd.DEFAULT_GLOBAL_OPTIONS},h=(0,WI.applySettingDefaults)(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=(0,mq.fetchWithAuth)(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new dq.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new pq.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new hq.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u,throwOnError:h},d,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gq.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),d),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:u,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fq.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};_p.default=yq;(function(n){var e=fa&&fa.__createBinding||(Object.create?function(h,d,p,g){g===void 0&&(g=p);var w=Object.getOwnPropertyDescriptor(d,p);(!w||("get"in w?!d.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(h,g,w)}:function(h,d,p,g){g===void 0&&(g=p),h[g]=d[p]}),t=fa&&fa.__exportStar||function(h,d){for(var p in h)p!=="default"&&!Object.prototype.hasOwnProperty.call(d,p)&&e(d,h,p)},r=fa&&fa.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(n,"__esModule",{value:!0}),n.createClient=n.SupabaseClient=n.FunctionRegion=n.FunctionsError=n.FunctionsRelayError=n.FunctionsFetchError=n.FunctionsHttpError=n.PostgrestError=void 0;const s=r(_p);t(fO,n);var i=en;Object.defineProperty(n,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=yN;Object.defineProperty(n,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(n,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(n,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(n,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(n,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),t(LN,n);var a=_p;Object.defineProperty(n,"SupabaseClient",{enumerable:!0,get:function(){return r(a).default}});const l=(h,d,p)=>new s.default(h,d,p);n.createClient=l;function u(){if(typeof window<"u"||typeof process>"u")return!1;const h=process.version;if(h==null)return!1;const d=h.match(/^v(\d+)\./);return d?parseInt(d[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(v0);const pO=aS(v0),_q=KO({__proto__:null,default:pO},[v0]),{PostgrestError:N7,FunctionsHttpError:O7,FunctionsFetchError:j7,FunctionsRelayError:D7,FunctionsError:V7,FunctionRegion:L7,SupabaseClient:M7,createClient:vq,GoTrueAdminApi:F7,GoTrueClient:U7,AuthAdminApi:$7,AuthClient:B7,navigatorLock:z7,NavigatorLockAcquireTimeoutError:q7,lockInternals:W7,processLock:K7,SIGN_OUT_SCOPES:H7,AuthError:G7,AuthApiError:J7,AuthUnknownError:Q7,CustomAuthError:Y7,AuthSessionMissingError:X7,AuthInvalidTokenResponseError:Z7,AuthInvalidCredentialsError:eW,AuthImplicitGrantRedirectError:tW,AuthPKCEGrantCodeExchangeError:nW,AuthRetryableFetchError:rW,AuthWeakPasswordError:sW,AuthInvalidJwtError:iW,isAuthError:oW,isAuthApiError:aW,isAuthSessionMissingError:lW,isAuthImplicitGrantRedirectError:uW,isAuthRetryableFetchError:cW,isAuthWeakPasswordError:hW,RealtimePresence:dW,RealtimeChannel:fW,RealtimeClient:pW,REALTIME_LISTEN_TYPES:mW,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:gW,REALTIME_PRESENCE_LISTEN_EVENTS:yW,REALTIME_SUBSCRIBE_STATES:_W,REALTIME_CHANNEL_STATES:vW}=pO||_q,wq="https://tfbjiyknoagcxjzeoqzw.supabase.co",Eq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmYmppeWtub2FnY3hqemVvcXp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNTM5MzQsImV4cCI6MjA4MDgyOTkzNH0.Mm200p-HjpEgZWLMxI684xmhbCIWcxtcNlVCdkQ3KGk",bq=vq(wq,Eq);async function xq(n){const{error:e}=await bq.from("contacts").insert([{name:n.name,email:n.email,subject:n.subject,message:n.message,created_at:new Date().toISOString()}]);if(e)throw e;return{success:!0}}const Tq=_0({name:Ur().min(2,"Name must be at least 2 characters"),email:Ur().email("Invalid email address"),message:Ur().min(10,"Message must be at least 10 characters")});function Iq(){const[n,e]=j.useState(!1),[t,r]=j.useState(!1),[s,i]=j.useState(""),{register:o,handleSubmit:a,formState:{errors:l},reset:u}=C_({resolver:N_(Tq)}),h=async d=>{e(!0),r(!1),i("");try{await xq({name:d.name,email:d.email,subject:"Contact Form Submission",message:d.message});try{await U5(gC(Si,"contacts"),{name:d.name,email:d.email,message:d.message,createdAt:ol(),status:"new"})}catch(p){console.warn("Firebase backup failed:",p)}r(!0),u(),setTimeout(()=>r(!1),5e3)}catch(p){console.error("Failed to submit contact form:",p),i("Failed to send message. Please try again.")}finally{e(!1)}};return f.jsx("div",{className:"min-h-screen bg-background py-16",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h1",{className:"text-4xl font-bold text-primary mb-4",children:"Get in Touch"}),f.jsx("p",{className:"text-xl text-gray-600",children:"Have a question or need help? We'd love to hear from you."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[f.jsxs("div",{className:"card text-center",children:[f.jsx("div",{className:"bg-accent/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:f.jsx(wL,{className:"h-8 w-8 text-accent"})}),f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Email"}),f.jsx("p",{className:"text-gray-600",children:"support@taskify.com"})]}),f.jsxs("div",{className:"card text-center",children:[f.jsx("div",{className:"bg-accent/10 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:f.jsx(IL,{className:"h-8 w-8 text-accent"})}),f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Phone"}),f.jsx("p",{className:"text-gray-600",children:"+1 (555) 123-4567"})]})]}),f.jsxs("div",{className:"card",children:[f.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Send us a Message"}),t&&f.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md text-green-700",children:"Thank you for your message! We'll get back to you soon."}),s&&f.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md text-red-700",children:s}),f.jsxs("form",{onSubmit:a(h),className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Name"}),f.jsx("input",{type:"text",...o("name"),className:"input",placeholder:"Your name"}),l.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Email"}),f.jsx("input",{type:"email",...o("email"),className:"input",placeholder:"your.email@example.com"}),l.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email.message})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Message"}),f.jsx("textarea",{...o("message"),rows:6,className:"input",placeholder:"Tell us how we can help..."}),l.message&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.message.message})]}),f.jsx("button",{type:"submit",disabled:n,className:"btn btn-primary w-full",children:n?"Sending...":f.jsxs(f.Fragment,{children:[f.jsx(RL,{className:"h-4 w-4 mr-2 inline"}),"Send Message"]})})]})]}),f.jsx("div",{className:"mt-12 card",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"bg-accent/10 p-3 rounded-lg",children:f.jsx(Uc,{className:"h-6 w-6 text-accent"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Office Location"}),f.jsxs("p",{className:"text-gray-600",children:["123 Job Street",f.jsx("br",{}),"San Francisco, CA 94102",f.jsx("br",{}),"United States"]})]})]})})]})})})}const Sq="http://localhost:5000/api";class Aq{constructor(e){wE(this,"baseURL");this.baseURL=e}async request(e,t={}){const r=localStorage.getItem("token"),s={"Content-Type":"application/json",...t.headers};r&&(s.Authorization=`Bearer ${r}`);try{const i=await fetch(`${this.baseURL}${e}`,{...t,headers:s}),o=await i.json();return i.ok?{success:!0,data:o.data||o}:{success:!1,error:o.error||{code:"UNKNOWN_ERROR",message:"An unexpected error occurred"}}}catch(i){return{success:!1,error:{code:"NETWORK_ERROR",message:i instanceof Error?i.message:"Network error occurred"}}}}async register(e,t,r,s,i){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,firstName:r,lastName:s,role:i})})}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async logout(){return localStorage.removeItem("token"),this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async getGoogleAuthUrl(){return this.request("/auth/google")}async getJobs(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(([s,i])=>{i!=null&&i!==""&&t.append(s,String(i))});const r=t.toString();return this.request(`/jobs${r?`?${r}`:""}`)}async getJobById(e){return this.request(`/jobs/${e}`)}async getJobBySlug(e){return this.request(`/jobs/slug/${e}`)}async createJob(e){return this.request("/jobs",{method:"POST",body:JSON.stringify(e)})}async updateJob(e,t){return this.request(`/jobs/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteJob(e){return this.request(`/jobs/${e}`,{method:"DELETE"})}async submitApplication(e,t,r,s){return this.request("/applications",{method:"POST",body:JSON.stringify({jobId:e,coverLetter:t,resumeUrl:r,portfolioUrl:s})})}async getUserApplications(){return this.request("/applications")}async getJobApplications(e){return this.request(`/applications/job/${e}`)}async updateApplicationStatus(e,t){return this.request(`/applications/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})})}async getUserProfile(){return this.request("/users/profile")}async updateUserProfile(e){return this.request("/users/profile",{method:"PUT",body:JSON.stringify(e)})}async getCompanies(){return this.request("/companies")}async getCompanyById(e){return this.request(`/companies/${e}`)}async createCompany(e){return this.request("/companies",{method:"POST",body:JSON.stringify(e)})}async updateCompany(e,t){return this.request(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)})}async submitContactForm(e,t,r){return this.request("/contact",{method:"POST",body:JSON.stringify({name:e,email:t,message:r})})}}const kq=new Aq(Sq);function Rq(){const{user:n,isAuthenticated:e}=Wi(),t=Ui(),[r,s]=j.useState([]),[i,o]=j.useState([]),[a,l]=j.useState(!0),[u,h]=j.useState({totalJobs:0,activeJobs:0,totalApplications:0,pendingApplications:0});j.useEffect(()=>{if(!e||(n==null?void 0:n.role)!=="EMPLOYER"){t("/");return}d()},[e,n]);const d=async()=>{l(!0);try{const p=await kq.getJobs();if(p.success&&p.data){const g=p.data.jobs.filter(w=>{var E;return((E=w.company)==null?void 0:E.id)===(n==null?void 0:n.id)});s(g),h({totalJobs:g.length,activeJobs:g.filter(w=>w.status==="ACTIVE").length,totalApplications:0,pendingApplications:0})}}catch(p){console.error("Failed to fetch dashboard data:",p)}finally{l(!1)}};return a?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):f.jsx("div",{className:"min-h-screen bg-background py-8",children:f.jsxs("div",{className:"container mx-auto px-4",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"Employer Dashboard"}),f.jsx("p",{className:"text-gray-600",children:"Manage your job postings and applications"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"card",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Jobs"}),f.jsx("p",{className:"text-2xl font-bold text-primary",children:u.totalJobs})]}),f.jsx(Il,{className:"h-8 w-8 text-accent"})]})}),f.jsx("div",{className:"card",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Jobs"}),f.jsx("p",{className:"text-2xl font-bold text-success",children:u.activeJobs})]}),f.jsx(dL,{className:"h-8 w-8 text-success"})]})}),f.jsx("div",{className:"card",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Applications"}),f.jsx("p",{className:"text-2xl font-bold text-primary",children:u.totalApplications})]}),f.jsx(Ky,{className:"h-8 w-8 text-accent"})]})}),f.jsx("div",{className:"card",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Pending Review"}),f.jsx("p",{className:"text-2xl font-bold text-warning",children:u.pendingApplications})]}),f.jsx(Ky,{className:"h-8 w-8 text-warning"})]})})]}),f.jsx("div",{className:"mb-8",children:f.jsxs("button",{className:"btn btn-primary",children:[f.jsx(Fb,{className:"h-4 w-4 mr-2"}),"Post New Job"]})}),f.jsxs("div",{className:"card",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Job Postings"}),r.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx(Il,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't posted any jobs yet."}),f.jsxs("button",{className:"btn btn-primary",children:[f.jsx(Fb,{className:"h-4 w-4 mr-2"}),"Post Your First Job"]})]}):f.jsx("div",{className:"space-y-4",children:r.map(p=>{var g;return f.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-semibold text-primary mb-1",children:p.title}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:(g=p.company)==null?void 0:g.name}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:p.status}),p.isRemote&&f.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:"Remote"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"btn btn-outline-primary text-sm",children:"Edit"}),f.jsx("button",{className:"btn btn-outline-primary text-sm",children:"View Applications"})]})]})},p.id)})})]})]})})}function Pq(){const{user:n,isAuthenticated:e}=Wi(),t=Ui(),[r,s]=j.useState(!1),[i,o]=j.useState(""),[a,l]=j.useState({totalReferrals:0,successfulReferrals:0,totalEarnings:0}),[u,h]=j.useState(!e);j.useEffect(()=>{e&&n&&(d(),p())},[e,n]);const d=()=>{if(n!=null&&n.uid){const T=n.uid.substring(0,8).toUpperCase();o(T)}},p=async()=>{if(n!=null&&n.uid)try{const T=gC(Si,"referrals"),b=D5(T,V5("referrerId","==",n.uid)),_=await F5(b),v=_.size,N=_.docs.filter(F=>F.data().status==="completed").length,D=N*250;l({totalReferrals:v,successfulReferrals:N,totalEarnings:D})}catch(T){console.error("Error fetching referral stats:",T)}},g=()=>`${window.location.origin}/register?ref=${i}`,w=()=>{navigator.clipboard.writeText(g()),s(!0),setTimeout(()=>s(!1),2e3)},E=async()=>{if(navigator.share)try{await navigator.share({title:"Join Taskify",text:"Join Taskify and earn money! Use my referral link:",url:g()})}catch(T){console.log("Error sharing:",T)}else w()};return u&&!e?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center px-4",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(pL,{className:"w-10 h-10 text-white"})}),f.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Join Taskify's Referral Rewards"}),f.jsxs("p",{className:"text-gray-600",children:["Refer your network to join Taskify and ",f.jsx("span",{className:"text-blue-600 font-semibold",children:"earn $250-$15,000"})," in bonuses for every successful referral."]})]}),f.jsxs("div",{className:"space-y-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 text-left",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(Ub,{className:"w-5 h-5 text-blue-600"})}),f.jsx("div",{children:f.jsx("h3",{className:"font-semibold",children:"Share your referral link"})})]}),f.jsxs("div",{className:"flex items-center gap-3 text-left",children:[f.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(Lb,{className:"w-5 h-5 text-purple-600"})}),f.jsx("div",{children:f.jsx("h3",{className:"font-semibold",children:"Get paid for each referral"})})]}),f.jsxs("div",{className:"flex items-center gap-3 text-left",children:[f.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(Uk,{className:"w-5 h-5 text-green-600"})}),f.jsx("div",{children:f.jsx("h3",{className:"font-semibold",children:"Unlimited earning potential"})})]})]}),f.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"All-time earnings"}),f.jsx("p",{className:"text-2xl font-bold",children:"$1M+"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Top referrer earnings"}),f.jsx("p",{className:"text-2xl font-bold",children:"$100K+"})]})]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("button",{onClick:()=>t("/register"),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:"Join now"}),f.jsx("button",{onClick:()=>h(!1),className:"w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-50 transition-all",children:"Maybe later"})]})]})}):e?f.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Refer & Earn"}),f.jsxs("p",{className:"text-xl text-gray-600",children:["Share Taskify with your network and earn up to ",f.jsx("span",{className:"text-blue-600 font-semibold",children:"$15,000"})," per referral!"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx(Ky,{className:"w-8 h-8 text-blue-600"}),f.jsx("span",{className:"text-3xl font-bold",children:a.totalReferrals})]}),f.jsx("h3",{className:"text-gray-600 font-medium",children:"Total Referrals"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx(ZV,{className:"w-8 h-8 text-green-600"}),f.jsx("span",{className:"text-3xl font-bold",children:a.successfulReferrals})]}),f.jsx("h3",{className:"text-gray-600 font-medium",children:"Successful"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx(Lb,{className:"w-8 h-8 text-purple-600"}),f.jsxs("span",{className:"text-3xl font-bold",children:["$",a.totalEarnings.toLocaleString()]})]}),f.jsx("h3",{className:"text-gray-600 font-medium",children:"Total Earnings"})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Share your referral link"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Use this link to refer your friends and professional network. There's no limit to how many people you can refer."}),f.jsxs("div",{className:"flex gap-3 mb-4",children:[f.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 flex items-center gap-2",children:f.jsx("span",{className:"text-sm text-gray-600 truncate",children:g()})}),f.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2",children:r?f.jsxs(f.Fragment,{children:[f.jsx(Fk,{className:"w-5 h-5"}),"Copied"]}):f.jsxs(f.Fragment,{children:[f.jsx(lL,{className:"w-5 h-5"}),"Copy"]})})]}),f.jsxs("button",{onClick:E,className:"w-full border-2 border-blue-600 text-blue-600 py-3 rounded-lg font-medium hover:bg-blue-50 transition-colors flex items-center justify-center gap-2",children:[f.jsx(Ub,{className:"w-5 h-5"}),"Share Link"]}),f.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"With this referral link, we recommend that you promote it on your blog, social profile, website, videos, etc (the more places the better)."})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"How it works"}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx("span",{className:"text-blue-600 font-bold text-lg",children:"1"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Share your link"}),f.jsx("p",{className:"text-gray-600",children:"Send your unique referral link to friends, colleagues, or post it on social media."})]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"2"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-1",children:"They sign up"}),f.jsx("p",{className:"text-gray-600",children:"When someone uses your link to register and gets hired for a job, you earn a reward."})]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx("span",{className:"text-green-600 font-bold text-lg",children:"3"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Get paid"}),f.jsx("p",{className:"text-gray-600",children:"Earn $250 to $15,000 for each successful referral. Payments are processed monthly."})]})]})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-md p-8",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Reward Tiers"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white rounded-lg p-6 text-center",children:[f.jsx("div",{className:"text-blue-600 font-bold text-3xl mb-2",children:"$250"}),f.jsx("p",{className:"text-gray-600 font-medium",children:"Entry Level Jobs"})]}),f.jsxs("div",{className:"bg-white rounded-lg p-6 text-center border-2 border-purple-400",children:[f.jsx("div",{className:"text-purple-600 font-bold text-3xl mb-2",children:"$5,000"}),f.jsx("p",{className:"text-gray-600 font-medium",children:"Mid-Level Jobs"})]}),f.jsxs("div",{className:"bg-white rounded-lg p-6 text-center",children:[f.jsx("div",{className:"text-green-600 font-bold text-3xl mb-2",children:"$15,000"}),f.jsx("p",{className:"text-gray-600 font-medium",children:"Senior Level Jobs"})]})]}),f.jsx("p",{className:"text-sm text-gray-600 mt-6 text-center",children:"Rewards vary based on the position level and salary of the referred candidate's placement."})]}),f.jsxs("div",{className:"text-center mt-8 text-gray-600",children:[f.jsx("p",{children:"If you have more questions, you can reach out to us at"}),f.jsx("a",{href:"mailto:support@taskify.com",className:"text-blue-600 font-medium hover:underline",children:"support@taskify.com"})]})]})}):null}function Cq(){const[n]=Vk(),e=Ui(),{refreshUser:t}=Wi();return j.useEffect(()=>{const r=n.get("token"),s=n.get("error");if(s){console.error("OAuth error:",s),e("/?error=auth_failed");return}r?(localStorage.setItem("token",r),t().then(()=>{e("/jobs")})):e("/")},[n,e,t]),f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Completing authentication..."})]})})}var Rm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pm=typeof window>"u"||"Deno"in globalThis;function ur(){}function Nq(n,e){return typeof n=="function"?n(e):n}function Oq(n){return typeof n=="number"&&n>=0&&n!==1/0}function jq(n,e){return Math.max(n+(e||0)-Date.now(),0)}function KI(n,e){return typeof n=="function"?n(e):n}function Dq(n,e){return typeof n=="function"?n(e):n}function HI(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==R0(o,e.options))return!1}else if(!ah(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function GI(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(oh(e.options.mutationKey)!==oh(i))return!1}else if(!ah(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function R0(n,e){return((e==null?void 0:e.queryKeyHashFn)||oh)(n)}function oh(n){return JSON.stringify(n,(e,t)=>tv(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ah(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!ah(n[t],e[t])):!1}function mO(n,e){if(n===e)return n;const t=JI(n)&&JI(e);if(t||tv(n)&&tv(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let u=0;u<o;u++){const h=t?u:i[u];(!t&&r.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=mO(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&l++)}return s===o&&l===s?n:a}return e}function JI(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function tv(n){if(!QI(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!QI(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function QI(n){return Object.prototype.toString.call(n)==="[object Object]"}function Vq(n){return new Promise(e=>{setTimeout(e,n)})}function Lq(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?mO(n,e):e}function Mq(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Fq(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var P0=Symbol();function gO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===P0?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var So,si,ul,ZI,Uq=(ZI=class extends Rm{constructor(){super();Oe(this,So);Oe(this,si);Oe(this,ul);we(this,ul,e=>{if(!Pm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){z(this,si)||this.setEventListener(z(this,ul))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,si))==null||e.call(this),we(this,si,void 0))}setEventListener(e){var t;we(this,ul,e),(t=z(this,si))==null||t.call(this),we(this,si,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,So)!==e&&(we(this,So,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof z(this,So)=="boolean"?z(this,So):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},So=new WeakMap,si=new WeakMap,ul=new WeakMap,ZI),yO=new Uq,cl,ii,hl,eS,$q=(eS=class extends Rm{constructor(){super();Oe(this,cl,!0);Oe(this,ii);Oe(this,hl);we(this,hl,e=>{if(!Pm&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,ii)||this.setEventListener(z(this,hl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ii))==null||e.call(this),we(this,ii,void 0))}setEventListener(e){var t;we(this,hl,e),(t=z(this,ii))==null||t.call(this),we(this,ii,e(this.setOnline.bind(this)))}setOnline(e){z(this,cl)!==e&&(we(this,cl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,cl)}},cl=new WeakMap,ii=new WeakMap,hl=new WeakMap,eS),kp=new $q;function Bq(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function zq(n){return Math.min(1e3*2**n,3e4)}function _O(n){return(n??"online")==="online"?kp.isOnline():!0}var vO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Kg(n){return n instanceof vO}function wO(n){let e=!1,t=0,r=!1,s;const i=Bq(),o=E=>{var T;r||(p(new vO(E)),(T=n.abort)==null||T.call(n))},a=()=>{e=!0},l=()=>{e=!1},u=()=>yO.isFocused()&&(n.networkMode==="always"||kp.isOnline())&&n.canRun(),h=()=>_O(n.networkMode)&&n.canRun(),d=E=>{var T;r||(r=!0,(T=n.onSuccess)==null||T.call(n,E),s==null||s(),i.resolve(E))},p=E=>{var T;r||(r=!0,(T=n.onError)==null||T.call(n,E),s==null||s(),i.reject(E))},g=()=>new Promise(E=>{var T;s=b=>{(r||u())&&E(b)},(T=n.onPause)==null||T.call(n)}).then(()=>{var E;s=void 0,r||(E=n.onContinue)==null||E.call(n)}),w=()=>{if(r)return;let E;const T=t===0?n.initialPromise:void 0;try{E=T??n.fn()}catch(b){E=Promise.reject(b)}Promise.resolve(E).then(d).catch(b=>{var F;if(r)return;const _=n.retry??(Pm?0:3),v=n.retryDelay??zq,N=typeof v=="function"?v(t,b):v,D=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,b);if(e||!D){p(b);return}t++,(F=n.onFail)==null||F.call(n,t,b),Vq(N).then(()=>u()?void 0:g()).then(()=>{e?p(b):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?w():g().then(w),i)}}function qq(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ln=qq(),Ao,tS,EO=(tS=class{constructor(){Oe(this,Ao)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oq(this.gcTime)&&we(this,Ao,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Pm?1/0:5*60*1e3))}clearGcTimeout(){z(this,Ao)&&(clearTimeout(z(this,Ao)),we(this,Ao,void 0))}},Ao=new WeakMap,tS),dl,fl,zn,ko,Yt,lh,Ro,cr,es,nS,Wq=(nS=class extends EO{constructor(e){super();Oe(this,cr);Oe(this,dl);Oe(this,fl);Oe(this,zn);Oe(this,ko);Oe(this,Yt);Oe(this,lh);Oe(this,Ro);we(this,Ro,!1),we(this,lh,e.defaultOptions),this.setOptions(e.options),this.observers=[],we(this,ko,e.client),we(this,zn,z(this,ko).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,we(this,dl,Hq(this.options)),this.state=e.state??z(this,dl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,Yt))==null?void 0:e.promise}setOptions(e){this.options={...z(this,lh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,zn).remove(this)}setData(e,t){const r=Lq(this.state.data,e,this.options);return Ht(this,cr,es).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Ht(this,cr,es).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=z(this,Yt))==null?void 0:r.promise;return(s=z(this,Yt))==null||s.cancel(e),t?t.then(ur).catch(ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,dl))}isActive(){return this.observers.some(e=>Dq(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===P0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!jq(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=z(this,Yt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=z(this,Yt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,zn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(z(this,Yt)&&(z(this,Ro)?z(this,Yt).cancel({revert:!0}):z(this,Yt).cancelRetry()),this.scheduleGc()),z(this,zn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,cr,es).call(this,{type:"invalidate"})}fetch(e,t){var l,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(z(this,Yt))return z(this,Yt).continueRetry(),z(this,Yt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(we(this,Ro,!0),r.signal)})},i=()=>{const d=gO(this.options,t),p={client:z(this,ko),queryKey:this.queryKey,meta:this.meta};return s(p),we(this,Ro,!1),this.options.persister?this.options.persister(d,p,this):d(p)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:z(this,ko),state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),we(this,fl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Ht(this,cr,es).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=d=>{var p,g,w,E;Kg(d)&&d.silent||Ht(this,cr,es).call(this,{type:"error",error:d}),Kg(d)||((g=(p=z(this,zn).config).onError)==null||g.call(p,d,this),(E=(w=z(this,zn).config).onSettled)==null||E.call(w,this.state.data,d,this)),this.scheduleGc()};return we(this,Yt,wO({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var p,g,w,E;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(T){a(T);return}(g=(p=z(this,zn).config).onSuccess)==null||g.call(p,d,this),(E=(w=z(this,zn).config).onSettled)==null||E.call(w,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,p)=>{Ht(this,cr,es).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{Ht(this,cr,es).call(this,{type:"pause"})},onContinue:()=>{Ht(this,cr,es).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),z(this,Yt).start()}},dl=new WeakMap,fl=new WeakMap,zn=new WeakMap,ko=new WeakMap,Yt=new WeakMap,lh=new WeakMap,Ro=new WeakMap,cr=new WeakSet,es=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Kq(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Kg(s)&&s.revert&&z(this,fl)?{...z(this,fl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),ln.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,zn).notify({query:this,type:"updated",action:e})})},nS);function Kq(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_O(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Hq(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Vr,rS,Gq=(rS=class extends Rm{constructor(e={}){super();Oe(this,Vr);this.config=e,we(this,Vr,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??R0(s,t);let o=this.get(i);return o||(o=new Wq({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,Vr).has(e.queryHash)||(z(this,Vr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=z(this,Vr).get(e.queryHash);t&&(e.destroy(),t===e&&z(this,Vr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Vr).get(e)}getAll(){return[...z(this,Vr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>HI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>HI(e,r)):t}notify(e){ln.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Vr=new WeakMap,rS),Lr,sn,Po,Mr,Ws,sS,Jq=(sS=class extends EO{constructor(e){super();Oe(this,Mr);Oe(this,Lr);Oe(this,sn);Oe(this,Po);this.mutationId=e.mutationId,we(this,sn,e.mutationCache),we(this,Lr,[]),this.state=e.state||Qq(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,Lr).includes(e)||(z(this,Lr).push(e),this.clearGcTimeout(),z(this,sn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){we(this,Lr,z(this,Lr).filter(t=>t!==e)),this.scheduleGc(),z(this,sn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,Lr).length||(this.state.status==="pending"?this.scheduleGc():z(this,sn).remove(this))}continue(){var e;return((e=z(this,Po))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,u,h,d,p,g,w,E,T,b,_,v,N,D,F,S;we(this,Po,wO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(x,A)=>{Ht(this,Mr,Ws).call(this,{type:"failed",failureCount:x,error:A})},onPause:()=>{Ht(this,Mr,Ws).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Mr,Ws).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,sn).canRun(this)}));const t=this.state.status==="pending",r=!z(this,Po).canStart();try{if(!t){Ht(this,Mr,Ws).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=z(this,sn).config).onMutate)==null?void 0:i.call(s,e,this));const A=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));A!==this.state.context&&Ht(this,Mr,Ws).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const x=await z(this,Po).start();return await((u=(l=z(this,sn).config).onSuccess)==null?void 0:u.call(l,x,e,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,x,e,this.state.context)),await((g=(p=z(this,sn).config).onSettled)==null?void 0:g.call(p,x,null,this.state.variables,this.state.context,this)),await((E=(w=this.options).onSettled)==null?void 0:E.call(w,x,null,e,this.state.context)),Ht(this,Mr,Ws).call(this,{type:"success",data:x}),x}catch(x){try{throw await((b=(T=z(this,sn).config).onError)==null?void 0:b.call(T,x,e,this.state.context,this)),await((v=(_=this.options).onError)==null?void 0:v.call(_,x,e,this.state.context)),await((D=(N=z(this,sn).config).onSettled)==null?void 0:D.call(N,void 0,x,this.state.variables,this.state.context,this)),await((S=(F=this.options).onSettled)==null?void 0:S.call(F,void 0,x,e,this.state.context)),x}finally{Ht(this,Mr,Ws).call(this,{type:"error",error:x})}}finally{z(this,sn).runNext(this)}}},Lr=new WeakMap,sn=new WeakMap,Po=new WeakMap,Mr=new WeakSet,Ws=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ln.batch(()=>{z(this,Lr).forEach(r=>{r.onMutationUpdate(e)}),z(this,sn).notify({mutation:this,type:"updated",action:e})})},sS);function Qq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rs,hr,uh,iS,Yq=(iS=class extends Rm{constructor(e={}){super();Oe(this,rs);Oe(this,hr);Oe(this,uh);this.config=e,we(this,rs,new Set),we(this,hr,new Map),we(this,uh,0)}build(e,t,r){const s=new Jq({mutationCache:this,mutationId:++Jh(this,uh)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){z(this,rs).add(e);const t=Cd(e);if(typeof t=="string"){const r=z(this,hr).get(t);r?r.push(e):z(this,hr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,rs).delete(e)){const t=Cd(e);if(typeof t=="string"){const r=z(this,hr).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,hr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Cd(e);if(typeof t=="string"){const r=z(this,hr).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Cd(e);if(typeof t=="string"){const s=(r=z(this,hr).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ln.batch(()=>{z(this,rs).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,rs).clear(),z(this,hr).clear()})}getAll(){return Array.from(z(this,rs))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>GI(t,r))}findAll(e={}){return this.getAll().filter(t=>GI(e,t))}notify(e){ln.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ln.batch(()=>Promise.all(e.map(t=>t.continue().catch(ur))))}},rs=new WeakMap,hr=new WeakMap,uh=new WeakMap,iS);function Cd(n){var e;return(e=n.options.scope)==null?void 0:e.id}function YI(n){return{onFetch:(e,t)=>{var h,d,p,g,w;const r=e.options,s=(p=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let E=!1;const T=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},b=gO(e.options,e.fetchOptions),_=async(v,N,D)=>{if(E)return Promise.reject();if(N==null&&v.pages.length)return Promise.resolve(v);const F={client:e.client,queryKey:e.queryKey,pageParam:N,direction:D?"backward":"forward",meta:e.options.meta};T(F);const S=await b(F),{maxPages:x}=e.options,A=D?Fq:Mq;return{pages:A(v.pages,S,x),pageParams:A(v.pageParams,N,x)}};if(s&&i.length){const v=s==="backward",N=v?Xq:XI,D={pages:i,pageParams:o},F=N(r,D);a=await _(D,F,v)}else{const v=n??i.length;do{const N=l===0?o[0]??r.initialPageParam:XI(r,a);if(l>0&&N==null)break;a=await _(a,N),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var E,T;return(T=(E=e.options).persister)==null?void 0:T.call(E,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function XI(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Xq(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var ct,oi,ai,pl,ml,li,gl,yl,oS,Zq=(oS=class{constructor(n={}){Oe(this,ct);Oe(this,oi);Oe(this,ai);Oe(this,pl);Oe(this,ml);Oe(this,li);Oe(this,gl);Oe(this,yl);we(this,ct,n.queryCache||new Gq),we(this,oi,n.mutationCache||new Yq),we(this,ai,n.defaultOptions||{}),we(this,pl,new Map),we(this,ml,new Map),we(this,li,0)}mount(){Jh(this,li)._++,z(this,li)===1&&(we(this,gl,yO.subscribe(async n=>{n&&(await this.resumePausedMutations(),z(this,ct).onFocus())})),we(this,yl,kp.subscribe(async n=>{n&&(await this.resumePausedMutations(),z(this,ct).onOnline())})))}unmount(){var n,e;Jh(this,li)._--,z(this,li)===0&&((n=z(this,gl))==null||n.call(this),we(this,gl,void 0),(e=z(this,yl))==null||e.call(this),we(this,yl,void 0))}isFetching(n){return z(this,ct).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return z(this,oi).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=z(this,ct).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=z(this,ct).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(KI(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return z(this,ct).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=z(this,ct).get(r.queryHash),i=s==null?void 0:s.state.data,o=Nq(e,i);if(o!==void 0)return z(this,ct).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return ln.batch(()=>z(this,ct).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=z(this,ct).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=z(this,ct);ln.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=z(this,ct);return ln.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ln.batch(()=>z(this,ct).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(ur).catch(ur)}invalidateQueries(n,e={}){return ln.batch(()=>(z(this,ct).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ln.batch(()=>z(this,ct).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(ur)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ur)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=z(this,ct).build(this,e);return t.isStaleByTime(KI(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ur).catch(ur)}fetchInfiniteQuery(n){return n.behavior=YI(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ur).catch(ur)}ensureInfiniteQueryData(n){return n.behavior=YI(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return kp.isOnline()?z(this,oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,ct)}getMutationCache(){return z(this,oi)}getDefaultOptions(){return z(this,ai)}setDefaultOptions(n){we(this,ai,n)}setQueryDefaults(n,e){z(this,pl).set(oh(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...z(this,pl).values()],t={};return e.forEach(r=>{ah(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){z(this,ml).set(oh(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...z(this,ml).values()],t={};return e.forEach(r=>{ah(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...z(this,ai).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=R0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===P0&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...z(this,ai).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){z(this,ct).clear(),z(this,oi).clear()}},ct=new WeakMap,oi=new WeakMap,ai=new WeakMap,pl=new WeakMap,ml=new WeakMap,li=new WeakMap,gl=new WeakMap,yl=new WeakMap,oS),e7=j.createContext(void 0),t7=({client:n,children:e})=>(j.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),f.jsx(e7.Provider,{value:n,children:e}));const n7=new Zq;function r7(){return f.jsx(t7,{client:n7,children:f.jsx(G5,{children:f.jsx("div",{className:"min-h-screen bg-background",children:f.jsxs(pV,{children:[f.jsxs(Cr,{path:"/",element:f.jsx(Y9,{}),children:[f.jsx(Cr,{index:!0,element:f.jsx(X9,{})}),f.jsx(Cr,{path:"jobs",element:f.jsx(e8,{})}),f.jsx(Cr,{path:"jobs/:slug",element:f.jsx(t8,{})}),f.jsx(Cr,{path:"pricing",element:f.jsx(n8,{})}),f.jsx(Cr,{path:"contact",element:f.jsx(Iq,{})}),f.jsx(Cr,{path:"refer",element:f.jsx(Pq,{})}),f.jsx(Cr,{path:"employer/dashboard",element:f.jsx(Rq,{})})]}),f.jsx(Cr,{path:"/auth/callback",element:f.jsx(Cq,{})})]})})})})}Hg.createRoot(document.getElementById("root")).render(f.jsx(_n.StrictMode,{children:f.jsx(MV,{children:f.jsx(r7,{})})}));
